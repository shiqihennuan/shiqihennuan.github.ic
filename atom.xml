<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>记录生活，记录故事</title>
  
  <subtitle>身体和灵魂，总要有一个在路上。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.xiaomujin.club/"/>
  <updated>2019-10-03T08:55:08.936Z</updated>
  <id>https://www.xiaomujin.club/</id>
  
  <author>
    <name>莫子谦</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>七天搞定node.js---第七天</title>
    <link href="https://www.xiaomujin.club/2019/10/03/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E4%B8%83%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/10/03/学习node.js的第七天/</id>
    <published>2019-10-03T08:54:00.000Z</published>
    <updated>2019-10-03T08:55:08.936Z</updated>
    
    <content type="html"><![CDATA[<p>自学node.js第七天的笔记，差点以为要烂尾了~<br><a id="more"></a></p><h1 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h1><p><a href="http://expressjs.com/en/guide/using-middleware.html" target="_blank" rel="noopener">http://expressjs.com/en/guide/using-middleware.html</a><br>中间件的本质就是一个请求处理方法，我们把用户从请求到响应的整个过程分发到多个中间件中去处理，这样做的目的是提高代码的灵活性，动态可扩展的。</p><ul><li>同一个请求所经过的中间件都是同一个请求对象和响应对象</li></ul><h2 id="应用程序级别中间件"><a href="#应用程序级别中间件" class="headerlink" title="应用程序级别中间件"></a>应用程序级别中间件</h2><p>万能匹配（不关心任何请求路劲和请求方法）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(function(req,res,next)&#123;</span><br><span class="line">console.log(&apos;Time:&apos;,Date.now())</span><br><span class="line">next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>只要是以 <code>/xxx/</code> 开头的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(&apos;/a&apos;,function(req,res,next)&#123;</span><br><span class="line">console.log(&apos;Time:&apos;,Date.now())</span><br><span class="line">next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="路由级别中间件"><a href="#路由级别中间件" class="headerlink" title="路由级别中间件"></a>路由级别中间件</h2><p>get:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/&apos;,function(req,res,next)&#123;</span><br><span class="line">res.send(&apos;hello world!&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>post:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.post(&apos;/&apos;,function(req,res,next)&#123;</span><br><span class="line">res.send(&apos;got a post request&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>put:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.put(&apos;/user&apos;,function(req,res,next)&#123;</span><br><span class="line">res.send(&apos;got a put request at /user&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>delete:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/user&apos;,function(req,res,next)&#123;</span><br><span class="line">res.send(&apos;got a delete request at /user&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="错误处理中间件"><a href="#错误处理中间件" class="headerlink" title="错误处理中间件"></a>错误处理中间件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(function(err,req,res,next)&#123;</span><br><span class="line">console.error(err.stack)</span><br><span class="line">res.status(500).send(&apos;Something broke!&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="内置中间件"><a href="#内置中间件" class="headerlink" title="内置中间件"></a>内置中间件</h2><ul><li>express.static</li><li>express.json</li><li>express.urlencoded</li></ul><h2 id="第三方中间件"><a href="#第三方中间件" class="headerlink" title="第三方中间件"></a>第三方中间件</h2><p><a href="http://expressjs.com/en/resources/middleware.html" target="_blank" rel="noopener">http://expressjs.com/en/resources/middleware.html</a></p><ul><li>body-parser</li><li>compression</li><li>cookie-parser</li><li>morgan</li><li>response-time</li><li>serve-static</li><li>session</li></ul><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自学node.js第七天的笔记，差点以为要烂尾了~&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>七天搞定node.js---第六天</title>
    <link href="https://www.xiaomujin.club/2019/10/01/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E5%85%AD%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/10/01/学习node.js的第六天/</id>
    <published>2019-10-01T03:00:00.000Z</published>
    <updated>2019-10-02T13:43:34.844Z</updated>
    
    <content type="html"><![CDATA[<p>自学node.js第六天的笔记。<br><a id="more"></a></p><h1 id="path-路径操作模块"><a href="#path-路径操作模块" class="headerlink" title="path 路径操作模块"></a>path 路径操作模块</h1><p>参考文档：<a href="https://nodejs.org/dist/latest-v9.x/docs/api/path.html" target="_blank" rel="noopener">https://nodejs.org/dist/latest-v9.x/docs/api/path.html</a></p><ul><li><p>path.basename</p><ul><li>获取一个路径的文件名（默认包含扩展名）</li></ul></li><li><p>path.dirname</p><ul><li>获取一个路径中的目录部分</li></ul></li><li><p>path.extname</p><ul><li>获取一个路径中的扩展名部分</li></ul></li><li><p>path.parse</p><ul><li><p>把一个路径转为对象</p><ul><li><p>root 根路径</p></li><li><p>dir 目录</p></li><li><p>base 包含后缀的文件名</p></li><li><p>ext 后缀名</p></li><li><p>name 不包含后缀的文件名</p></li></ul></li></ul></li><li><p>path.join</p><ul><li>当你需要进行路径拼接的时候，推荐使用这个方法</li></ul></li><li><p>path.isAbsolute</p><ul><li>判断一个路径是否是绝对路径</li></ul></li></ul><h1 id="Node-中的其他成员"><a href="#Node-中的其他成员" class="headerlink" title="Node 中的其他成员"></a>Node 中的其他成员</h1><p>在每个模块中，除了 <code>require</code>、<code>exports</code> 等模块相关 API 之外，还有两个特殊的成员：</p><ul><li><p><code>__dirname</code> 可以用来获取当前文件模块所属目录的绝对路径 <strong>动态获取</strong></p></li><li><p><code>__filename</code> 可以用来获取当前文件的绝对路径 <strong>动态获取</strong></p></li></ul><p>用 node 做后台实现了一个简易版的博客系统，源码都在我的github</p><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自学node.js第六天的笔记。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>七天搞定node.js---第五天</title>
    <link href="https://www.xiaomujin.club/2019/09/25/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E4%BA%94%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/09/25/学习node.js的第五天/</id>
    <published>2019-09-25T03:25:00.000Z</published>
    <updated>2019-09-25T03:25:42.904Z</updated>
    
    <content type="html"><![CDATA[<p>自学node.js第五天的笔记。<br><a id="more"></a></p><h1 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h1><h2 id="setTimeout-是一个异步api"><a href="#setTimeout-是一个异步api" class="headerlink" title="setTimeout()是一个异步api"></a>setTimeout()是一个异步api</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function f1() &#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        console.log(2)</span><br><span class="line">    &#125;, 2000)</span><br><span class="line">    console.log(3)</span><br><span class="line">&#125;</span><br><span class="line">f1()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 结果：1 3 2</span><br></pre></td></tr></table></figure><h2 id="不成立的情况："><a href="#不成立的情况：" class="headerlink" title="不成立的情况："></a>不成立的情况：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function f1(x, y) &#123;</span><br><span class="line">    var ret</span><br><span class="line">    console.log(1)</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        ret = x + y</span><br><span class="line">        console.log(2)</span><br><span class="line">    &#125;, 2000)</span><br><span class="line">    console.log(3)</span><br><span class="line">    return ret</span><br><span class="line">&#125;</span><br><span class="line">console.log(f1(10 + 20))    =&gt;undefined</span><br><span class="line"></span><br><span class="line">//输出结果：</span><br><span class="line">// 1</span><br><span class="line">// 3</span><br><span class="line">// undefined</span><br><span class="line">// 2</span><br></pre></td></tr></table></figure><h2 id="使用回调函数："><a href="#使用回调函数：" class="headerlink" title="使用回调函数："></a>使用回调函数：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function f1(x, y, callback) &#123;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        var ret = x + y</span><br><span class="line">        callback(ret)</span><br><span class="line">    &#125;, 2000)</span><br><span class="line">&#125;</span><br><span class="line">f1(10, 10, function(ret) &#123;</span><br><span class="line">    console.log(ret)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>2秒后得到结果：20</p><h2 id="封装ajax-理解回调函数"><a href="#封装ajax-理解回调函数" class="headerlink" title="封装ajax,理解回调函数"></a>封装ajax,理解回调函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;ajax&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function get(url, callback) &#123;</span><br><span class="line">        var oReq = new XMLHttpRequest()</span><br><span class="line">        oReq.onload = function() &#123;</span><br><span class="line">            callback(oReq.responseText)</span><br><span class="line">        &#125;</span><br><span class="line">        oReq.open(&quot;get&quot;, url, true)</span><br><span class="line">        oReq.send()</span><br><span class="line">    &#125;</span><br><span class="line">    get(&apos;data.json&apos;, function(data) &#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li>官网下载：<a href="https://www.mongodb.com/download-center/community" target="_blank" rel="noopener">https://www.mongodb.com/download-center/community</a></li><li>配置环境变量</li><li>最后终端输入<code>mongod  --version</code>查看是否安装成功</li></ul><h2 id="启动和关闭数据表"><a href="#启动和关闭数据表" class="headerlink" title="启动和关闭数据表"></a>启动和关闭数据表</h2><p>启动：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// mongodb 默认使用执行 mongod 命令所处盘符根目录下的 /data/db 作为自己数据存储目录</span><br><span class="line">// 所以在第一次执行该命令之前先自己手动新建一个  /data/db</span><br><span class="line"></span><br><span class="line">mongod</span><br></pre></td></tr></table></figure></p><p>如果想要修改默认的数据库存储目录，可以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath-数据库存储目录路径</span><br></pre></td></tr></table></figure></p><p>停止:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在开启服务的控制台，直接 ctrl+c 就能停止。</span><br></pre></td></tr></table></figure></p><h2 id="连接和退出数据库"><a href="#连接和退出数据库" class="headerlink" title="连接和退出数据库"></a>连接和退出数据库</h2><p>连接：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 默认连接本机的 MongoDB 服务</span><br><span class="line"></span><br><span class="line">mongo</span><br></pre></td></tr></table></figure></p><p>退出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure></p><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><ul><li><code>show dbs</code><ul><li>查看显示所有数据库</li></ul></li><li><code>db</code><ul><li>查看当前操作的数据库</li></ul></li><li><code>use 数据库名称</code><ul><li>切换到指定的数据库（如果没有会新建）</li></ul></li><li>插入数据</li></ul><h1 id="mongoose"><a href="#mongoose" class="headerlink" title="mongoose"></a>mongoose</h1><ul><li>官网：<a href="https://mongoosejs.com/" target="_blank" rel="noopener">https://mongoosejs.com/</a></li><li>官方指南：<a href="https://mongoosejs.com/docs/guide.html" target="_blank" rel="noopener">https://mongoosejs.com/docs/guide.html</a></li><li>官方 API 文档：<a href="https://mongoosejs.com/docs/api.html" target="_blank" rel="noopener">https://mongoosejs.com/docs/api.html</a></li></ul><h2 id="MongoDB-数据库的基本概念"><a href="#MongoDB-数据库的基本概念" class="headerlink" title="MongoDB 数据库的基本概念"></a>MongoDB 数据库的基本概念</h2><ul><li>可以有多个数据库</li><li>一个数据库中可以有多个集合(表)</li><li>一个集合中可以有多个文档(表记录)</li><li>文档结构很灵活，没有任何限制</li><li>MongoDB 非常灵活，不需要想 MySQL 一样先创建数据库、表、设计表结构<ul><li>当你需要插入数据的时候，只需要指定往哪个数据库的哪个集合操作就可以了</li><li>一切都由 MongoDB 来帮你自动完成建库建表</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">qq:&#123;</span><br><span class="line">users:[</span><br><span class="line">&#123;name:&apos;木槿0&apos;,age:15&#125;,</span><br><span class="line">&#123;name:&apos;木槿1&apos;,age:17&#125;,</span><br><span class="line">&#123;name:&apos;木槿2&apos;,age:19&#125;</span><br><span class="line">],</span><br><span class="line">products:[</span><br><span class="line"></span><br><span class="line">],</span><br><span class="line">......</span><br><span class="line">&#125;,</span><br><span class="line">taobao:&#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">baidu:&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mongoose</span><br></pre></td></tr></table></figure></p><p>hello world:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;);</span><br><span class="line"></span><br><span class="line">// 连接 MongoDB 数据库</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost/test&apos;, &#123; useMongoClient: true &#125;);</span><br><span class="line"></span><br><span class="line">mongoose.Promise = global.Promise;</span><br><span class="line"></span><br><span class="line">// 创建一个模型</span><br><span class="line">// 就是在设计数据库</span><br><span class="line">// MongoDB 是动态的，非常灵活，只需要在代码中设计你的数据库就可以了</span><br><span class="line">// mongoose 这个包就可以让你的设计编写过程变的非常的简单</span><br><span class="line">var Cat = mongoose.model(&apos;Cat&apos;, &#123; name: String &#125;);</span><br><span class="line"></span><br><span class="line">for (var i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">    // 实例化一个 Cat</span><br><span class="line">    var kitty = new Cat(&#123; name: &apos;喵喵&apos; + i &#125;);</span><br><span class="line"></span><br><span class="line">    // 持久化保存 kitty 实例</span><br><span class="line">    kitty.save(function(err) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            console.log(err);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            console.log(&apos;meow&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="官方指南"><a href="#官方指南" class="headerlink" title="官方指南"></a>官方指南</h1><h2 id="设计-Schema-发布-Model"><a href="#设计-Schema-发布-Model" class="headerlink" title="设计 Schema 发布 Model"></a>设计 Schema 发布 Model</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line"></span><br><span class="line">var Schema = mongoose.Schema</span><br><span class="line">    // 1. 连接数据库</span><br><span class="line">    // 指定连接的数据库不需要存在，当你插入第一条数据之后就会自动被创建出来</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost/itcast&apos;)</span><br><span class="line"></span><br><span class="line">// 2. 设计文档结构（表结构）</span><br><span class="line">// 字段名称就是表结构中的属性名称</span><br><span class="line">// 约束的目的是为了保证数据的完整性，不要有脏数据</span><br><span class="line">var userSchema = new Schema(&#123;</span><br><span class="line">    username: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true // 不能为空</span><br><span class="line">    &#125;,</span><br><span class="line">    password: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true</span><br><span class="line">    &#125;,</span><br><span class="line">    email: &#123;</span><br><span class="line">        type: String</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//3.将文档结构发表为模型</span><br><span class="line">//  mongoose.model 方法就是用来将一个架构发布为 model</span><br><span class="line">//  第一个参数：传入一个大写名词单数字符串用来表示你的数据库名称</span><br><span class="line">//             mongoose 会自动将大写名词的字符串生成小写复数的集合名词</span><br><span class="line">//             例如这里的 User 最终会变为 users 集合名称</span><br><span class="line">//  第二个参数：架构 Schema</span><br><span class="line">//   返回对象：模型构造函数</span><br><span class="line">var User = mongoose.model(&apos;User&apos;, userSchema)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 4.当我们有了模型构造函数之后，就可以使用这个构造函数对 users 集合中的数据为所欲为了（增删改查）</span><br></pre></td></tr></table></figure><h2 id="增加数据"><a href="#增加数据" class="headerlink" title="增加数据"></a>增加数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line"></span><br><span class="line">var Schema = mongoose.Schema</span><br><span class="line">    // 1. 连接数据库</span><br><span class="line">    // 指定连接的数据库不需要存在，当你插入第一条数据之后就会自动被创建出来</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost/itcast&apos;)</span><br><span class="line"></span><br><span class="line">// 2. 设计文档结构（表结构）</span><br><span class="line">// 字段名称就是表结构中的属性名称</span><br><span class="line">// 约束的目的是为了保证数据的完整性，不要有脏数据</span><br><span class="line">var userSchema = new Schema(&#123;</span><br><span class="line">    username: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true // 不能为空</span><br><span class="line">    &#125;,</span><br><span class="line">    password: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: true</span><br><span class="line">    &#125;,</span><br><span class="line">    email: &#123;</span><br><span class="line">        type: String</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//3.将文档结构发表为模型</span><br><span class="line">//  mongoose.model 方法就是用来将一个架构发布为 model</span><br><span class="line">//  第一个参数：传入一个大写名词单数字符串用来表示你的数据库名称</span><br><span class="line">//             mongoose 会自动将大写名词的字符串生成小写复数的集合名词</span><br><span class="line">//             例如这里的 User 最终会变为 users 集合名称</span><br><span class="line">//  第二个参数：架构 Schema</span><br><span class="line">//   返回对象：模型构造函数</span><br><span class="line">var User = mongoose.model(&apos;User&apos;, userSchema)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 4.当我们有了模型构造函数之后，就可以使用这个构造函数对 users 集合中的数据为所欲为了（增删改查）</span><br><span class="line">var admin = new User(&#123;</span><br><span class="line">    username: &apos;admin&apos;,</span><br><span class="line">    password: &apos;123456&apos;,</span><br><span class="line">    email: &apos;xq-ambition@qq.com&apos;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">admin.save(function(err, ret) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;保存失败~&apos;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&apos;保存成功&apos;)</span><br><span class="line">        console.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><p>查询所有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">User.find(function(err, ret) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;查询失败~&apos;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>按条件查询所有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">User.find(&#123;</span><br><span class="line">    username: &apos;莫子谦&apos; //条件</span><br><span class="line">&#125;, function(err, ret) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;查询失败~&apos;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>按条件查询单个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User.findOne(&#123; // 查询符合条件的一个</span><br><span class="line">    username: &apos;莫子谦&apos;, //条件</span><br><span class="line">    password: &apos;xuqian&apos;</span><br><span class="line">&#125;, function(err, ret) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;查询失败~&apos;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><p>根据条件删除所有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User.remove(&#123;</span><br><span class="line">    username: &apos;莫子谦&apos;  //删除条件</span><br><span class="line">&#125;, function(err, ret) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;删除失败~&apos;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&apos;删除成功&apos;)</span><br><span class="line">        console.log(ret)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>根据条件删除一个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Model.findOneAndRemove(conditions,[options],[callback])</span><br></pre></td></tr></table></figure></p><p>根据 ID 删除一个<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Model.findByIdAndRemove(id,[options],[callback])</span><br></pre></td></tr></table></figure></p><h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><p>根据条件更新所有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Model.update(conditions,doc,[options],[callback])</span><br></pre></td></tr></table></figure></p><p>根据指定条件更新一个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Model.findOneAndUpdate(conditions,[updata],[opyions],[callback])</span><br></pre></td></tr></table></figure></p><p>根据 ID 更新一个:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User.findByIdAndUpdate(&apos;5d83539e2167524ff85cae99&apos;, &#123; //需要更改数据的id</span><br><span class="line">    //需要更新的内容</span><br><span class="line">    password: &apos;9090909&apos;</span><br><span class="line">&#125;, function(err, ret) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        console.log(&apos;更新数据失败~&apos;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&apos;更新数据成功&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h1 id="使用-node-操作-MySQL-数据库"><a href="#使用-node-操作-MySQL-数据库" class="headerlink" title="使用 node 操作 MySQL 数据库"></a>使用 node 操作 MySQL 数据库</h1><p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql</span><br></pre></td></tr></table></figure></p><p>整体感知：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var mysql = require(&apos;mysql&apos;);</span><br><span class="line">// 1.创建连接</span><br><span class="line">var connection = mysql.createConnection(&#123;</span><br><span class="line">    host: &apos;localhost&apos;,</span><br><span class="line">    user: &apos;root&apos;,</span><br><span class="line">    password: &apos;&apos;,</span><br><span class="line">    database: &apos;users&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 2.连接数据库</span><br><span class="line">connection.connect();</span><br><span class="line"></span><br><span class="line">//3.执行数据库操作</span><br><span class="line">connection.query(&apos;SELECT * FROM `students`&apos;, function(error, results, fields) &#123;</span><br><span class="line">    if (error) throw error;</span><br><span class="line">    console.log(&apos;The solution is: &apos;, results);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// connection.query(&apos;INSERT INTO students VALUES(null,&quot;admin&quot;,&quot;123456&quot;)&apos;, function(error, results, fields) &#123;</span><br><span class="line">//     if (error) throw error;</span><br><span class="line">//     console.log(&apos;The solution is: &apos;, results);</span><br><span class="line">// &#125;);</span><br><span class="line"></span><br><span class="line">//4. 关闭连接</span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure></p><h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><h2 id="callback-hell"><a href="#callback-hell" class="headerlink" title="callback hell:"></a>callback hell:</h2><p><img src="https://xuqian.xiaomujin.club/blog/20190919/FEI2e4mDs72h.jpg" alt="回调地狱"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">fs.readFile(&apos;./data/a.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        // return console.log(&apos;读取失败&apos;)</span><br><span class="line">        // 抛出异常</span><br><span class="line">        //    1. 阻止程序的执行</span><br><span class="line">        //    2. 把错误消息打印到控制台</span><br><span class="line">        throw err</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(data)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">fs.readFile(&apos;./data/b.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        // return console.log(&apos;读取失败&apos;)</span><br><span class="line">        // 抛出异常</span><br><span class="line">        //    1. 阻止程序的执行</span><br><span class="line">        //    2. 把错误消息打印到控制台</span><br><span class="line">        throw err</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(data)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">fs.readFile(&apos;./data/c.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        // return console.log(&apos;读取失败&apos;)</span><br><span class="line">        // 抛出异常</span><br><span class="line">        //    1. 阻止程序的执行</span><br><span class="line">        //    2. 把错误消息打印到控制台</span><br><span class="line">        throw err</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>不一定谁先谁后，同等文件大小取决于计算机的调度机制，文件越大读取越慢。</p><p>所以通过回调嵌套的方式来保证执行顺序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">fs.readFile(&apos;./data/a.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        // return console.log(&apos;读取失败&apos;)</span><br><span class="line">        // 抛出异常</span><br><span class="line">        //    1. 阻止程序的执行</span><br><span class="line">        //    2. 把错误消息打印到控制台</span><br><span class="line">        throw err</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(data)</span><br><span class="line">    fs.readFile(&apos;./data/b.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            // return console.log(&apos;读取失败&apos;)</span><br><span class="line">            // 抛出异常</span><br><span class="line">            //    1. 阻止程序的执行</span><br><span class="line">            //    2. 把错误消息打印到控制台</span><br><span class="line">            throw err</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(data)</span><br><span class="line">        fs.readFile(&apos;./data/c.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                // return console.log(&apos;读取失败&apos;)</span><br><span class="line">                // 抛出异常</span><br><span class="line">                //    1. 阻止程序的执行</span><br><span class="line">                //    2. 把错误消息打印到控制台</span><br><span class="line">                throw err</span><br><span class="line">            &#125;</span><br><span class="line">            console.log(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="为了解决多次嵌套，最终难以维护的问题，在-EcmaScript6-中新增了一个-API：Promise"><a href="#为了解决多次嵌套，最终难以维护的问题，在-EcmaScript6-中新增了一个-API：Promise" class="headerlink" title="为了解决多次嵌套，最终难以维护的问题，在 EcmaScript6 中新增了一个 API：Promise"></a>为了解决多次嵌套，最终难以维护的问题，在 EcmaScript6 中新增了一个 API：<code>Promise</code></h2><p><img src="https://xuqian.xiaomujin.club/blog/20190924/pVrwWfA9wqVE.png" alt="Promise"><br>参考文档：<a href="http://es6.ruanyifeng.com/#docs/promise" target="_blank" rel="noopener">http://es6.ruanyifeng.com/#docs/promise</a></p><p>Promise 基本语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">    // Promise 是一个构造函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 使用：</span><br><span class="line"></span><br><span class="line">// 1.创建 Promise 容器，给别人一个承诺。</span><br><span class="line"></span><br><span class="line">//  Promise 容器一旦被创建，就开始执行里面的代码。</span><br><span class="line"></span><br><span class="line">var p1 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">    fs.readFile(&apos;./data/a.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            // console.log(err)</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // console.log(data)</span><br><span class="line">            resolve(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// then 方法接收的 function 就是容器中的 resolve 函数</span><br><span class="line"></span><br><span class="line">p1.then(function(data) &#123;</span><br><span class="line">    console.log(data)</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">    console.log(&apos;读取文件失败~&apos;, err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>Promise 解决回调地狱 嵌套问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">    // Promise 是一个构造函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 使用：</span><br><span class="line"></span><br><span class="line">// 1.创建 Promise 容器，给别人一个承诺。</span><br><span class="line"></span><br><span class="line">//  Promise 容器一旦被创建，就开始执行里面的代码。</span><br><span class="line"></span><br><span class="line">var p1 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">    fs.readFile(&apos;./data/a.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            // console.log(err)</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // console.log(data)</span><br><span class="line">            resolve(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">var p2 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">    fs.readFile(&apos;./data/b.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            // console.log(err)</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // console.log(data)</span><br><span class="line">            resolve(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">var p3 = new Promise(function(resolve, reject) &#123;</span><br><span class="line">    fs.readFile(&apos;./data/c.txt&apos;, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            // console.log(err)</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // console.log(data)</span><br><span class="line">            resolve(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// then 方法接收的 function 就是容器中的 resolve 函数</span><br><span class="line"></span><br><span class="line">p1.then(function(data) &#123;</span><br><span class="line">    console.log(data)</span><br><span class="line">    return p2</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">    console.log(&apos;读取文件失败~&apos;, err)</span><br><span class="line">&#125;).then(function(data) &#123;</span><br><span class="line">    console.log(data)</span><br><span class="line">    return p3</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">    console.log(&apos;读取文件失败~&apos;, err)</span><br><span class="line">&#125;).then(function(data) &#123;</span><br><span class="line">    console.log(data)</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">    console.log(&apos;读取文件失败~&apos;, err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>封装 Promise-api (readFile)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">function pReadFile(filePath) &#123;</span><br><span class="line">    return new Promise(function(resolve, reject) &#123;</span><br><span class="line">        fs.readFile(filePath, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                // console.log(err)</span><br><span class="line">                reject(err)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // console.log(data)</span><br><span class="line">                resolve(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pReadFile(&apos;./data/a.txt&apos;)</span><br><span class="line">    .then(function(data) &#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">        return pReadFile(&apos;./data/b.txt&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function(data) &#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">        return pReadFile(&apos;./data/c.txt&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(function(data) &#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p><p>Promise使用场景<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;promise应用&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=&quot;00-callback.js&quot; method=&quot;get&quot; id=&quot;user_form&quot;&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;script type=&quot;text/template&quot; id=&quot;tpl&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;用户名&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; value=&quot;&#123;&#123;user.username&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;年龄&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; value=&quot;&#123;&#123;user.age&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label for=&quot;&quot;&gt;用户名&lt;/label&gt;</span><br><span class="line">            &lt;select name=&quot;&quot; id=&quot;&quot;&gt;</span><br><span class="line">                &#123;&#123;each jobs&#125;&#125;</span><br><span class="line">                    &#123;&#123;if user.job === $value.id&#125;&#125;</span><br><span class="line">                    &lt;option value=&quot;&#123;&#123;$value.id&#125;&#125;&quot; selected&gt;&#123;&#123;$value.name&#125;&#125;&lt;/option&gt;</span><br><span class="line">                    &#123;&#123;else&#125;&#125;</span><br><span class="line">                    &lt;option value=&quot;&#123;&#123;$value.id&#125;&#125;&quot;&gt;&#123;&#123;$value.name&#125;&#125;&lt;/option&gt;</span><br><span class="line">                    &#123;&#123;/if&#125;&#125;</span><br><span class="line">                &#123;&#123;/each&#125;&#125;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;./node_modules/art-template/lib/template-web.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;./node_modules/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//  嵌套写法</span><br><span class="line">    // get(&apos;http://localhost:3000/users/4&apos;, function(userData) &#123;</span><br><span class="line">    //     get(&apos;http://localhost:3000/jobs&apos;, function(jobsData) &#123;</span><br><span class="line">    //         // console.log(userData, jobsData)</span><br><span class="line">    //         var htmlStr = template(&apos;tpl&apos;, &#123;</span><br><span class="line">    //                 user: JSON.parse(userData),</span><br><span class="line">    //                 jobs: JSON.parse(jobsData)</span><br><span class="line">    //             &#125;)</span><br><span class="line">    //             // console.log(htmlStr)</span><br><span class="line">    //         document.querySelector(&apos;#user_form&apos;).innerHTML = htmlStr</span><br><span class="line">    //     &#125;)</span><br><span class="line"></span><br><span class="line">    // &#125;)</span><br><span class="line"></span><br><span class="line">    var data = &#123;&#125;</span><br><span class="line">    $.get(&apos;http://localhost:3000/users/4&apos;)</span><br><span class="line">        .then(function(userData) &#123;</span><br><span class="line">            data.user = userData</span><br><span class="line">            return $.get(&apos;http://localhost:3000/jobs&apos;)</span><br><span class="line">        &#125;)</span><br><span class="line">        .then(function(jobsData) &#123;</span><br><span class="line">            data.jobs = jobsData</span><br><span class="line">                // console.log(data)</span><br><span class="line">            var htmlStr = template(&apos;tpl&apos;, data)</span><br><span class="line">            document.querySelector(&apos;#user_form&apos;).innerHTML = htmlStr</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    function get(url, callback) &#123;</span><br><span class="line">        var oReq = new XMLHttpRequest()</span><br><span class="line">        oReq.onload = function() &#123;</span><br><span class="line">            callback(oReq.responseText)</span><br><span class="line">        &#125;</span><br><span class="line">        oReq.open(&quot;get&quot;, url, true)</span><br><span class="line">        oReq.send()</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自学node.js第五天的笔记。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>七天搞定node.js---第四天</title>
    <link href="https://www.xiaomujin.club/2019/09/15/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E5%9B%9B%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/09/15/学习node.js的第四天/</id>
    <published>2019-09-15T11:00:00.000Z</published>
    <updated>2019-09-15T14:10:11.556Z</updated>
    
    <content type="html"><![CDATA[<p>自学node.js第四天的笔记。<br><a id="more"></a></p><h1 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h1><ul><li>Express</li><li>基于文件做一套 CRUD</li></ul><h1 id="模块标识中的-和文件操作路径中的"><a href="#模块标识中的-和文件操作路径中的" class="headerlink" title="模块标识中的 / 和文件操作路径中的 /"></a>模块标识中的 <code>/</code> 和文件操作路径中的 <code>/</code></h1><h2 id="文件操作路径："><a href="#文件操作路径：" class="headerlink" title="文件操作路径："></a>文件操作路径：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 在文件操作的相对路径中</span><br><span class="line">//      ./data/a.txt 相对于当前目录</span><br><span class="line">//      data/a.txt   相对于当前目录</span><br><span class="line">//      /data/a.txt  绝对路径,当前文件模块所处磁盘根目录</span><br><span class="line">//      c:/xx/xx...  绝对路径</span><br><span class="line">// fs.readFile(&apos;/data/a.txt&apos;, function(err, data) &#123;</span><br><span class="line">//     if (err) &#123;</span><br><span class="line">//         // console.log(err)</span><br><span class="line">//         // Error: ENOENT: no such file or directory, open &apos;C:\data\a.txt&apos;</span><br><span class="line">//         return console.log(&apos;读取失败&apos;)</span><br><span class="line">//     &#125;</span><br><span class="line">//     console.log(data.toString())</span><br><span class="line">// &#125;)</span><br></pre></td></tr></table></figure><h2 id="模块操作路径："><a href="#模块操作路径：" class="headerlink" title="模块操作路径："></a>模块操作路径：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//这里如果忽略了 . 则也是去磁盘根目录找 </span><br><span class="line">require(&apos;/data/foo.js&apos;)</span><br><span class="line"></span><br><span class="line">// 相对路径</span><br><span class="line">require(&apos;./data/foo.js&apos;)</span><br><span class="line"></span><br><span class="line">// 模块加载的路径中的相对路径不能省略 ./</span><br></pre></td></tr></table></figure><h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>原生的 http 在某些方面表现不足以应对我们的开发需求,所以我们就需要使用框架来加快我们的开发效率，框架的目的就是提高效率，让我们的代码更高度统一。</p><p>在 Node 中，有很多 Web 开发框架，这里以 express 为主。</p><ul><li>官网：<a href="http://expressjs.com/" target="_blank" rel="noopener">http://expressjs.com/</a></li></ul><h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><h3 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save express</span><br></pre></td></tr></table></figure><h3 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line"></span><br><span class="line">//1.创建 app</span><br><span class="line">var app = express()</span><br><span class="line"></span><br><span class="line">app.get(&apos;/&apos;, function(req, res) &#123;</span><br><span class="line">    // res.end(&apos;hello world&apos;)</span><br><span class="line">    res.send(&apos;you see see one day day&apos;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.get(&apos;/login&apos;, function(req, res) &#123;</span><br><span class="line">    // res.end(&apos;hello world&apos;)</span><br><span class="line">    res.send(&apos;login page&apos;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;express app is running ~&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="基本路由"><a href="#基本路由" class="headerlink" title="基本路由"></a>基本路由</h3><p>GET：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">res.send(&apos;Hello World~&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>POST:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.post(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">res.send(&apos;Got a POST request~&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="静态服务"><a href="#静态服务" class="headerlink" title="静态服务"></a>静态服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// public里面的具体资源</span><br><span class="line">app.use(express.static(&apos;public&apos;))</span><br><span class="line">// files里面的具体资源</span><br><span class="line">app.use(express.static(&apos;files&apos;))</span><br><span class="line"></span><br><span class="line">// /public/public里面的具体资源</span><br><span class="line">app.use(&apos;/public/&apos;,express.static(&apos;public&apos;))</span><br><span class="line">// /static/public里面的具体资源</span><br><span class="line">app.use(&apos;/static/&apos;,express.static(&apos;public&apos;))</span><br><span class="line"></span><br><span class="line">app.use(&apos;/static/&apos;,express.static(path.join(__dirname,&apos;public&apos;)))</span><br></pre></td></tr></table></figure><h2 id="在-Express-中配置使用-art-templat模板引擎"><a href="#在-Express-中配置使用-art-templat模板引擎" class="headerlink" title="在 Express 中配置使用 art-templat模板引擎"></a>在 Express 中配置使用 <code>art-templat</code>模板引擎</h2><ul><li><a href="https://github.com/aui/art-template" target="_blank" rel="noopener">art-template - github仓库</a></li><li><a href="https://aui.github.io/art-template/zh-cn/index.html" target="_blank" rel="noopener">art-template - 官方文档</a></li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save art-template</span><br><span class="line">npm install --save express-art-template</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.engine(&apos;art&apos;, require(&apos;express-art-template&apos;));</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">// express 默认会去项目中的 views 目录中找 index.html</span><br><span class="line">res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">title:&apos;hello world~&apos;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="修改默认的-views-视图渲染存储目录："><a href="#修改默认的-views-视图渲染存储目录：" class="headerlink" title="修改默认的 views 视图渲染存储目录："></a>修改默认的 <code>views</code> 视图渲染存储目录：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.set(&apos;views&apos;,&apos;render函数的默认路径&apos;)</span><br></pre></td></tr></table></figure><h2 id="在-Express-中获取表单-GET-请求参数"><a href="#在-Express-中获取表单-GET-请求参数" class="headerlink" title="在 Express 中获取表单 GET 请求参数"></a>在 Express 中获取表单 GET 请求参数</h2><p>express 内置了一个 API ,可以直接通过 req.query来获取<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.query</span><br></pre></td></tr></table></figure></p><h2 id="在-Express-获取表单-POST-请求体数据"><a href="#在-Express-获取表单-POST-请求体数据" class="headerlink" title="在 Express 获取表单 POST 请求体数据"></a>在 Express 获取表单 POST 请求体数据</h2><p>在 Express 中没有内置获取表单 POST 请求体的 API ,需要使用一个第三方包：<code>body-parser</code></p><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser</span><br></pre></td></tr></table></figure><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line">// 0.引包</span><br><span class="line">var bodyParser = require(&apos;body-parser&apos;)</span><br><span class="line"></span><br><span class="line">var app = express()</span><br><span class="line"></span><br><span class="line">// 配置 body-parser</span><br><span class="line">// 只要加入这个配置，则在 req 请求对象上会多出来一个属性：body</span><br><span class="line">// 也就是说可以直接通过 req.body 来获取表单 POST 请求体数据了</span><br><span class="line">// parse application/x-www-form-urlencoded</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; extended: false &#125;))</span><br><span class="line"></span><br><span class="line">// parse application/json</span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure><h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.use(function (req, res) &#123;</span><br><span class="line">  res.setHeader(&apos;Content-Type&apos;, &apos;text/plain&apos;)</span><br><span class="line">  res.write(&apos;you posted:\n&apos;)</span><br><span class="line">// 通过 req.body 来获取表单 POST 请求体数据了</span><br><span class="line">  res.end(JSON.stringify(req.body, null, 2))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="修改完代码自动重启服务器"><a href="#修改完代码自动重启服务器" class="headerlink" title="修改完代码自动重启服务器"></a>修改完代码自动重启服务器</h1><p>使用第三方命令行工具：<code>nodemon</code>来解决频繁修改代码手动重启服务器问题<br><code>nodemon</code> 是一个基于 Node.js开发的一个第三方命令行工具，在使用的时候需要独立安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 在任意目录执行都行</span><br><span class="line">// 也就是说，所有需要 --global 来安装的包都可以在任意目录执行</span><br><span class="line">npm install --global nodemon</span><br></pre></td></tr></table></figure></p><p>安装完毕之后，使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//以前</span><br><span class="line">node app.js</span><br><span class="line"></span><br><span class="line">//使用nodemon</span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure></p><p>只要通过<code>nodemon app.js</code>启动的服务，则它会监事你的文件变化，当文件发生变化的时候，自动帮你重启服务器。</p><h1 id="基于文件完成CRUD-增删改查-在bootstarp官网偷的一套模板"><a href="#基于文件完成CRUD-增删改查-在bootstarp官网偷的一套模板" class="headerlink" title="基于文件完成CRUD(增删改查),在bootstarp官网偷的一套模板~"></a>基于文件完成CRUD(增删改查),在bootstarp官网偷的一套模板~</h1><h2 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span><br><span class="line">    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;../../favicon.ico&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;Dashboard Template for Bootstrap&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Bootstrap core CSS --&gt;</span><br><span class="line">    &lt;link href=&quot;/node_modules/bootstrap/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Custom styles for this template --&gt;</span><br><span class="line">    &lt;link href=&quot;/public/css/dashboard.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;nav class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;navbar-header&quot;&gt;</span><br><span class="line">                &lt;button type=&quot;button&quot; class=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbar&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;navbar&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">                &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Project name&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;navbar&quot; class=&quot;navbar-collapse collapse&quot;&gt;</span><br><span class="line">                &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Dashboard&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Settings&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;form class=&quot;navbar-form navbar-right&quot;&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search...&quot;&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-3 col-md-2 sidebar&quot;&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Overview &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Reports&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Analytics&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Export&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item again&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;One more nav&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Another nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;More navigation&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item again&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;One more nav&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Another nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main&quot;&gt;</span><br><span class="line">                &lt;h1 class=&quot;page-header&quot;&gt;Dashboard&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;row placeholders&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;col-xs-6 col-sm-3 placeholder&quot;&gt;</span><br><span class="line">                        &lt;img src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==&quot; width=&quot;200&quot; height=&quot;200&quot; class=&quot;img-responsive&quot; alt=&quot;Generic placeholder thumbnail&quot;&gt;</span><br><span class="line">                        &lt;h4&gt;Label&lt;/h4&gt;</span><br><span class="line">                        &lt;span class=&quot;text-muted&quot;&gt;Something else&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col-xs-6 col-sm-3 placeholder&quot;&gt;</span><br><span class="line">                        &lt;img src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==&quot; width=&quot;200&quot; height=&quot;200&quot; class=&quot;img-responsive&quot; alt=&quot;Generic placeholder thumbnail&quot;&gt;</span><br><span class="line">                        &lt;h4&gt;Label&lt;/h4&gt;</span><br><span class="line">                        &lt;span class=&quot;text-muted&quot;&gt;Something else&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col-xs-6 col-sm-3 placeholder&quot;&gt;</span><br><span class="line">                        &lt;img src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==&quot; width=&quot;200&quot; height=&quot;200&quot; class=&quot;img-responsive&quot; alt=&quot;Generic placeholder thumbnail&quot;&gt;</span><br><span class="line">                        &lt;h4&gt;Label&lt;/h4&gt;</span><br><span class="line">                        &lt;span class=&quot;text-muted&quot;&gt;Something else&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;col-xs-6 col-sm-3 placeholder&quot;&gt;</span><br><span class="line">                        &lt;img src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==&quot; width=&quot;200&quot; height=&quot;200&quot; class=&quot;img-responsive&quot; alt=&quot;Generic placeholder thumbnail&quot;&gt;</span><br><span class="line">                        &lt;h4&gt;Label&lt;/h4&gt;</span><br><span class="line">                        &lt;span class=&quot;text-muted&quot;&gt;Something else&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;h2 class=&quot;sub-header&quot;&gt;Section title&lt;/h2&gt;</span><br><span class="line">                &lt;a href=&quot;/students/news&quot; class=&quot;btn btn-success&quot;&gt;添加&lt;/a&gt;</span><br><span class="line">                &lt;div class=&quot;table-responsive&quot;&gt;</span><br><span class="line">                    &lt;table class=&quot;table table-striped&quot;&gt;</span><br><span class="line">                        &lt;thead&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">                                &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">                                &lt;th&gt;性别&lt;/th&gt;</span><br><span class="line">                                &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">                                &lt;th&gt;爱好&lt;/th&gt;</span><br><span class="line">                                &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                        &lt;/thead&gt;</span><br><span class="line">                        &lt;tbody&gt;</span><br><span class="line">                            &#123;&#123;each students&#125;&#125;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&#123;&#123;$value.id&#125;&#125;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&#123;&#123;$value.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&#123;&#123;$value.gender&#125;&#125;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&#123;&#123;$value.age&#125;&#125;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&#123;&#123;$value.hobbies&#125;&#125;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;</span><br><span class="line">                                    &lt;a href=&quot;/students/edit?id=&#123;&#123;$value.id&#125;&#125;&quot;&gt;编辑&lt;/a&gt;</span><br><span class="line">                                    &lt;a href=&quot;/students/delete?id=&#123;&#123;$value.id&#125;&#125;&quot;&gt;删除&lt;/a&gt;</span><br><span class="line">                                &lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                            &#123;&#123;/each&#125;&#125;</span><br><span class="line">                        &lt;/tbody&gt;</span><br><span class="line">                    &lt;/table&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="news-html页面"><a href="#news-html页面" class="headerlink" title="news.html页面"></a>news.html页面</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span><br><span class="line">    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;../../favicon.ico&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;Dashboard Template for Bootstrap&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Bootstrap core CSS --&gt;</span><br><span class="line">    &lt;link href=&quot;/node_modules/bootstrap/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Custom styles for this template --&gt;</span><br><span class="line">    &lt;link href=&quot;/public/css/dashboard.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;nav class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;navbar-header&quot;&gt;</span><br><span class="line">                &lt;button type=&quot;button&quot; class=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbar&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;navbar&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">                &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Project name&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;navbar&quot; class=&quot;navbar-collapse collapse&quot;&gt;</span><br><span class="line">                &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Dashboard&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Settings&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;form class=&quot;navbar-form navbar-right&quot;&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search...&quot;&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-3 col-md-2 sidebar&quot;&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;#&quot;&gt;Overview &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Reports&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Analytics&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Export&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item again&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;One more nav&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Another nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;More navigation&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item again&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;One more nav&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Another nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main&quot;&gt;</span><br><span class="line">                &lt;h2 class=&quot;sub-header&quot;&gt;添加学生&lt;/h2&gt;</span><br><span class="line">                &lt;form action=&quot;/students/news&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;姓名：&lt;/label&gt;</span><br><span class="line">                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;&quot; placeholder=&quot;name&quot; name=&quot;name&quot;&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;性别：&lt;/label&gt;</span><br><span class="line">                        &lt;label class=&quot;radio-inline&quot;&gt;</span><br><span class="line">                            &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;&quot; value=&quot;0&quot;&gt; 男</span><br><span class="line">                          &lt;/label&gt;</span><br><span class="line">                        &lt;label class=&quot;radio-inline&quot;&gt;</span><br><span class="line">                            &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;&quot; value=&quot;1&quot;&gt; 女</span><br><span class="line">                          &lt;/label&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;年龄：&lt;/label&gt;</span><br><span class="line">                        &lt;input type=&quot;number&quot; id=&quot;&quot; name=&quot;age&quot; class=&quot;form-control&quot; placeholder=&quot; age&quot;&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group &quot;&gt;</span><br><span class="line">                        &lt;label for=&quot; &quot;&gt;爱好：&lt;/label&gt;</span><br><span class="line">                        &lt;input type=&quot;text &quot; id=&quot; &quot; name=&quot;hobbies&quot; class=&quot;form-control &quot; placeholder=&quot;hobbies &quot;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;button type=&quot;submit &quot; class=&quot;btn btn-default &quot;&gt;添加&lt;/button&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="edit-html页面"><a href="#edit-html页面" class="headerlink" title="edit.html页面"></a>edit.html页面</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span><br><span class="line">    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;../../favicon.ico&quot;&gt;</span><br><span class="line">    &lt;title&gt;Dashboard Template for Bootstrap&lt;/title&gt;</span><br><span class="line">    &lt;!-- Bootstrap core CSS --&gt;</span><br><span class="line">    &lt;link href=&quot;/node_modules/bootstrap/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">    &lt;!-- Custom styles for this template --&gt;</span><br><span class="line">    &lt;link href=&quot;/public/css/dashboard.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;nav class=&quot;navbar navbar-inverse navbar-fixed-top&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;navbar-header&quot;&gt;</span><br><span class="line">                &lt;button type=&quot;button&quot; class=&quot;navbar-toggle collapsed&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbar&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;navbar&quot;&gt;</span><br><span class="line">          &lt;span class=&quot;sr-only&quot;&gt;Toggle navigation&lt;/span&gt;</span><br><span class="line">          &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">          &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">          &lt;span class=&quot;icon-bar&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">                &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;Project name&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;navbar&quot; class=&quot;navbar-collapse collapse&quot;&gt;</span><br><span class="line">                &lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Dashboard&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Settings&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Help&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;form class=&quot;navbar-form navbar-right&quot;&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Search...&quot;&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;container-fluid&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-3 col-md-2 sidebar&quot;&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;/students&quot;&gt;学生管理 &lt;span class=&quot;sr-only&quot;&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Reports&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Analytics&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Export&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item again&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;One more nav&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Another nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;More navigation&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">                &lt;ul class=&quot;nav nav-sidebar&quot;&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Nav item again&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;One more nav&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                    &lt;li&gt;&lt;a href=&quot;&quot;&gt;Another nav item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main&quot;&gt;</span><br><span class="line">                &lt;h2 class=&quot;sub-header&quot;&gt;编辑学生&lt;/h2&gt;</span><br><span class="line">                &lt;form action=&quot;/students/edit&quot; method=&quot;post&quot;&gt;</span><br><span class="line">                    &lt;!-- </span><br><span class="line">            用来放一些不希望被用户看见，但是需要被提交到服务端的数据</span><br><span class="line">           --&gt;</span><br><span class="line">                    &lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;&#123;&#123; student.id &#125;&#125;&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;姓名&lt;/label&gt;</span><br><span class="line">                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;&quot; name=&quot;name&quot; required minlength=&quot;2&quot; maxlength=&quot;10&quot; value=&quot;&#123;&#123; student.name &#125;&#125;&quot;&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;性别&lt;/label&gt;</span><br><span class="line">                        &lt;div&gt;</span><br><span class="line">                            &lt;label class=&quot;radio-inline&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;&quot; value=&quot;0&quot; checked&gt; 男</span><br><span class="line">              &lt;/label&gt;</span><br><span class="line">                            &lt;label class=&quot;radio-inline&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;radio&quot; name=&quot;gender&quot; id=&quot;&quot; value=&quot;1&quot;&gt; 女</span><br><span class="line">              &lt;/label&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;年龄&lt;/label&gt;</span><br><span class="line">                        &lt;input class=&quot;form-control&quot; type=&quot;number&quot; id=&quot;&quot; name=&quot;age&quot; value=&quot;&#123;&#123; student.age &#125;&#125;&quot; required min=&quot;1&quot; max=&quot;150&quot;&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;&quot;&gt;爱好&lt;/label&gt;</span><br><span class="line">                        &lt;input class=&quot;form-control&quot; type=&quot;text&quot; id=&quot;&quot; name=&quot;hobbies&quot; value=&quot;&#123;&#123; student.hobbies &#125;&#125;&quot;&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="提取出来的路由模块"><a href="#提取出来的路由模块" class="headerlink" title="提取出来的路由模块"></a>提取出来的路由模块</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * router.js 路由模块</span><br><span class="line"> * 职责：</span><br><span class="line"> *   处理路由</span><br><span class="line"> *   根据不同的请求方法+请求路径设置具体的请求处理函数</span><br><span class="line"> * 模块职责要单一，不要乱写</span><br><span class="line"> * 我们划分模块的目的就是为了增强项目代码的可维护性</span><br><span class="line"> * 提升开发效率</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">var Student = require(&apos;./students&apos;)</span><br><span class="line"></span><br><span class="line">// Express 提供了一种更好的方式</span><br><span class="line">// 专门用来包装路由的</span><br><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line"></span><br><span class="line">// 1. 创建一个路由容器</span><br><span class="line">var router = express.Router()</span><br><span class="line"></span><br><span class="line">// 2. 把路由都挂载到 router 路由容器中</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * 渲染学生列表页面</span><br><span class="line"> */</span><br><span class="line">router.get(&apos;/students&apos;, function(req, res) &#123;</span><br><span class="line">    Student.find(function(err, students) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return res.status(500).send(&apos;Server error.&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        res.render(&apos;index.html&apos;, &#123;</span><br><span class="line">            students: students</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * 渲染添加学生页面</span><br><span class="line"> */</span><br><span class="line">router.get(&apos;/students/new&apos;, function(req, res) &#123;</span><br><span class="line">    res.render(&apos;new.html&apos;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * 处理添加学生</span><br><span class="line"> */</span><br><span class="line">router.post(&apos;/students/new&apos;, function(req, res) &#123;</span><br><span class="line">    // 1. 获取表单数据</span><br><span class="line">    // 2. 处理</span><br><span class="line">    //    将数据保存到 db.json 文件中用以持久化</span><br><span class="line">    // 3. 发送响应</span><br><span class="line">    Student.save(req.body, function(err) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return res.status(500).send(&apos;Server error.&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        res.redirect(&apos;/students&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * 渲染编辑学生页面</span><br><span class="line"> */</span><br><span class="line">router.get(&apos;/students/edit&apos;, function(req, res) &#123;</span><br><span class="line">    // 1. 在客户端的列表页中处理链接问题（需要有 id 参数）</span><br><span class="line">    // 2. 获取要编辑的学生 id</span><br><span class="line">    // </span><br><span class="line">    // 3. 渲染编辑页面</span><br><span class="line">    //    根据 id 把学生信息查出来</span><br><span class="line">    //    使用模板引擎渲染页面</span><br><span class="line"></span><br><span class="line">    Student.findById(parseInt(req.query.id), function(err, student) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return res.status(500).send(&apos;Server error.&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        res.render(&apos;edit.html&apos;, &#123;</span><br><span class="line">            student: student</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * 处理编辑学生</span><br><span class="line"> */</span><br><span class="line">router.post(&apos;/students/edit&apos;, function(req, res) &#123;</span><br><span class="line">    // 1. 获取表单数据</span><br><span class="line">    //    req.body</span><br><span class="line">    // 2. 更新</span><br><span class="line">    //    Student.updateById()</span><br><span class="line">    // 3. 发送响应</span><br><span class="line">    Student.updateById(req.body, function(err) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return res.status(500).send(&apos;Server error.&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        res.redirect(&apos;/students&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * 处理删除学生</span><br><span class="line"> */</span><br><span class="line">router.get(&apos;/students/delete&apos;, function(req, res) &#123;</span><br><span class="line">    // 1. 获取要删除的 id</span><br><span class="line">    // 2. 根据 id 执行删除操作</span><br><span class="line">    // 3. 根据操作结果发送响应数据</span><br><span class="line"></span><br><span class="line">    Student.deleteById(req.query.id, function(err) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return res.status(500).send(&apos;Server error.&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        res.redirect(&apos;/students&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 3. 把 router 导出</span><br><span class="line">module.exports = router</span><br></pre></td></tr></table></figure><h2 id="封装的数据操作文件模块"><a href="#封装的数据操作文件模块" class="headerlink" title="封装的数据操作文件模块"></a>封装的数据操作文件模块</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * student.js</span><br><span class="line"> * 数据操作文件模块</span><br><span class="line"> * 职责：操作文件中的数据，只处理数据，不关心业务</span><br><span class="line"> *</span><br><span class="line"> * 这里才是我们学习 Node 的精华部分：奥义之所在</span><br><span class="line"> * 封装异步 API</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">var dbPath = &apos;./db.json&apos;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 获取学生列表</span><br><span class="line"> * @param  &#123;Function&#125; callback 回调函数</span><br><span class="line"> */</span><br><span class="line">exports.find = function(callback) &#123;</span><br><span class="line">    fs.readFile(dbPath, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return callback(err)</span><br><span class="line">        &#125;</span><br><span class="line">        callback(null, JSON.parse(data).students)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 根据 id 获取学生信息对象</span><br><span class="line"> * @param  &#123;Number&#125;   id       学生 id</span><br><span class="line"> * @param  &#123;Function&#125; callback 回调函数</span><br><span class="line"> */</span><br><span class="line">exports.findById = function(id, callback) &#123;</span><br><span class="line">    fs.readFile(dbPath, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return callback(err)</span><br><span class="line">        &#125;</span><br><span class="line">        var students = JSON.parse(data).students</span><br><span class="line">        var ret = students.find(function(item) &#123;</span><br><span class="line">            return item.id === parseInt(id)</span><br><span class="line">        &#125;)</span><br><span class="line">        callback(null, ret)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 添加保存学生</span><br><span class="line"> * @param  &#123;Object&#125;   student  学生对象</span><br><span class="line"> * @param  &#123;Function&#125; callback 回调函数</span><br><span class="line"> */</span><br><span class="line">exports.save = function(student, callback) &#123;</span><br><span class="line">    fs.readFile(dbPath, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return callback(err)</span><br><span class="line">        &#125;</span><br><span class="line">        var students = JSON.parse(data).students</span><br><span class="line"></span><br><span class="line">        // 添加 id ，唯一不重复</span><br><span class="line">        student.id = students[students.length - 1].id + 1</span><br><span class="line"></span><br><span class="line">        // 把用户传递的对象保存到数组中</span><br><span class="line">        students.push(student)</span><br><span class="line"></span><br><span class="line">        // 把对象数据转换为字符串</span><br><span class="line">        var fileData = JSON.stringify(&#123;</span><br><span class="line">            students: students</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        // 把字符串保存到文件中</span><br><span class="line">        fs.writeFile(dbPath, fileData, function(err) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                // 错误就是把错误对象传递给它</span><br><span class="line">                return callback(err)</span><br><span class="line">            &#125;</span><br><span class="line">            // 成功就没错，所以错误对象是 null</span><br><span class="line">            callback(null)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 更新学生</span><br><span class="line"> */</span><br><span class="line">exports.updateById = function(student, callback) &#123;</span><br><span class="line">    fs.readFile(dbPath, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return callback(err)</span><br><span class="line">        &#125;</span><br><span class="line">        var students = JSON.parse(data).students</span><br><span class="line"></span><br><span class="line">        // 注意：这里记得把 id 统一转换为数字类型</span><br><span class="line">        student.id = parseInt(student.id)</span><br><span class="line"></span><br><span class="line">        // 你要修改谁，就需要把谁找出来</span><br><span class="line">        // EcmaScript 6 中的一个数组方法：find</span><br><span class="line">        // 需要接收一个函数作为参数</span><br><span class="line">        // 当某个遍历项符合 item.id === student.id 条件的时候，find 会终止遍历，同时返回遍历项</span><br><span class="line">        var stu = students.find(function(item) &#123;</span><br><span class="line">            return item.id === student.id</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        // 这种方式你就写死了，有 100 个难道就写 100 次吗？</span><br><span class="line">        // stu.name = student.name</span><br><span class="line">        // stu.age = student.age</span><br><span class="line"></span><br><span class="line">        // 遍历拷贝对象</span><br><span class="line">        for (var key in student) &#123;</span><br><span class="line">            stu[key] = student[key]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 把对象数据转换为字符串</span><br><span class="line">        var fileData = JSON.stringify(&#123;</span><br><span class="line">            students: students</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        // 把字符串保存到文件中</span><br><span class="line">        fs.writeFile(dbPath, fileData, function(err) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                // 错误就是把错误对象传递给它</span><br><span class="line">                return callback(err)</span><br><span class="line">            &#125;</span><br><span class="line">            // 成功就没错，所以错误对象是 null</span><br><span class="line">            callback(null)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 删除学生</span><br><span class="line"> */</span><br><span class="line">exports.deleteById = function(id, callback) &#123;</span><br><span class="line">    fs.readFile(dbPath, &apos;utf8&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return callback(err)</span><br><span class="line">        &#125;</span><br><span class="line">        var students = JSON.parse(data).students</span><br><span class="line"></span><br><span class="line">        // findIndex 方法专门用来根据条件查找元素的下标</span><br><span class="line">        var deleteId = students.findIndex(function(item) &#123;</span><br><span class="line">            return item.id === parseInt(id)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        // 根据下标从数组中删除对应的学生对象</span><br><span class="line">        students.splice(deleteId, 1)</span><br><span class="line"></span><br><span class="line">        // 把对象数据转换为字符串</span><br><span class="line">        var fileData = JSON.stringify(&#123;</span><br><span class="line">            students: students</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        // 把字符串保存到文件中</span><br><span class="line">        fs.writeFile(dbPath, fileData, function(err) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                // 错误就是把错误对象传递给它</span><br><span class="line">                return callback(err)</span><br><span class="line">            &#125;</span><br><span class="line">            // 成功就没错，所以错误对象是 null</span><br><span class="line">            callback(null)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="入口文件-app-js"><a href="#入口文件-app-js" class="headerlink" title="入口文件 app.js"></a>入口文件 app.js</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line">var router = require(&apos;./router&apos;)</span><br><span class="line">var bodyParser = require(&apos;body-parser&apos;)</span><br><span class="line"></span><br><span class="line">var app = express()</span><br><span class="line">app.engine(&apos;html&apos;, require(&apos;express-art-template&apos;))</span><br><span class="line">app.use(&apos;/node_modules/&apos;, express.static(&apos;./node_modules&apos;))</span><br><span class="line">app.use(&apos;/public/&apos;, express.static(&apos;./public&apos;))</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; extended: false &#125;))</span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"></span><br><span class="line">app.use(router)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;running&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="数据库文件-db-json"><a href="#数据库文件-db-json" class="headerlink" title="数据库文件 db.json"></a>数据库文件 db.json</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;students&quot;: [&#123;</span><br><span class="line">        &quot;id&quot;: 3,</span><br><span class="line">        &quot;name&quot;: &quot;木槿&quot;,</span><br><span class="line">        &quot;gender&quot;: 0,</span><br><span class="line">        &quot;age&quot;: &quot;19&quot;,</span><br><span class="line">        &quot;hobbies&quot;: &quot;读书，学习，敲代码&quot;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        &quot;id&quot;: 4,</span><br><span class="line">        &quot;name&quot;: &quot;木槿&quot;,</span><br><span class="line">        &quot;gender&quot;: 0,</span><br><span class="line">        &quot;age&quot;: 18,</span><br><span class="line">        &quot;hobbies&quot;: &quot;读书，学习，敲代码&quot;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        &quot;id&quot;: 5,</span><br><span class="line">        &quot;name&quot;: &quot;木槿&quot;,</span><br><span class="line">        &quot;gender&quot;: 0,</span><br><span class="line">        &quot;age&quot;: 18,</span><br><span class="line">        &quot;hobbies&quot;: &quot;读书，学习，敲代码&quot;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        &quot;name&quot;: &quot;莫子谦&quot;,</span><br><span class="line">        &quot;gender&quot;: &quot;1&quot;,</span><br><span class="line">        &quot;age&quot;: &quot;19&quot;,</span><br><span class="line">        &quot;hobbies&quot;: &quot;唱、跳、rap&quot;,</span><br><span class="line">        &quot;id&quot;: 15</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自学node.js第四天的笔记。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Markdown 特殊字符转义</title>
    <link href="https://www.xiaomujin.club/2019/09/05/%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E8%BD%AC%E7%A0%81%E7%BC%96%E8%AF%91/"/>
    <id>https://www.xiaomujin.club/2019/09/05/特殊字符转码编译/</id>
    <published>2019-09-05T12:30:00.000Z</published>
    <updated>2019-09-05T12:41:23.069Z</updated>
    
    <content type="html"><![CDATA[<p>前几天在写博客，编译的时候，报了一条错误<code>Template render error: (unknown path) [Line 87, Column 13]</code>,寻找了很久的答案，原来是一些特殊字符的转义问题，记录一下，防止以后再踩同样的坑。<br><a id="more"></a><br><code>-</code> —— <code>&amp;#45;</code> 或 <code>&amp;minus;</code> ：减号<br><code>!</code> —— <code>&amp;#33;</code> ：惊叹号Exclamation mark<br><code>”</code> —— <code>&amp;#34;</code> 或 <code>&amp;quot;</code> ：双引号Quotation mark<br><code>#</code> —— <code>&amp;#35;</code> ：井号Number sign<br><code>$</code> —— <code>&amp;#36;</code> ：美元标志Dollar sign<br><code>%</code> —— <code>&amp;#37;</code> ：百分号Percent sign<br><code>&amp;</code> —— <code>&amp;#38;</code> 或 <code>&amp;amp;</code> ：Ampersand<br><code>‘</code> —— <code>&amp;#39;</code> ：单引号Apostrophe<br><code>(</code> —— <code>&amp;#40;</code> ：小括号左边部分Left parenthesis<br><code>)</code> —— <code>&amp;#41;</code> ：小括号右边部分Right parenthesis<br><code>*</code> —— <code>&amp;#42;</code> ：星号Asterisk<br><code>+</code> —— <code>&amp;#43;</code> ：加号Plus sign<br><code>&lt;</code> —— <code>&amp;#60;</code> 或 <code>&amp;lt;</code> ：小于号Less than<br><code>=</code> —— <code>&amp;#61;</code> ：等于符号Equals sign<br><code>&gt;</code> —— <code>&amp;#62;</code> 或 <code>&amp;gt;</code> ：大于号Greater than<br><code>?</code> —— <code>&amp;#63;</code> ：问号Question mark<br><code>@</code> —— <code>&amp;#64;</code> ：Commercial at<br><code>[</code> —— <code>&amp;#91;</code> ：中括号左边部分Left square bracket<br><code>\</code> —— <code>&amp;#92;</code> ：反斜杠Reverse solidus (backslash)<br><code>]</code> —— <code>&amp;#93;</code> ：中括号右边部分Right square bracket<br><code>{</code> —— <code>&amp;#123;</code> ：大括号左边部分Left curly brace<br><code>|</code> —— <code>&amp;#124;</code> ：竖线Vertical bar<br><code>}</code> —— <code>&amp;#125;</code> ：大括号右边部分Right curly brace </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前几天在写博客，编译的时候，报了一条错误&lt;code&gt;Template render error: (unknown path) [Line 87, Column 13]&lt;/code&gt;,寻找了很久的答案，原来是一些特殊字符的转义问题，记录一下，防止以后再踩同样的坑。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="hexo" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/hexo/"/>
    
    
      <category term="hexo" scheme="https://www.xiaomujin.club/tags/hexo/"/>
    
      <category term="避坑" scheme="https://www.xiaomujin.club/tags/%E9%81%BF%E5%9D%91/"/>
    
      <category term="转义" scheme="https://www.xiaomujin.club/tags/%E8%BD%AC%E4%B9%89/"/>
    
  </entry>
  
  <entry>
    <title>七天搞定node.js---第三天</title>
    <link href="https://www.xiaomujin.club/2019/09/04/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E4%B8%89%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/09/04/学习node.js的第三天/</id>
    <published>2019-09-04T11:20:00.000Z</published>
    <updated>2019-09-05T12:12:53.107Z</updated>
    
    <content type="html"><![CDATA[<p>自学node.js第三天的笔记。<br><a id="more"></a></p><h1 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h1><ul><li>模块系统<ul><li>核心模块</li><li>第三方模块</li><li>自己写的模块</li></ul></li><li>npm</li><li>package.json</li><li>Express<ul><li>第三方 Web 开发框架</li><li>高度封装了 Http 模块</li><li>更加专注于业务，而非底层细节</li><li>知其所以然</li></ul></li><li>增删改查<ul><li>使用文件来保存数据库（锻炼异步编码）</li></ul></li><li>MongDB<ul><li>（所有方法都封装好了）</li></ul></li></ul><ul><li>在 Node 中使用 art-template 模板引擎<ul><li>安装</li><li>加载</li><li>template.render()</li></ul></li><li>客户端渲染和服务端渲染的区别<ul><li>最少两次请求，发起 ajax 在客户端使用模板引擎渲染</li><li>客户端拿到的就是服务端已经渲染好的</li></ul></li><li>处理留言本案例首页数据列表渲染展示</li><li>处理留言本案例发表留言功能<ul><li>路径</li><li>设计好的请求路径</li><li>$GET 直接或查询字符串数据</li><li>Node 中需要自己动手来解析<ul><li>url.parse()</li></ul></li><li>/pinglun?name=jack&amp;message=hello</li><li>split(‘?’)</li><li>name=jack&amp;message=hello</li><li>split(‘&amp;’)</li><li>name=jack message=hello</li><li>forEach()</li><li>name=jack.split(‘=’)</li><li>0 key</li><li>1 value</li></ul></li><li>掌握如何解析请求路径中的查询字符串<ul><li>url.parse()</li></ul></li><li>如何在 Node 中实现服务器重定向<ul><li>header(‘location’)</li><li>301 永久重定向 浏览器会记住<ul><li>a.com b.com</li><li>a 浏览器不会请求 a 了</li><li>直接去跳到 b 了</li></ul></li><li>302 临时重定向 浏览器不记忆<ul><li>a.com b.com</li><li>a.com 还会请求 a</li><li>a 告诉浏览器你往 b</li></ul></li></ul></li><li>Node 中的 Console（REPL）使用</li></ul><h2 id="each和forEach"><a href="#each和forEach" class="headerlink" title="each和forEach"></a>each和forEach</h2><ul><li>art-template 和 jQuery 一毛钱关系都没有</li><li>each 是 art-template 的模板语法，专属的</li><li>&#123;&#123;each 数组&#125;&#125;</li><li>&#60;li&#62;&#123;&#123; $value &#125;&#125;&#60;/li&#62;</li><li>&#123;&#123;/each&#125;&#125;这是 art-template 模板引擎支持的语法，只能在模板字符串中使用</li><li>$.each(数组, function)</li><li>$(‘div’).each(function) 一般用于遍历 jQuery 选择器选择到的伪数组实例对象</li><li>forEach 是 EcmaScript 5 中的一个数组遍历函数，是 JavaScript 原生支持的遍历方法 可以遍历任何可以被遍历的成员</li><li>jQuery 的 each 方法和 forEach 几乎一致</li><li>由于 forEach 是 EcmaScript 5 中的，所以低版本浏览器不支持</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;demo&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;node_modules/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // ie8 以下版本不支持,用jquery就能很好解决兼容问题</span><br><span class="line">        // ;</span><br><span class="line">        // [&apos;ssq&apos;, &apos;木槿&apos;, &apos;test&apos;, &apos;666&apos;].forEach(function(item, index) &#123;</span><br><span class="line">        //         console.log(item)</span><br><span class="line">        //     &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p> ie8 以下版本不支持<br> <img src="https://xuqian.xiaomujin.club/blog/20190902/ty69afWKRYEV.png" alt="ie8"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;demo&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;node_modules/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 遍历 jquery 元素</span><br><span class="line">        $.each([&apos;ssq&apos;, &apos;木槿&apos;, &apos;test&apos;, &apos;666&apos;], function(index, item) &#123;</span><br><span class="line">            console.log(item)</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>这里还是报错，原因是jQuery版本安装的是最新版本，2以上的版本都不支持<br><img src="https://xuqian.xiaomujin.club/blog/20190902/e87I4MtwhawN.png" alt="jQuery高版本"><br>最后把jQuery换成了1.11.0版本后就成功兼容了<br><img src="https://xuqian.xiaomujin.club/blog/20190902/4qNeVImwXiF0.png" alt="1.11.0"></p><h1 id="Node-中的模块系统"><a href="#Node-中的模块系统" class="headerlink" title="Node 中的模块系统"></a>Node 中的模块系统</h1><p>使用 Node 编写应用程序主要就是在使用</p><ul><li>EcmaScript语言<ul><li>和浏览器不一样，在 Node 中没有 Bom、Dom</li></ul></li><li>核心模块<ul><li>文件操作的 fs</li><li>http 服务的 http</li><li>url 路径操作模块</li><li>path 路径处理模块</li><li>os 操作系统信息</li></ul></li><li>第三方模块<ul><li>art-template</li><li>必须通过 npm 来下载才可以使用</li></ul></li><li>自己写的模块<ul><li>自己创建的文件</li></ul></li></ul><h2 id="什么是模块化"><a href="#什么是模块化" class="headerlink" title="什么是模块化"></a>什么是模块化</h2><ul><li>文件作用域</li><li>通信规则<ul><li>加载 require</li><li>导出</li></ul></li></ul><h2 id="CommonJS-模块规范"><a href="#CommonJS-模块规范" class="headerlink" title="CommonJS 模块规范"></a>CommonJS 模块规范</h2><p>在 Node 中的 JavaScript 还有一个很重要的概念：模块系统。</p><ul><li>模块作用域</li><li>使用 require 方法用来加载模块</li><li>使用 exports 接口对象用来导出模块中的成员</li></ul><h3 id="加载require"><a href="#加载require" class="headerlink" title="加载require"></a>加载<code>require</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 默认得到的是对象</span><br><span class="line">// 使用对象中的成员必须  . 点某个成员来访问</span><br><span class="line">// 有时候，对于一个模块,仅仅就想导出一个方法</span><br><span class="line">var fooExports = require(&apos;./foo&apos;)</span><br><span class="line"></span><br><span class="line">// ReferenceError:foo is not defined</span><br><span class="line">// console.log(foo)</span><br><span class="line"></span><br><span class="line">console.log(fooExports)</span><br></pre></td></tr></table></figure><p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var 自定义变量名称 = require(&apos;模块&apos;)</span><br></pre></td></tr></table></figure></p><p>两个作用：</p><ul><li>执行被加载模块中的代码</li><li>得到被加载模块中的<code>exports</code>导出对象</li></ul><h3 id="导出exports"><a href="#导出exports" class="headerlink" title="导出exports"></a>导出<code>exports</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var foo = &apos;bar&apos;</span><br><span class="line"></span><br><span class="line">function add(x, y) &#123;</span><br><span class="line">    return x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// exports = add //打印出空对象，不行</span><br><span class="line"></span><br><span class="line">// 如果一个模块需要直接导出某个成员，而非挂载的方式</span><br><span class="line">// 那这个时候必须使用下面这种方式</span><br><span class="line">module.exports = add</span><br><span class="line"></span><br><span class="line">// 你可以认为在每个模块的最好 return 了这个 exports</span><br><span class="line"></span><br><span class="line">// 只能到我想要给你的成员</span><br><span class="line">// 这样做的目的是为了解决变量命名冲突的问题</span><br><span class="line">// exports.add = add</span><br><span class="line"></span><br><span class="line">// exports 是一个对象</span><br><span class="line">// 可以通过多次为这个对象添加成员实现对外导出多个内部成员</span><br><span class="line"></span><br><span class="line">// exports.str = &apos;hello&apos;</span><br><span class="line"></span><br><span class="line">// 若希望加载得到直接就是一个：</span><br><span class="line">// 方法</span><br><span class="line">// 字符串</span><br><span class="line">// 数字</span><br><span class="line">// 数组</span><br></pre></td></tr></table></figure><ul><li>Node 中是模块作用域，默认文件中所有的成员只在当前文件模块有效</li><li>对于希望可以被其他模块访问的成员，我们就需要把这些公开的成员都挂载到<code>exports</code>接口对象中就可以了</li></ul><p>导出多个成员（必须在对象中）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">exports.a = 123</span><br><span class="line">exports.b = &apos;hello&apos;</span><br><span class="line">exports.c = function()&#123;</span><br><span class="line">console.log(&apos;ccc&apos;)</span><br><span class="line">&#125;</span><br><span class="line">exports.d = &#123;</span><br><span class="line">foo:&apos;bar&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>导出单个成员（拿到的就是：函数、字符串）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &apos;hello&apos;</span><br></pre></td></tr></table></figure></p><p>以下情况会覆盖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &apos;hello&apos;</span><br><span class="line"></span><br><span class="line">// 输出的是这条函数，后者会覆盖前者。</span><br><span class="line">module.exports = function(x , y)&#123;</span><br><span class="line">return x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>也可以这样来导出多个成员:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">add:function()&#123;</span><br><span class="line">return x + y</span><br><span class="line">&#125;,</span><br><span class="line">str: &apos;hello&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h3><p><code>exports</code> 和 <code>module.exports</code>的一个引用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">console.log(exports === module.exports)// =&gt; true</span><br><span class="line"></span><br><span class="line">exports.foo = &apos;bar&apos;</span><br><span class="line"></span><br><span class="line">//等价于</span><br><span class="line">module.exports.foo = &apos;bar&apos;</span><br></pre></td></tr></table></figure><h3 id="require-方法加载规则"><a href="#require-方法加载规则" class="headerlink" title="require 方法加载规则"></a>require 方法加载规则</h3><ul><li>核心模块<ul><li>模块名</li></ul></li><li>第三方模块<ul><li>模块名</li></ul></li><li>用户自己写的模块<ul><li>路径</li></ul></li><li>优先从缓存加载</li><li>判断模块标识<ul><li>核心模块</li><li>第三方模块</li><li>自己写的模块</li></ul></li></ul><h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h2><ul><li>全称：node package manager</li></ul><h3 id="npm-网站"><a href="#npm-网站" class="headerlink" title="npm 网站"></a>npm 网站</h3><p><a href="https://www.npmjs.com" target="_blank" rel="noopener">https://www.npmjs.com</a></p><h3 id="npm-命令行工具"><a href="#npm-命令行工具" class="headerlink" title="npm 命令行工具"></a>npm 命令行工具</h3><p>npm 的第二层含义就是一个命令行工具，只要你安装了 node 就已经安装了 npm<br>npm 也有版本这个概念<br>可以通过在命令行中输入<code>npm --version</code>查看版本号<br>升级npm：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global npm</span><br></pre></td></tr></table></figure></p><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ul><li>npm init<ul><li>npm init -y 跳过向导，快速生成 <code>pockage.json</code></li></ul></li><li>npm install<ul><li>根据 <code>package.json</code> 中的 <code>dependencies</code> 生成 <code>node_modules</code></li><li>简写 npm i</li></ul></li><li>npm install 包名<ul><li>只下载包</li><li>简写 npm i 包名</li></ul></li><li>npm install 包名 –save<ul><li>下载并且保存依赖项(package.json 文件中的 dependencies 选项)</li><li>简写 npm i 包名 -S</li></ul></li><li>npm uninstall 包名<ul><li>只删除，如果有依赖项会依然保存</li><li>简写 npm un 包名</li></ul></li><li>npm uninstall –save 包名<ul><li>删除包的同时也会把依赖信息也去除</li><li>简写 npm un -S 包名</li></ul></li><li>npm help<ul><li>查看使用帮助</li></ul></li><li>npm 命令 –help<ul><li>查看指定命令的使用帮助</li></ul></li></ul><h3 id="解决-npm-被墙问题"><a href="#解决-npm-被墙问题" class="headerlink" title="解决 npm 被墙问题"></a>解决 npm 被墙问题</h3><p>npm 存储包的服务器在国外，有时候会被墙，速度很慢。<br><a href="http://npm.taobao.org/" target="_blank" rel="noopener">http://npm.taobao.org/</a> 淘宝的开发团队把 npm 在国内做了一个备份。<br>安装淘宝镜像 cnpm：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 在任意目录执行都可以</span><br><span class="line">// --global 表示安装到全局，而非当前目录</span><br><span class="line">npm install --global cnpm</span><br></pre></td></tr></table></figure></p><p>接下来你安装包的时候把之前的 <code>npm</code> 替换成 <code>cnpm</code>。<br>举个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 这里还是走国外的 npm 服务器，速度比较慢</span><br><span class="line">npm install jquery</span><br><span class="line"></span><br><span class="line">// 使用 cnpm 就会通过淘宝的服务器来下载 jquery</span><br><span class="line">cnpm install jquery</span><br></pre></td></tr></table></figure></p><p>如果不想安装 <code>cnpm</code> 又想使用淘宝的服务器来下载：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jquery --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></p><p>但是每一次手动这样加参数很麻烦，所以我们可以把这个选项加入配置文件中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">// 查看 npm 配置信息</span><br><span class="line">npm config list</span><br></pre></td></tr></table></figure></p><p>只要经过了上面命令的配置，则你以后所有的 <code>npm install</code> 都会默认通过淘宝的服务器来下载。</p><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>建议每一个项目都要有一个<code>package.json</code><br>这个文件可以通过 <code>npm init</code> 的方式来自动初始化。</p><p>在初始化会以向导的方式询问：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">name:项目名字</span><br><span class="line">version：项目版本号</span><br><span class="line">description：项目描述</span><br><span class="line">git repository：github仓库地址</span><br><span class="line">keywords：关键词，别人通过npm下载你的项目时</span><br><span class="line">main：项目入口文件</span><br><span class="line">author：项目作者</span><br><span class="line">license：开源协议</span><br></pre></td></tr></table></figure><p>对于目前来讲，最重要的是 <code>dependencies</code> 选项，这个可以用来保存第三方包的依赖信息。<br>如果的你的 <code>node_modules</code> 文件丢失了，也不用担心,只需要： <code>npm install</code> 就会自动把 <code>package.json</code> 中的 <code>dependencies</code> 中的所有的依赖项都下载回来。</p><ul><li>建议每个根目录下都有一个 <code>package.json</code> 文件；</li><li>建议执行 <code>npm install 包名</code> 的时候都加上 <code>--save</code>这个选项，目的是用来保存依赖信息。</li></ul><h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>原生的 http 在某些方面表现不足以应对我们的开发需求,所以我们就需要使用框架来加快我们的开发效率，框架的目的就是提高效率，让我们的代码更高度统一。</p><p>在 Node 中，有很多 Web 开发框架，这里以 <code>express</code> 为主。</p><ul><li>官网：<a href="http://expressjs.com/" target="_blank" rel="noopener">http://expressjs.com/</a></li></ul><h2 id="Express-的整体感知："><a href="#Express-的整体感知：" class="headerlink" title="Express 的整体感知："></a>Express 的整体感知：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//0.安装</span><br><span class="line">//1.引包</span><br><span class="line"></span><br><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line"></span><br><span class="line">//2.创建你服务器应用程序</span><br><span class="line">//   也就是原来的 http.createServer</span><br><span class="line"></span><br><span class="line">var app = express()</span><br><span class="line"></span><br><span class="line">//在 Express 中开放资源就是一个 API 的事</span><br><span class="line">// 公开指定的目录</span><br><span class="line">app.use(&apos;/public/&apos;, express.static(&apos;./public/&apos;))</span><br><span class="line">app.use(&apos;/static/&apos;, express.static(&apos;./static/&apos;))</span><br><span class="line">    // 当服务器收到 get 请求 / 的时候，执行回调函数</span><br><span class="line">app.get(&apos;/&apos;, function(req, res) &#123;</span><br><span class="line">    res.send(&apos;hello express!&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(&apos;/about&apos;, function(req, res) &#123;</span><br><span class="line">        res.send(&apos;about~你好！&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">    // 以前：</span><br><span class="line">    // 得到路径</span><br><span class="line">    // 一个一个判断</span><br><span class="line">    // 显得非常不优雅</span><br><span class="line"></span><br><span class="line">// 相当于 server.listen </span><br><span class="line">app.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;app is running at port 3000。&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul><li>jQuery 的 each 和 原生的 JavaScript 方法 forEach<ul><li>EcmaScript 5 提供的<ul><li>不兼容 IE 8</li></ul></li><li>jQuery 的 each 由 jQuery 这个第三方库提供<ul><li>jQuery 2 以下的版本是兼容 IE 8 的</li><li>它的 each 方法主要用来遍历 jQuery 实例对象（伪数组）</li><li>同时它也可以作为低版本浏览器中 forEach 替代品</li><li>jQuery 的实例对象不能使用 forEach 方法，如果想要使用必须转为数组才可以使用</li><li><code>[].slice.call(jQuery实例对象)</code></li></ul></li></ul></li><li>模块中导出多个成员和导出单个成员</li><li>301 和 302 状态码区别<ul><li>301 永久重定向，浏览器会记住</li><li>302 临时重定向</li></ul></li><li>exports 和 module.exports 的区别<ul><li>每个模块中都有一个 module 对象</li><li>module 对象中有一个 exports 对象</li><li>我们可以把需要导出的成员都挂载到 module.exports 接口对象中</li><li>也就是：<code>moudle.exports.xxx = xxx</code> 的方式</li><li>但是每次都 <code>moudle.exports.xxx = xxx</code> 很麻烦，点儿的太多了</li><li>所以 Node 为了你方便，同时在每一个模块中都提供了一个成员叫：<code>exports</code></li><li><code>exports === module.exports</code> 结果为  <code>true</code>s</li><li>所以对于：<code>moudle.exports.xxx = xxx</code> 的方式 完全可以：<code>expots.xxx = xxx</code></li><li>当一个模块需要导出单个成员的时候，这个时候必须使用：<code>module.exports = xxx</code> 的方式</li><li>不要使用 <code>exports = xxx</code> 不管用</li><li>因为每个模块最终向外 <code>return</code> 的是 <code>module.exports</code></li><li>而 <code>exports</code> 只是 <code>module.exports</code> 的一个引用</li><li>所以即便你为 <code>exports = xx</code> 重新赋值，也不会影响 <code>module.exports</code></li><li>但是有一种赋值方式比较特殊：<code>exports = module.exports</code> 这个用来重新建立引用关系的</li><li>可以更灵活的去用它</li></ul></li><li>Node 是一个比肩 Java、PHP 的一个平台<ul><li>JavaScript 既能写前端也能写服务端</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">moudle.exports = &#123;</span><br><span class="line">  a: 123</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 重新建立 exports 和 module.exports 之间的引用关系</span><br><span class="line">exports = module.exports</span><br><span class="line"></span><br><span class="line">exports.foo = &apos;bar&apos;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.mySlice = function () &#123;</span><br><span class="line">  var start = 0</span><br><span class="line">  var end = this.length</span><br><span class="line">  if (arguments.length === 1) &#123;</span><br><span class="line">    start = arguments[0]</span><br><span class="line">  &#125; else if (arguments.length === 2) &#123;</span><br><span class="line">    start = arguments[0]</span><br><span class="line">    end = arguments[1]</span><br><span class="line">  &#125;</span><br><span class="line">  var tmp = []</span><br><span class="line">  for (var i = start; i &lt; end; i++) &#123;</span><br><span class="line">    // fakeArr[0]</span><br><span class="line">    // fakeArr[1]</span><br><span class="line">    // fakeArr[2]</span><br><span class="line">    tmp.push(this[i])</span><br><span class="line">  &#125;</span><br><span class="line">  return tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var fakeArr = &#123;</span><br><span class="line">  0: &apos;abc&apos;,</span><br><span class="line">  1: &apos;efg&apos;,</span><br><span class="line">  2: &apos;haha&apos;,</span><br><span class="line">  length: 3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 所以你就得到了真正的数组。 </span><br><span class="line">[].mySlice.call(fakeArr)</span><br></pre></td></tr></table></figure><ul><li>module.exports 和 exports 的区别</li><li>require 方法加载规则<ul><li>优先从缓存加载</li><li>核心模块</li><li>路径形式的模块</li><li>第三方模块<ul><li>node_modules</li></ul></li></ul></li><li>package.json 包描述文件<ul><li>dependencies 选项的作用</li></ul></li><li>npm 常用命令</li><li><p>Express 基本使用</p></li><li><p>使用 Express 把之前的留言本案例改造一下</p></li></ul><p>index.html页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;留言本&lt;/title&gt;</span><br><span class="line">  &lt;!-- </span><br><span class="line">    浏览器收到 HTML 响应内容之后，就要开始从上到下依次解析，</span><br><span class="line">    当在解析的过程中，如果发现：</span><br><span class="line">      link</span><br><span class="line">      script</span><br><span class="line">      img</span><br><span class="line">      iframe</span><br><span class="line">      video</span><br><span class="line">      audio</span><br><span class="line">    等带有 src 或者 href（link） 属性标签（具有外链的资源）的时候，浏览器会自动对这些资源发起新的请求。</span><br><span class="line">   --&gt;</span><br><span class="line">   &lt;!-- </span><br><span class="line">      注意：在服务端中，文件中的路径就不要去写相对路径了。</span><br><span class="line">      因为这个时候所有的资源都是通过 url 标识来获取的</span><br><span class="line">      我的服务器开放了 /public/ 目录</span><br><span class="line">      所以这里的请求路径都写成：/public/xxx</span><br><span class="line">      / 在这里就是 url 根路径的意思。</span><br><span class="line">      浏览器在真正发请求的时候会最终把 http://127.0.0.1:3000 拼上</span><br><span class="line"></span><br><span class="line">      不要再想文件路径了，把所有的路径都想象成 url 地址</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; href=&quot;/public/lib/bootstrap/dist/css/bootstrap.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;header container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">      &lt;h1&gt;Example page header &lt;small&gt;Subtext for header&lt;/small&gt;&lt;/h1&gt;</span><br><span class="line">      &lt;a class=&quot;btn btn-success&quot; href=&quot;/post&quot;&gt;发表留言&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;comments container&quot;&gt;</span><br><span class="line">    &lt;ul class=&quot;list-group&quot;&gt;</span><br><span class="line">      &#123;&#123;each comments&#125;&#125;</span><br><span class="line">      &lt;li class=&quot;list-group-item&quot;&gt;&#123;&#123; $value.name &#125;&#125;说：&#123;&#123; $value.message &#125;&#125; &lt;span class=&quot;pull-right&quot;&gt;&#123;&#123; $value.dateTime &#125;&#125;&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">      &#123;&#123;/each&#125;&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>post.html页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; href=&quot;/public/lib/bootstrap/dist/css/bootstrap.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;header container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">      &lt;h1&gt;&lt;a href=&quot;/&quot;&gt;首页&lt;/a&gt; &lt;small&gt;发表评论&lt;/small&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;comments container&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">      以前表单是如何提交的？</span><br><span class="line">      表单中需要提交的表单控件元素必须具有 name 属性</span><br><span class="line">      表单提交分为：</span><br><span class="line">        1. 默认的提交行为</span><br><span class="line">        2. 表单异步提交</span><br><span class="line"></span><br><span class="line">        action 就是表单提交的地址，说白了就是请求的 url 地址</span><br><span class="line">        method 请求方法</span><br><span class="line">            get</span><br><span class="line">            post</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;form action=&quot;/post&quot; method=&quot;post&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;input_name&quot;&gt;你的大名&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; required minlength=&quot;2&quot; maxlength=&quot;10&quot; id=&quot;input_name&quot; name=&quot;name&quot; placeholder=&quot;请写入你的姓名&quot;&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">        &lt;label for=&quot;textarea_message&quot;&gt;留言内容&lt;/label&gt;</span><br><span class="line">        &lt;textarea class=&quot;form-control&quot; name=&quot;message&quot; id=&quot;textarea_message&quot; cols=&quot;30&quot; rows=&quot;10&quot; required minlength=&quot;5&quot; maxlength=&quot;20&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;发表&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>404.html页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;抱歉!  您访问的页面失联啦...&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>admin页面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;admin &#123;&#123; title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自学node.js第三天的笔记。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>11个小技巧教你写出高质量的JavaScript代码</title>
    <link href="https://www.xiaomujin.club/2019/08/14/11%E4%B8%AA%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%95%99%E4%BD%A0%E5%86%99%E5%87%BA%E9%AB%98%E8%B4%A8%E9%87%8F%E7%9A%84JavaScript%E4%BB%A3%E7%A0%81/"/>
    <id>https://www.xiaomujin.club/2019/08/14/11个小技巧教你写出高质量的JavaScript代码/</id>
    <published>2019-08-14T05:30:00.000Z</published>
    <updated>2019-08-15T02:42:18.375Z</updated>
    
    <content type="html"><![CDATA[<p>所谓的高质量的JavaScript代码，其实指的就是可维护性高，可读性高，可拓展性高的代码，不仅开发的过程中写得舒服，而且后期维护也很轻松的代码质量。</p><p>我们可以通过下面这11个要点，从细节来把握我们的JavaScript质量。<br><a id="more"></a></p><h1 id="可维护性高的代码"><a href="#可维护性高的代码" class="headerlink" title="可维护性高的代码"></a>可维护性高的代码</h1><p>在我们开发过程中，当出现bug的时候，我们立刻去修复，这时候解决代码bug的思路是最清晰的。否则，你去做了别的代码任务或者这个bug出现了一段时间，你再去处理，你就忘了你写的思路是什么了，那这时候去处理这些代码你就需要想两个问题了：</p><p>1.花时间去学习和理解这个代码问题</p><p>2.花时间了解bug的解决方案</p><p>同时，你如果是在企业中做的大型项目，都是团队开发，开发和维护可能都不是同一个人（发现bug和修复bug的都不是作者）。</p><p>所以，必须降低大量的理解代码的时间，无论是你自己写的代码，还是团队中其他人的代码。</p><p>这关系到整个项目的发展和开发团队每个人的生活幸福啊，毕竟我们应该多花时间去研究更多好的代码想法，而不是时间都浪费在维护遗留代码里面。</p><p>所以，可维护性高的代码很重要，一般可维护性高的代码都有以下这些原则：</p><p>&emsp;&emsp;1.可读性高（例如好的命名，解析性强的注释）</p><p>&emsp;&emsp;2.一致性强（命名风格，编码风格，代码规范）</p><p>&emsp;&emsp;3.可预测性（明显看出运行效果）</p><p>&emsp;&emsp;4.风格统一（看上去就知道是不是同一个人写完的）</p><p>&emsp;&emsp;5.有记录（有清晰的注释开发记录）</p><h1 id="全局变量的问题"><a href="#全局变量的问题" class="headerlink" title="全局变量的问题"></a>全局变量的问题</h1><p>什么是全局变量的问题，就是在你的javascript程序和网页中的所有代码都共享这些变量，他们都住在同一个命名空间里面（全局作用域），所以当程序在执行过程中两个不同部分定义同名但不同作用的全局变量的时候，命名冲突的情况就很常见了（许多小白遇到了就抓不着头脑了：咦，这个命名没问题啊，为什么报错了？）。</p><p>而且，网页里面包含有其他不是开发作者写的代码而产生的全局命名问题也是比较常见的。比如说：</p><p>1.第三方javascript库</p><p>2.甲方（或开发团队自己封装的代码）的脚步代码</p><p>3.第三方用户跟踪或分析代码</p><p>4.不同类型的UI组件</p><p>…..</p><p>这些带来的情况就很常见了，比如说，第三方脚本定义了一个变量，叫做userId，接着，你的函数里面也写了个userId的全局变量。这个时候的结果就是，后面的覆盖掉前面的变量，第三方脚本直接就无效了，这种情况是很难调试出来的。</p><p>所以，尽可能的少使用全局变量很重要，例如命名空间模式或者函数立即执行，不过要想让全局变量减少，最重要的还是多用var来声明变量。</p><h1 id="忘记var的副作用"><a href="#忘记var的副作用" class="headerlink" title="忘记var的副作用"></a>忘记var的副作用</h1><p>隐式全局变量和显式定义的全局变量是有点差异的。</p><p>具体如下：</p><ul><li><p>通过var创建的全局变量（任何函数之外的程序中创建）是不能被删除的。</p></li><li><p>没有通过var创建的隐式全局变量（无视是否在函数中创建）是能被删除的。</p></li></ul><p>所以隐式全局变量并不是真正的全局变量，但它们是全局对象的属性。</p><p>属性是可以通过delete操作符删除的，而变量是不能的，具体的代码我这里就不说了。</p><h1 id="访问全局对象"><a href="#访问全局对象" class="headerlink" title="访问全局对象"></a>访问全局对象</h1><p>在浏览器中，全局对象可以通过window属性在代码任何地方访问（除非说你做了一些很超乎想象的事情，比如说声明了一个名为window的局部变量）。</p><p>但是在其他环境下，这个方便的属性可能被叫做其他什么东西（甚至在程序中不可用）。</p><p>如果你需要在没有硬编码的window标识符下访问全局对象，你可以在任何层级的函数作用域中做如下操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var global = (function ()&#123;</span><br><span class="line">return this;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p><h1 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h1><p>在使用for循环的时候，可以遍历拿到数组或者数组类似对象的值，比如说arguments和HTMLCollection对象，一般我们的写法都是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 一般的循环</span><br><span class="line">var myArray = [1,2,13,1,3];</span><br><span class="line"></span><br><span class="line">for (var i = 0; i &lt; myArray.length; i++)&#123;</span><br><span class="line">myArray[i] //遍历myArray[i]任意一个下标进行操作</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这种循环的方式并不是很好，每次执行循环的时候都需要获取一次数组的长度，这个时候我们代码的执行效率就特别低了，特别是当myArray不是数组的时候，而是一个HTMLCollection对象的时候。</p><h1 id="不扩展内置原型"><a href="#不扩展内置原型" class="headerlink" title="不扩展内置原型"></a>不扩展内置原型</h1><p>扩增构造函数的prototype属性是个很强大的增加功能的方法，但有时候它太强大了。</p><p>增加内置的构造函数原型（如Object(), Array(), 或Function()）挺诱人的，但是这严重降低了可维护性，因为它让你的代码变得难以预测。</p><p>使用你代码的其他开发人员很可能更期望使用内置的 JavaScript方法来持续不断地工作，而不是你另加的方法。</p><p>另外，属性添加到原型中，可能会导致不使用hasOwnProperty属性时在循环中显示出来，这会造成混乱。</p><h1 id="避免隐式类型转换"><a href="#避免隐式类型转换" class="headerlink" title="避免隐式类型转换"></a>避免隐式类型转换</h1><p>JavaScript的变量在比较的时候会隐式类型转换。</p><p>这就是为什么一些诸如：false <code>==</code> 0 或 <code>“ ”</code> <code>==</code> 0 返回的结果是true。</p><p>为避免引起混乱的隐含类型转换，在你比较值和表达式类型的时候始终使用<code>===</code>和<code>!==</code>操作符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var zero = 0;</span><br><span class="line">if (zero === false) &#123;</span><br><span class="line"></span><br><span class="line">// 不执行，因为zero为0，而不是false</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 反面示例</span><br><span class="line">if (zero == false)&#123;</span><br><span class="line"></span><br><span class="line">// 执行了~</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h1><p>建立和遵循编码规范是很重要的，这让你的代码保持一致性，一目了然，更易于阅读和理解。</p><p>一个新的开发者加入这个团队可以通读规范，能马上理解其它团队成员书写的代码，更快上手进行开发。</p><h1 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h1><p>代码开发，标准的缩进是最基本的，没有缩进的代码基本就不能读了。唯一糟糕的事情就是不一致的缩进，因为它看上去像是遵循了规范，但是可能一路上伴随着混乱和惊奇。重要的是规范地使用缩进。</p><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p>注释这个，其实是应该只要是写了代码，都要有注释的，让别人一看你的代码就能快速理解你的代码。</p><p>在平时我们开发的时候，你很花时间去研究一个程序怎么实现，你会很清楚的知道这个代码是干嘛用的。但是，你一周之后回来再看这段代码，你就会烧掉很多脑细胞了。</p><p>当然，注释也不能走极端路线：有的人就说不是要理解没一段代码吗，那每个单独变量或是单独一行就给一段注释。这样就很没有意义了。</p><p>一般来说，注释都是记录在函数的部分，它们的参数和返回值，或是一些不寻常的技术和方法。通过注释可以给你代码的未来阅读者以诸多提示；</p><p>阅读你代码的人需要的是（不要读太多的东西）注释和函数名来理解你的代码意义。</p><h1 id="花括号"><a href="#花括号" class="headerlink" title="花括号 { }"></a>花括号 { }</h1><p>花括号（也称大括号，下同）应该多使用，即使在它们为可选的时候。技术上来说，在in或是for中如果执行语句仅一条时，花括号是不需要写也能执行理想效果的，但是你最好还是用花括号，因为这会让你的代码更有持续性和易于更新，并且更加好理解。</p><p>记住这11个要点，时刻落实到你的代码书写习惯当中，慢慢的，你也能轻松写出大神的代码了。<br><br></p><p><font color="red" size="2">* 声明：内容与图片均来源于网络（部分内容有修改），版权归原作者所有，如来源信息有误或侵犯权益，请联系我们删除或授权事宜。</font><br><br></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;所谓的高质量的JavaScript代码，其实指的就是可维护性高，可读性高，可拓展性高的代码，不仅开发的过程中写得舒服，而且后期维护也很轻松的代码质量。&lt;/p&gt;
&lt;p&gt;我们可以通过下面这11个要点，从细节来把握我们的JavaScript质量。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="JavaScript" scheme="https://www.xiaomujin.club/tags/JavaScript/"/>
    
      <category term="高质量" scheme="https://www.xiaomujin.club/tags/%E9%AB%98%E8%B4%A8%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>5个要矫正的JavaScript编程陋习</title>
    <link href="https://www.xiaomujin.club/2019/08/13/5%E4%B8%AA%E8%A6%81%E7%9F%AB%E6%AD%A3%E7%9A%84JavaScript%E7%BC%96%E7%A8%8B%E9%99%8B%E4%B9%A0/"/>
    <id>https://www.xiaomujin.club/2019/08/13/5个要矫正的JavaScript编程陋习/</id>
    <published>2019-08-13T03:30:00.000Z</published>
    <updated>2019-08-14T05:48:07.280Z</updated>
    
    <content type="html"><![CDATA[<p>在阅读JavaScript（JS）代码时，您是否有过这样的感觉：<br>你几乎完全不明白这条代码的作用？<br>这些代码使用了大量的JS技巧？<br>命名和编程风格相当随意？<br>这些是编程陋习的征兆。</p><p>在这篇文章中，我将会概述JS中5种常见的编程陋习。重要的是，我将提出我认为的，关于如何矫正这些陋习的可行的建议。<br><a id="more"></a></p><h1 id="不要使用隐式类型转换"><a href="#不要使用隐式类型转换" class="headerlink" title="不要使用隐式类型转换"></a>不要使用隐式类型转换</h1><p>JavaScript是一种松散类型的程序语言。如果使用得当，这对我们是有利的，因为它提供了很大的灵活性。</p><p>大多数操作符<code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>==</code>(但不是指<code>===</code>)在处理不同类型的操作数时会进行隐式转换。语句if (condition) {…},(while(condition) {…}隐式地将条件转换为布尔值。</p><p>下面的示例依赖于类型的隐式转换。我猜你一定感很到困惑:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;2&quot; + &quot;1&quot;);  // =&gt; &quot;21&quot;</span><br><span class="line">console.log(&quot;2&quot; - &quot;1&quot;);  // =&gt; 1</span><br><span class="line"></span><br><span class="line">console.log(&apos;&apos; == 0);    // =&gt; true</span><br><span class="line"></span><br><span class="line">console.log(true == []); // -&gt; false</span><br><span class="line">console.log(true == ![]); // -&gt; false</span><br></pre></td></tr></table></figure></p><p>过分依赖于隐式类型转换是一个陋习.<br>首先，它使你的代码在边缘情况下不够稳定。其次，增加了出现难以重现和修复的bug的机率。</p><p>现在咱们使用一个获取对象属性的函数。如果属性不存在，函数返回一个默认值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function getProp(object, propertyName, defaultValue) &#123;</span><br><span class="line">  if (!object[propertyName]) &#123;</span><br><span class="line">    return defaultValue;</span><br><span class="line">  &#125;</span><br><span class="line">  return object[propertyName];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const hero = &#123;</span><br><span class="line">  name: &apos;Batman&apos;,</span><br><span class="line">  isVillian: false</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(getProp(hero, &apos;name&apos;, &apos;Unknown&apos;));     // =&gt; &apos;Batman&apos;</span><br></pre></td></tr></table></figure></p><p>getProp() 读取name属性的值，即为’Batman’。</p><p>那么如果我们试图访问isVillian属性呢：</p><p>console.log(getProp(hero, ‘isVillian’, true)); // =&gt; true</p><p>这是一个错误。即使hero的属性isVillian 为false，函数getProp()也会错误得返回true。</p><p>这是因为属性存在的验证依赖于if (!object[propertyName]) {…}隐式转换的布尔值。</p><p>这些错误很难发现，要修正该函数，就要明确验证值的类型：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function getPropFixed(object, propertyName, defaultValue) &#123;</span><br><span class="line">   if (object[propertyName] === undefined) &#123;</span><br><span class="line">     return defaultValue;</span><br><span class="line">   &#125;</span><br><span class="line">   return object[propertyName];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const hero = &#123;</span><br><span class="line">  name: &apos;Batman&apos;,</span><br><span class="line">  isVillian: false</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">console.log(getPropFixed(hero, &apos;isVillian&apos;, true)); // =&gt; false</span><br></pre></td></tr></table></figure></p><p>object[propertyName] === undefined确切地验证了属性是否为undefined。</p><p>你们有什么其他方法来验证对象中的属性是否存在吗？如果有，请在下面的评论区留言！</p><p>边注：在第4（此处需要一个超链接直接跳到第4部分）部分我有建议避免直接使用undefined。因此，上述解决方案可以用运算符in进一步改进：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function getPropFixedBetter(object, propertyName, defaultValue) &#123;</span><br><span class="line">   if (!(propertyName in object)) &#123;</span><br><span class="line">     return defaultValue;</span><br><span class="line">   &#125;</span><br><span class="line">   return object[propertyName];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>我的建议是:尽可能不要使用隐式类型转换。相反，请确保变量和函数参数始终具有相同的类型，必要时使用显式类型转换。</p><p>大家最好这么做：</p><p>始终使用严格的相等运算符===进行比较</p><p>不要使用松散等式运算符==</p><p>加法运算符operand1 + operand2：两个操作数应该是数字或字符串</p><p>算术运算符- * / % **：两个操作数都应该是数字</p><p>if (condition) {…}，while (condition) {…}等语句中的condition必须是一个布尔类型值</p><p>大家可能会觉得这种方式需要编写更多代码…的确！但是通过明确的方法，我们能够控制代码的行为。此外，显性类型转换增强了可读性。</p><h1 id="不要使用早期的JavaScript技巧"><a href="#不要使用早期的JavaScript技巧" class="headerlink" title="不要使用早期的JavaScript技巧"></a>不要使用早期的JavaScript技巧</h1><p>JS的有趣之处在于，它的创建者并没有料到这种语言会如此流行。基于JS构建的应用程序的复杂性比语言发展的速度还要快。这种情况迫使开发人员使用JS技巧和变通方法，只是为了让事情正常运行。</p><p>一个典型的例子是查看数组是否包含某个元素。我从不会使用array.indexOf(item) !== -1来检查。</p><p>ECMAScript 2015及以后版本的功能要强大得多，可以使用新的语言特性安全地重构许多技巧。<br><img src="https://xuqian.xiaomujin.club/blog/20190814/WBotCTjz4l3k.png" alt="such"><br>在新的ES2015中可以使用array.includes(item)来代替array.indexOf(item) !== -1。<br>大家可以根据我写的重构列表来清除你的JS代码中的老旧技巧。</p><h1 id="不要污染函数作用域"><a href="#不要污染函数作用域" class="headerlink" title="不要污染函数作用域"></a>不要污染函数作用域</h1><p>在ES2015之前，JS变量在函数作用域内，因此大家可能会习惯了将所有变量声明在函数作用域里面。</p><p>我们来看一个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function someFunc(array) &#123;</span><br><span class="line">  var index, item, length = array.length;</span><br><span class="line">  /*</span><br><span class="line">   * Lots of code</span><br><span class="line">   */</span><br><span class="line">  for (index = 0; index &lt; length; index++) &#123;</span><br><span class="line">    item = array[index];</span><br><span class="line">    // Use `item`</span><br><span class="line">  &#125;</span><br><span class="line">  return someResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>变量index，item和length在函数作用域内。但是这些变量会影响函数作用域，因为它们只在for()块作用域内才被需要。</p><p>因为已经引入了具有块作用域let和const，我们应该尽可能地限制变量的生命周期。</p><p>让我们来清理一下函数作用域：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function someFunc(array) &#123;</span><br><span class="line">  /*</span><br><span class="line">   * Lots of code</span><br><span class="line">   */</span><br><span class="line">  const length = array.length;</span><br><span class="line">  for (let index = 0; index &lt; length; index++) &#123;</span><br><span class="line">    const item = array[index];</span><br><span class="line">    // Use `item`</span><br><span class="line">  &#125;</span><br><span class="line">  return someResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>变量index和item被限制为for()循环块作用域。length被挪到使用地方的附近。</p><p>重构后的代码更容易理解，因为变量不会分散在整个函数作用域内，它们存在于使用地方的附近。</p><p>在使用的块作用域定义变量：</p><p>if块作用域<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">let message;</span><br><span class="line">// ...</span><br><span class="line">if (notFound) &#123;</span><br><span class="line">  message = &apos;Item not found&apos;;</span><br><span class="line">  // Use `message`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Good</span><br><span class="line">if (notFound) &#123;</span><br><span class="line">  const message = &apos;Item not found&apos;;</span><br><span class="line">  // Use `message`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>for块作用域<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Bad</span><br><span class="line">let item;</span><br><span class="line">for (item of array) &#123;</span><br><span class="line">  // Use `item`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Good</span><br><span class="line">for (const item of array) &#123;</span><br><span class="line">  // Use `item`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="尽量避免undefined和null"><a href="#尽量避免undefined和null" class="headerlink" title="尽量避免undefined和null"></a>尽量避免undefined和null</h1><p>未赋值的变量默认被赋值为undefined。例如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">let count;</span><br><span class="line">console.log(count); // =&gt; undefined</span><br><span class="line"></span><br><span class="line">const hero = &#123;</span><br><span class="line">  name: &apos;Batman&apos;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(hero.city); // =&gt; undefined</span><br></pre></td></tr></table></figure></p><p>count变量已定义，但尚未使用值初始化。JS隐式赋值给它undefined。</p><p>在我们访问不存在的属性hero.city时，也会返回undefined。</p><p>为什么直接使用undefined是一个陋习呢？因为与undefined进行比较时，实际上我们正在处理的是未初始化状态的变量。</p><p>变量、对象属性和数组在使用前必须用值初始化</p><p>JS提供了很多避免与undefined进行比较的方式。</p><p><strong>判断属性是否存在</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">const object = &#123;</span><br><span class="line">  prop: &apos;value&apos;</span><br><span class="line">&#125;;</span><br><span class="line">if (object.nonExistingProp === undefined) &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Good</span><br><span class="line">const object = &#123;</span><br><span class="line">  prop: &apos;value&apos;</span><br><span class="line">&#125;;</span><br><span class="line">if (&apos;nonExistingProp&apos; in object) &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>对象的默认属性</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">function foo(options) &#123;</span><br><span class="line">  if (object.optionalProp1 === undefined) &#123;</span><br><span class="line">    object.optionalProp1 = &apos;Default value 1&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// Good</span><br><span class="line">function foo(options) &#123;</span><br><span class="line">  const defaultProps = &#123;</span><br><span class="line">    optionalProp1: &apos;Default value 1&apos;</span><br><span class="line">  &#125;;</span><br><span class="line">  options = &#123;</span><br><span class="line">    ...defaultProps,</span><br><span class="line">    ...options</span><br><span class="line">  &#125;;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>默认函数参数</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Bad</span><br><span class="line">function foo(param1, param2) &#123;</span><br><span class="line">  if (param2 === undefined) &#123;</span><br><span class="line">    param2 = &apos;Some default value&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Good</span><br><span class="line">function foo(param1, param2 = &apos;Some default value&apos;) &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>null是一个缺失对象的指示符。我们应该尽量避免从函数返回null，特别是使用null作为参数调用函数。</p><p>一旦null出现在调用堆栈中，我们就必须在每个可能访问null的函数中检查它的存在，这样我们一不小心就出错了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function bar(something) &#123;</span><br><span class="line">  if (something) &#123;</span><br><span class="line">    return foo(&#123; value: &apos;Some value&apos; &#125;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return foo(null);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function foo(options) &#123;</span><br><span class="line">  let value = null;</span><br><span class="line">  if (options !== null) &#123;</span><br><span class="line">    value = options.value;</span><br><span class="line">    // ...</span><br><span class="line">  &#125;</span><br><span class="line">  return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>大家尽量编写不涉及null的代码。可以用try /catch机制替代，默认对象的使用。<br>Algol的发明者Tony Hoare曾说过：“我把它称为我的十几亿美元的错误…[…]我设计了第一个面向对象语言的综合类型系统。[…]但是我无法抗拒放入null引用的诱惑，因为它很容易实现。这导致了无数的错误、漏洞和系统崩溃，在过去四十年中，这些错误和崩溃可能造成了十亿美元的损失。”</p><p>“计算机科学中最糟糕的错误”一文深入分析了为什么null会破坏代码的质量。</p><h1 id="不要使用随意的编码风格，执行一个标准"><a href="#不要使用随意的编码风格，执行一个标准" class="headerlink" title="不要使用随意的编码风格，执行一个标准"></a>不要使用随意的编码风格，执行一个标准</h1><p>有什么比阅读具有随机编码风格的代码更令人生畏的事情？你永远不知道会发生什么！如果代码库包含许多开发人员的不同编码风格，该怎么办?，这种就像各色人物涂鸦墙。</p><p>整个团队和应用程序代码库都需要相同的编码风格，它提高了代码的可读性。</p><p>一些有用的编码风格的例子：<br>爱彼迎 JS 风格指南<br>谷歌 JS 风格指南<br>老实说，我很懒。当我正面临着死线或者在回家前准备提交时，我可能会“忘记”设计代码的样式。</p><p>懒惰的我总对自己说：先这样吧，以后再更新它，但是”以后”意味着永远不会。</p><p>所以在这里我建议使用 eslint 来规范编码风格。安装eslint<br>使用最适合自己的编码风格去配置eslint<br>设置一个预提交hook，在提交之前运行eslint验证。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>编写高质量和干净的代码需要有纪律性，我们克服编码陋习。</p><p>JS是一种自由的编程语言，具有很大的灵活性。但是我们必须注意我们所使用的特性。这里我的建议是避免使用隐式类型转换undefined和null。</p><p>现在这种编程语言发展得相当快。找出复杂的代码，并使用最新的JS特性来重构简化。整个代码库的一致编码风格有益于可读性。优秀的编程技能总是一个双赢的解决方案。</p><p>今天的分享就到这里，希望本文能帮助到您！</p><p>来源：<a href="https://juejin.im/post/5d4add0ce51d45620d2cb89f" target="_blank" rel="noopener">https://juejin.im/post/5d4add0ce51d45620d2cb89f</a><br>声明：著作权归作者所有。如有侵权请联系博主删除！！！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在阅读JavaScript（JS）代码时，您是否有过这样的感觉：&lt;br&gt;你几乎完全不明白这条代码的作用？&lt;br&gt;这些代码使用了大量的JS技巧？&lt;br&gt;命名和编程风格相当随意？&lt;br&gt;这些是编程陋习的征兆。&lt;/p&gt;
&lt;p&gt;在这篇文章中，我将会概述JS中5种常见的编程陋习。重要的是，我将提出我认为的，关于如何矫正这些陋习的可行的建议。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="JavaScript" scheme="https://www.xiaomujin.club/tags/JavaScript/"/>
    
      <category term="效率" scheme="https://www.xiaomujin.club/tags/%E6%95%88%E7%8E%87/"/>
    
  </entry>
  
  <entry>
    <title>前端中关于字符串的操作整理</title>
    <link href="https://www.xiaomujin.club/2019/08/09/%E5%89%8D%E7%AB%AF---%E5%85%B3%E4%BA%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%93%8D%E4%BD%9C%E6%95%B4%E7%90%86/"/>
    <id>https://www.xiaomujin.club/2019/08/09/前端---关于字符串的操作整理/</id>
    <published>2019-08-09T09:51:00.000Z</published>
    <updated>2019-08-15T02:42:50.296Z</updated>
    
    <content type="html"><![CDATA[<p>为了以后的程序员之路可以走的更远，总结一下关于字符串的一些操作。<br><a id="more"></a></p><h1 id="charAt"><a href="#charAt" class="headerlink" title="charAt()"></a>charAt()</h1><p>返回在指定位置的字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc&quot;</span><br><span class="line">console.log(str.charAt(0))</span><br><span class="line">//a</span><br></pre></td></tr></table></figure></p><h1 id="charCodeAt"><a href="#charCodeAt" class="headerlink" title="charCodeAt()"></a>charCodeAt()</h1><p>返回在指定的位置的字符的 Unicode 编码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc&quot;</span><br><span class="line"> console.log(str.charCodeAt(1))</span><br><span class="line"> //98</span><br></pre></td></tr></table></figure></p><h1 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h1><p>连接字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a = &quot;abc&quot;;  </span><br><span class="line">var b = &quot;def&quot;;  </span><br><span class="line">var c = a.concat(b);</span><br><span class="line">console.log(c);</span><br><span class="line">//abcdef</span><br></pre></td></tr></table></figure></p><h1 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h1><p>检索字符串。indexOf() 方法对大小写敏感！<br>如果要检索的字符串值没有出现，则该方法返回 -1。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;Hello world!&quot;</span><br><span class="line">console.log(str.indexOf(&quot;Hello&quot;))//0</span><br><span class="line">console.log(str.indexOf(&quot;World&quot;))//-1</span><br><span class="line">console.log(str.indexOf(&quot;world&quot;))///6</span><br></pre></td></tr></table></figure></p><h1 id="match"><a href="#match" class="headerlink" title="match()"></a>match()</h1><p>match() 方法可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。该方法类似 indexOf() 和 lastIndexOf()，但是它返回指定的值，而不是字符串的位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;1 abc 2 def 3&quot;</span><br><span class="line">console.log(str.match(/\d+/g))//123</span><br></pre></td></tr></table></figure></p><h1 id="replace"><a href="#replace" class="headerlink" title="replace()"></a>replace()</h1><p>replace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc Def!&quot;</span><br><span class="line">console.log(str.replace(/abc/, &quot;CBA&quot;))//CBA Def!</span><br></pre></td></tr></table></figure></p><h1 id="search"><a href="#search" class="headerlink" title="search()"></a>search()</h1><p>search() 方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串。要执行忽略大小写的检索，请追加标志 i。如果没有找到任何匹配的子串，则返回 -1。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc DEF!&quot;</span><br><span class="line">console.log(str.search(/DEF/))//4</span><br></pre></td></tr></table></figure></p><h1 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h1><p>提取字符串的片断，并在新的字符串中返回被提取的部分。<br>stringObject.slice(<strong>start,end</strong>);<br><strong>start: </strong>要抽取的片断的起始下标。如果是负数，则该参数规定的是从字符串的尾部开始算起的位置。也就是说，-1 指字符串的最后一个字符，-2 指倒数第二个字符，以此类推。<br><strong>end：</strong>紧接着要抽取的片段的结尾的下标。若未指定此参数，则要提取的子串包括 start 到原字符串结尾的字符串。如果该参数是负数，那么它规定的是从字符串的尾部开始算起的位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc def ghk&quot;</span><br><span class="line">console.log(str.slice(6))//f ghk</span><br></pre></td></tr></table></figure></p><p>#split()<br>把字符串分割为字符串数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc def ghi jkl&quot;    </span><br><span class="line">console.log(str.split(&quot; &quot;))//[&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;, &quot;jkl&quot;]</span><br><span class="line">console.log(str.split(&quot;&quot;) )//[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot; &quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot; &quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot; &quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;]</span><br><span class="line">console.log(str.split(&quot; &quot;,3))//[&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;]</span><br></pre></td></tr></table></figure></p><h1 id="toLocaleLowerCase"><a href="#toLocaleLowerCase" class="headerlink" title="toLocaleLowerCase()"></a>toLocaleLowerCase()</h1><p>把字符串转换为小写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;ABC def!&quot;</span><br><span class="line">console.log(str.toLocaleLowerCase())//abc def!</span><br></pre></td></tr></table></figure></p><h1 id="toLocaleUpperCase"><a href="#toLocaleUpperCase" class="headerlink" title="toLocaleUpperCase()"></a>toLocaleUpperCase()</h1><p>把字符串转换为大写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;ABC def!&quot;</span><br><span class="line">console.log(str.toLocaleUpperCase())//ABC DEF!</span><br></pre></td></tr></table></figure></p><h1 id="toLowerCase"><a href="#toLowerCase" class="headerlink" title="toLowerCase()"></a>toLowerCase()</h1><p>把字符串转换为小写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;ABC def!&quot;</span><br><span class="line">console.log(str.toLowerCase())//abc def!</span><br></pre></td></tr></table></figure></p><h1 id="toUpperCase"><a href="#toUpperCase" class="headerlink" title="toUpperCase()"></a>toUpperCase()</h1><p>把字符串转换为大写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;ABC def!&quot;</span><br><span class="line">console.log(str.toUpperCase())//ABC DEF!</span><br></pre></td></tr></table></figure></p><font color="red"><br>ECMAScript中涉及字符串大小写转换的方法有4个：toLowerCase()、toLocaleLowerCase()、toUpperCase()和toLocaleUpperCase()。其中，toLowerCase()和toUpperCase()是两个经典的方法，借鉴自java.lang.String中的同名方法。而toLocaleLowerCase()和toLocaleUpperCase()方法则是针对特定地区的实现。<br><br>对有些地区来说，针对地区的方法与其通用方法得到的结果相同，但少数语言(如土耳其语言)会为Unicode大小写转换应用特殊的规则，这时候就必须使用针对地区的方法来保证实现正确的转换。<br><br>一般来说，在不知道自己的代码将在那种语言环境中运行的情况下，还是使用针对地区的方法更稳妥一些。<br></font><h1 id="substr"><a href="#substr" class="headerlink" title="substr()"></a>substr()</h1><p>从起始索引号提取字符串中指定数目的字符。<br>stringObject.substr(<strong>start,length</strong>)。<br><strong>start：</strong>必需。要抽取的子串的起始下标。必须是数值。如果是负数，那么该参数声明从字符串的尾部开始算起的位置。也就是说，-1 指字符串中最后一个字符，-2 指倒数第二个字符，以此类推。<br><strong>length：</strong>可选。子串中的字符数。必须是数值。如果省略了该参数，那么返回从 stringObject 的开始位置到结尾的字串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc def&quot;</span><br><span class="line">console.log(str.substr(2))//c def</span><br><span class="line">console.log(str.substr(2,4))// c de</span><br></pre></td></tr></table></figure></p><h1 id="substring"><a href="#substring" class="headerlink" title="substring()"></a>substring()</h1><p>提取字符串中两个指定的索引号之间的字符。<br>stringObject.substring(<strong>start,stop</strong>)。<br><strong>start ：</strong>必需。一个非负的整数，规定要提取的子串的第一个字符在 stringObject 中的位置。<br><strong>stop ：</strong>可选。一个非负的整数，比要提取的子串的最后一个字符在 stringObject 中的位置多 1。如果省略该参数，那么返回的子串会一直到字符串的结尾。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str=&quot;abc def&quot;</span><br><span class="line">console.log(str.substring(2))//c def</span><br><span class="line">console.log(str.substring(2,4))// c</span><br></pre></td></tr></table></figure></p><p><strong>相同点：</strong>如果只是写一个参数，两者的作用都一样：都是是截取字符串从当前下标以后直到字符串最后的字符串片段。<br>substr(startIndex);<br>substring(startIndex);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str = &apos;123456789&apos;;</span><br><span class="line">console.log(str.substr(2));    //  &quot;3456789&quot;</span><br><span class="line">console.log(str.substring(2)) ;//  &quot;3456789&quot;</span><br></pre></td></tr></table></figure></p><p><strong>不同点：</strong>第二个参数<br>substr（startIndex,lenth）： 第二个参数是截取字符串的长度（从起始点截取某个长度的字符串）；<br>substring（startIndex, endIndex）： 第二个参数是截取字符串最终的下标 （截取2个位置之间的字符串,‘含头不含尾’）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;123456789&quot;.substr(2,5));    //  &quot;34567&quot;</span><br><span class="line">console.log(&quot;123456789&quot;.substring(2,5)) ;//  &quot;345&quot;</span><br></pre></td></tr></table></figure></p><p><br></p><font color="red" size="6">ES6新增的操作字符串的方法</font><h1 id="codePointAt"><a href="#codePointAt" class="headerlink" title="codePointAt()"></a>codePointAt()</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let s = &apos;𠮷a&apos;;</span><br><span class="line">s.codePointAt(0) // 134071</span><br><span class="line">s.codePointAt(1) // 57271</span><br><span class="line">s.codePointAt(2) // 97</span><br></pre></td></tr></table></figure><p>codePointAt方法的参数，是字符在字符串中的位置（从 0 开始）。上面代码中，JavaScript 将“𠮷a”视为三个字符，codePointAt 方法在第一个字符上，正确地识别了“𠮷”，返回了它的十进制码点 134071（即十六进制的20BB7）。在第二个字符（即“𠮷”的后两个字节）和第三个字符“a”上，codePointAt方法的结果与charCodeAt方法相同。</p><h1 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h1><p>ES5 提供String.fromCharCode方法，用于从码点返回对应字符，但是这个方法不能识别 32 位的 UTF-16 字符（Unicode 编号大于0xFFFF）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String.fromCharCode(0x20BB7)</span><br><span class="line">// &quot;ஷ&quot;</span><br></pre></td></tr></table></figure></p><p>上面代码中，String.fromCharCode不能识别大于0xFFFF的码点，所以0x20BB7就发生了溢出，最高位2被舍弃了，最后返回码点U+0BB7对应的字符，而不是码点U+20BB7对应的字符。<br>ES6 提供了String.fromCodePoint方法，可以识别大于0xFFFF的字符，弥补了String.fromCharCode方法的不足。在作用上，正好与codePointAt方法相反。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String.fromCodePoint(0x20BB7)</span><br><span class="line">// &quot;𠮷&quot;</span><br><span class="line">String.fromCodePoint(0x78, 0x1f680, 0x79) === &apos;x\uD83D\uDE80y&apos;</span><br><span class="line">// true</span><br></pre></td></tr></table></figure></p><h1 id="字符串的遍历器接口-for-of"><a href="#字符串的遍历器接口-for-of" class="headerlink" title="字符串的遍历器接口 for of"></a>字符串的遍历器接口 for of</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for (let codePoint of &apos;abc&apos;) &#123;</span><br><span class="line">  console.log(codePoint)</span><br><span class="line">&#125;</span><br><span class="line">// &quot;a&quot;</span><br><span class="line">// &quot;b&quot;</span><br><span class="line">// &quot;c&quot;</span><br></pre></td></tr></table></figure><p>除了遍历字符串，这个遍历器最大的优点是可以识别大于0xFFFF的码点，传统的for循环无法识别这样的码点。</p><h1 id="at（）"><a href="#at（）" class="headerlink" title="at（）"></a>at（）</h1><p>at方法可以识别Unicode 编号大于0xFFFF的字符，返回正确的字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;abc&apos;.at(0)//&quot;a&quot;</span><br><span class="line">&apos;吉&apos;.at(0)//&quot;吉&quot;</span><br></pre></td></tr></table></figure></p><h1 id="normalize"><a href="#normalize" class="headerlink" title="normalize()"></a>normalize()</h1><p>许多欧洲语言有语调符号和重音符号。为了表示它们，Unicode 提供了两种方法。一种是直接提供带重音符号的字符，比如Ǒ（u01D1）。另一种是提供合成符号（combining character），即原字符与重音符号的合成，两个字符合成一个字符，比如O（u004F）和ˇ（u030C）合成Ǒ（u004Fu030C）。</p><p>这两种表示方法，在视觉和语义上都等价，但是 JavaScript 不能识别。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&apos;\u01D1&apos;===&apos;\u004F\u030C&apos; //false    </span><br><span class="line">&apos;\u01D1&apos;.length // 1</span><br><span class="line">&apos;\u004F\u030C&apos;.length // 2</span><br></pre></td></tr></table></figure></p><p>上面代码表示，JavaScript 将合成字符视为两个字符，导致两种表示方法不相等。<br>ES6 提供字符串实例的normalize()方法，用来将字符的不同表示方法统一为同样的形式，这称为 Unicode 正规化。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;\u01D1&apos;.normalize() === &apos;\u004F\u030C&apos;.normalize()</span><br><span class="line">// true</span><br></pre></td></tr></table></figure></p><h1 id="includes-startsWith-endsWith"><a href="#includes-startsWith-endsWith" class="headerlink" title="includes(), startsWith(), endsWith()"></a>includes(), startsWith(), endsWith()</h1><p>传统上，JavaScript 只有indexOf方法，可以用来确定一个字符串是否包含在另一个字符串中。ES6 又提供了三种新方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**includes()**：返回布尔值，表示是否找到了参数字符串。</span><br><span class="line">**startsWith()**：返回布尔值，表示参数字符串是否在原字符串的头部。</span><br><span class="line">**endsWith()**：返回布尔值，表示参数字符串是否在原字符串的尾部。</span><br><span class="line">let s = &apos;Hello world!&apos;;    </span><br><span class="line">s.startsWith(&apos;Hello&apos;) // true</span><br><span class="line">s.endsWith(&apos;!&apos;) // true</span><br><span class="line">s.includes(&apos;o&apos;) // true</span><br></pre></td></tr></table></figure></p><p>这三个方法都支持第二个参数，表示开始搜索的位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let s = &apos;Hello world!&apos;;    </span><br><span class="line">s.startsWith(&apos;world&apos;, 6) // true</span><br><span class="line">s.endsWith(&apos;Hello&apos;, 5) // true</span><br><span class="line">s.includes(&apos;Hello&apos;, 6) // false</span><br></pre></td></tr></table></figure></p><p>上面代码表示，使用第二个参数n时，endsWith的行为与其他两个方法有所不同。它针对前n个字符，而其他两个方法针对从第n个位置直到字符串结束。</p><h1 id="repeat"><a href="#repeat" class="headerlink" title="repeat()"></a>repeat()</h1><p>repeat方法返回一个新字符串，表示将原字符串重复n次。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&apos;x&apos;.repeat(3) // &quot;xxx&quot;</span><br><span class="line">&apos;hello&apos;.repeat(2) // &quot;hellohello&quot;</span><br><span class="line">&apos;na&apos;.repeat(0) // &quot;&quot;</span><br></pre></td></tr></table></figure></p><p>参数如果是小数，会被取整。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;na&apos;.repeat(2.9) // &quot;nana&quot;</span><br></pre></td></tr></table></figure></p><p>如果repeat的参数是负数或者Infinity，会报错。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&apos;na&apos;.repeat(Infinity)</span><br><span class="line">// RangeError</span><br><span class="line">&apos;na&apos;.repeat(-1)</span><br><span class="line">// RangeError</span><br></pre></td></tr></table></figure></p><h1 id="padStart-，padEnd"><a href="#padStart-，padEnd" class="headerlink" title="padStart()，padEnd()"></a>padStart()，padEnd()</h1><p>ES2017 引入了字符串补全长度的功能。如果某个字符串不够指定长度，会在头部或尾部补全。padStart()用于头部补全，padEnd()用于尾部补全。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;x&apos;.padStart(5, &apos;ab&apos;) // &apos;ababx&apos;</span><br><span class="line">&apos;x&apos;.padStart(4, &apos;ab&apos;) // &apos;abax&apos;</span><br><span class="line"></span><br><span class="line">&apos;x&apos;.padEnd(5, &apos;ab&apos;) // &apos;xabab&apos;</span><br><span class="line">&apos;x&apos;.padEnd(4, &apos;ab&apos;) // &apos;xaba&apos;</span><br></pre></td></tr></table></figure></p><p>上面代码中，padStart和padEnd一共接受两个参数，第一个参数用来指定字符串的最小长度，第二个参数是用来补全的字符串。<br>如果原字符串的长度，等于或大于指定的最小长度，则返回原字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;xxx&apos;.padStart(2, &apos;ab&apos;) // &apos;xxx&apos;</span><br><span class="line">&apos;xxx&apos;.padEnd(2, &apos;ab&apos;) // &apos;xxx&apos;</span><br></pre></td></tr></table></figure></p><p>如果用来补全的字符串与原字符串，两者的长度之和超过了指定的最小长度，则会截去超出位数的补全字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;abc&apos;.padStart(10, &apos;0123456789&apos;)</span><br><span class="line">// &apos;0123456abc&apos;</span><br></pre></td></tr></table></figure></p><p>如果省略第二个参数，默认使用空格补全长度。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;x&apos;.padStart(4) // &apos;   x&apos;</span><br><span class="line">&apos;x&apos;.padEnd(4) // &apos;x   &apos;</span><br></pre></td></tr></table></figure></p><p>padStart的常见用途是为数值补全指定位数。下面代码生成 10 位的数值字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&apos;1&apos;.padStart(10, &apos;0&apos;) // &quot;0000000001&quot;</span><br><span class="line">&apos;12&apos;.padStart(10, &apos;0&apos;) // &quot;0000000012&quot;</span><br><span class="line">&apos;123456&apos;.padStart(10, &apos;0&apos;) // &quot;0000123456&quot;</span><br></pre></td></tr></table></figure></p><p>另一个用途是提示字符串格式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;12&apos;.padStart(10, &apos;YYYY-MM-DD&apos;) // &quot;YYYY-MM-12&quot;</span><br><span class="line">&apos;09-12&apos;.padStart(10, &apos;YYYY-MM-DD&apos;) // &quot;YYYY-09-12&quot;</span><br></pre></td></tr></table></figure></p><h1 id="matchAll"><a href="#matchAll" class="headerlink" title="matchAll()"></a>matchAll()</h1><p>matchAll方法返回一个正则表达式在当前字符串的所有匹配。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const matchIterator = str.matchAll(regExp);</span><br></pre></td></tr></table></figure></p><p>给定一个字符串和一个正则表达式，.matchAll（）为所有匹配的匹配对象返回一个迭代器。</p><h1 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h1><p>模板字符串（template string）是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。—–字符串模板，工作中用到比较多。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 普通字符串</span><br><span class="line">`In JavaScript &apos;\n&apos; is a line-feed.`</span><br><span class="line"></span><br><span class="line">// 多行字符串</span><br><span class="line">`In JavaScript this is</span><br><span class="line"> not legal.`</span><br><span class="line"></span><br><span class="line">console.log(`string text line 1</span><br><span class="line">string text line 2`);</span><br><span class="line"></span><br><span class="line">// 字符串中嵌入变量</span><br><span class="line">let name = &quot;Bob&quot;, time = &quot;today&quot;;</span><br><span class="line">`Hello $&#123;name&#125;, how are you $&#123;time&#125;?`</span><br></pre></td></tr></table></figure></p><p>上面代码中的模板字符串，都是用反引号表示。如果在模板字符串中需要使用反引号，则前面要用反斜杠转义。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let greeting = `\`Yo\` World!`;</span><br></pre></td></tr></table></figure></p><p>如果使用模板字符串表示多行字符串，所有的空格和缩进都会被保留在输出之中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;#list&apos;).html(`</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;first&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;second&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">`);</span><br></pre></td></tr></table></figure></p><p>上面代码中，所有模板字符串的空格和换行，都是被保留的，比如 ul 标签前面会有一个换行。如果你不想要这个换行，可以使用trim方法消除它。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;#list&apos;).html(`</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;first&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;second&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">`.trim());</span><br></pre></td></tr></table></figure></p><p>模板字符串中嵌入变量，需要将变量名写在${}之中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function authorize(user, action) &#123;</span><br><span class="line">  if (!user.hasPrivilege(action)) &#123;</span><br><span class="line">    throw new Error(</span><br><span class="line">      // 传统写法为</span><br><span class="line">      // &apos;User &apos;</span><br><span class="line">      // + user.name</span><br><span class="line">      // + &apos; is not authorized to do &apos;</span><br><span class="line">      // + action</span><br><span class="line">      // + &apos;.&apos;</span><br><span class="line">      `User $&#123;user.name&#125; is not authorized to do $&#123;action&#125;.`);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>大括号内部可以放入任意的 JavaScript 表达式，可以进行运算，以及引用对象属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let x = 1;</span><br><span class="line">let y = 2;</span><br><span class="line"></span><br><span class="line">`$&#123;x&#125; + $&#123;y&#125; = $&#123;x + y&#125;`</span><br><span class="line">// &quot;1 + 2 = 3&quot;</span><br><span class="line"></span><br><span class="line">`$&#123;x&#125; + $&#123;y * 2&#125; = $&#123;x + y * 2&#125;`</span><br><span class="line">// &quot;1 + 4 = 5&quot;</span><br><span class="line"></span><br><span class="line">let obj = &#123;x: 1, y: 2&#125;;</span><br><span class="line">`$&#123;obj.x + obj.y&#125;`</span><br><span class="line">// &quot;3&quot;</span><br></pre></td></tr></table></figure></p><p>模板字符串之中还能调用函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fn() &#123;</span><br><span class="line">  return &quot;Hello World&quot;;</span><br><span class="line">&#125;    </span><br><span class="line">`foo $&#123;fn()&#125; bar`</span><br><span class="line">// foo Hello World bar</span><br></pre></td></tr></table></figure></p><p>如果大括号中的值不是字符串，将按照一般的规则转为字符串。比如，大括号中是一个对象，将默认调用对象的toString方法。<br>如果模板字符串中的变量没有声明，将报错。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 变量place没有声明</span><br><span class="line">let msg = `Hello, $&#123;place&#125;`;</span><br><span class="line">// 报错</span><br></pre></td></tr></table></figure></p><p>由于模板字符串的大括号内部，就是执行 JavaScript 代码，因此如果大括号内部是一个字符串，将会原样输出。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`Hello $&#123;&apos;World&apos;&#125;`</span><br><span class="line">// &quot;Hello World&quot;</span><br></pre></td></tr></table></figure></p><p>模板字符串甚至还能嵌套。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;hljs xml&quot;&gt;//code from http://caibaojian.com/js-string.html</span><br><span class="line">`const tmpl = addrs =&gt; `</span><br><span class="line">  &lt;table&gt;</span><br><span class="line">  $&#123;addrs.map(addr =&gt; `</span><br><span class="line">    &lt;tr&gt;&lt;td&gt;$&#123;addr.first&#125;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;&lt;td&gt;$&#123;addr.last&#125;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">  `).join(&apos;&apos;)&#125;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">`;`&lt;/pre&gt;</span><br></pre></td></tr></table></figure></p><p><br></p><p><font color="red" size="2">* 声明：内容与图片均来源于网络（部分内容有修改），版权归原作者所有，如来源信息有误或侵犯权益，请联系我们删除或授权事宜。</font><br><br></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;为了以后的程序员之路可以走的更远，总结一下关于字符串的一些操作。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="JavaScript" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/JavaScript/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="前端" scheme="https://www.xiaomujin.club/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="字符串" scheme="https://www.xiaomujin.club/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
  </entry>
  
  <entry>
    <title>七天搞定node.js---第二天</title>
    <link href="https://www.xiaomujin.club/2019/08/04/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E4%BA%8C%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/08/04/学习node.js的第二天/</id>
    <published>2019-08-04T07:08:00.000Z</published>
    <updated>2019-08-14T04:42:16.534Z</updated>
    
    <content type="html"><![CDATA[<p>这是学习node.js第二天的笔记。<br><a id="more"></a></p><ul><li>代码风格</li><li>无分号<ul><li><code>(</code></li><li><code>[</code></li><li>`</li><li>最好前面补分号，避免一些问题</li><li>《编写可维护的 JavaScript》</li><li>不仅是功能，还要写的漂亮</li></ul></li><li><p>服务端渲染</p><ul><li>说白了就是在服务端使用模板引擎</li><li>模板引擎最早诞生于服务端，后来才发展到了前端</li></ul></li><li><p>服务端渲染和客户端渲染的区别</p><ul><li>客户端渲染不利于 SEO 搜索引擎优化</li><li>服务端渲染是可以被爬虫抓取到的，客户端异步渲染是很难被爬虫抓取到的</li><li>所以你会发现真正的网站既不是纯异步也不是纯服务端渲染出来的</li><li>而是两者结合来做的</li><li>例如京东的商品列表就采用的是服务端渲染，目的了为了 SEO 搜索引擎优化</li><li>而它的商品评论列表为了用户体验，而且也不需要 SEO 优化，所以采用是客户端渲染</li></ul></li></ul><h1 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h1><ul><li><a href="https://standardjs.com/" target="_blank" rel="noopener">JavaScript Standard Style</a></li><li><a href="http://airbnb.io/javascript/" target="_blank" rel="noopener">Airbnb JavaScript Style Guide</a></li></ul><h2 id="分号问题"><a href="#分号问题" class="headerlink" title="分号问题"></a>分号问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function say() &#123;</span><br><span class="line">    console.log(&apos;hello world&apos;)</span><br><span class="line">&#125;</span><br><span class="line">//say()方法后面不加分号会报一个错误：TypeError: say(...) is not a function</span><br><span class="line">say()</span><br><span class="line"></span><br><span class="line">// ;</span><br><span class="line">// (function() &#123;</span><br><span class="line">//     console.log(&apos;你好，你好&apos;)</span><br><span class="line">// &#125;)()</span><br><span class="line"></span><br><span class="line">// ;</span><br><span class="line">// [&apos;苹果&apos;, &apos;香蕉&apos;, &apos;牛奶&apos;].forEach(function(item) &#123;</span><br><span class="line">//     console.log(item)</span><br><span class="line">// &#125;)</span><br><span class="line"></span><br><span class="line">//  ` 是 EcmaScript 6 中新增的一种字符串包裹方式，叫做：模板字符串</span><br><span class="line">//  它支持换行和非常方便拼接变量</span><br><span class="line"></span><br><span class="line">;</span><br><span class="line">`hello`.toString()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//当你采用了无分号的代码风格的时候，只需要注意以下情况就不会有上面的问题了:</span><br><span class="line">//      当一行代码是以：</span><br><span class="line">//             (</span><br><span class="line">//             [</span><br><span class="line">//             `</span><br><span class="line">//             开头的时候，则在前面补上一个分号用以避免一些语法解析错误。</span><br><span class="line">// 结论：无论你的代码风格是否有分号，都建议如果一行代码是以 ( 、 [ 、 ` 开头的最好都在其前面补上分号;</span><br><span class="line">// 也有些代码是花里胡哨的，前面不用分号，而是用 ~ &amp; ！等代替分号。</span><br></pre></td></tr></table></figure><h1 id="初步实现Apache-阿帕奇-功能01"><a href="#初步实现Apache-阿帕奇-功能01" class="headerlink" title="初步实现Apache(阿帕奇)功能01"></a>初步实现Apache(阿帕奇)功能01</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">    // 1.创建 Server</span><br><span class="line">var server = http.createServer()</span><br><span class="line">    // 2.监听 Server 的 request 请求事件，设置请求处理函数</span><br><span class="line">    // 请求</span><br><span class="line">    //    处理</span><br><span class="line">    //  响应</span><br><span class="line">    //  一个请求对应一个响应，如果在一个请求的过程中，已经结束响应了，则不能重复发送响应。</span><br><span class="line">    //  没有请求就没有响应。</span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">        // console.log(req.url)</span><br><span class="line">        var wwwDir = &apos;../www&apos;</span><br><span class="line">        var url = req.url</span><br><span class="line">        if (url === &apos;/&apos;) &#123;</span><br><span class="line">            fs.readFile(wwwDir + &apos;/index.html&apos;, function(err, data) &#123;</span><br><span class="line">                // if (err) &#123;</span><br><span class="line">                //     res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">                // &#125; else&#123;</span><br><span class="line">                // &#125;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    // return 有两个作用：</span><br><span class="line">                    // 1.方法返回值</span><br><span class="line">                    // 2.阻止代码继续往后执行</span><br><span class="line">                    return res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                res.end(data)</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; else if (url === &apos;/test1&apos;) &#123;</span><br><span class="line">            fs.readFile(wwwDir + &apos;/test1.txt&apos;, function(err, data) &#123;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    return res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                res.end(data)</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; else if (url === &apos;/test2&apos;) &#123;</span><br><span class="line">            fs.readFile(wwwDir + &apos;/test2.txt&apos;, function(err, data) &#123;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    return res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                res.end(data)</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            res.end(&apos;404 Not Found  ~~~ .&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    // 3.绑定端口号，启动服务</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;running ~ ~&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="初步实现Apache功能02"><a href="#初步实现Apache功能02" class="headerlink" title="初步实现Apache功能02"></a>初步实现Apache功能02</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">    // 1.创建 Server</span><br><span class="line">var server = http.createServer()</span><br><span class="line">var wwwDir = &apos;../www&apos;</span><br><span class="line">    // 2.监听 Server 的 request 请求事件，设置请求处理函数</span><br><span class="line">    // 请求</span><br><span class="line">    //    处理</span><br><span class="line">    //  响应</span><br><span class="line">    //  一个请求对应一个响应，如果在一个请求的过程中，已经结束响应了，则不能重复发送响应。</span><br><span class="line">    //  没有请求就没有响应。</span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">        // console.log(req.url)</span><br><span class="line">        var url = req.url</span><br><span class="line"></span><br><span class="line">        var filePath = &apos;/index.html&apos;</span><br><span class="line">        if (url !== &apos;/&apos;) &#123;</span><br><span class="line">            filePath = url</span><br><span class="line">        &#125;</span><br><span class="line">        // console.log(filePath, wwwDir + filePath)</span><br><span class="line">        fs.readFile(wwwDir + filePath, function(err, data) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                return res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">            &#125;</span><br><span class="line">            res.end(data)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    // 3.绑定端口号，启动服务</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;running ~ ~&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="Apache完成目录列表渲染"><a href="#Apache完成目录列表渲染" class="headerlink" title="Apache完成目录列表渲染"></a>Apache完成目录列表渲染</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">var server = http.createServer()</span><br><span class="line"></span><br><span class="line">var wwwDir = &apos;D:/Movie/www&apos;</span><br><span class="line"></span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">    var url = req.url</span><br><span class="line">    fs.readFile(&apos;./template.html&apos;, function(err, data) &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">            return res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        // 1. 如何得到 wwwDir 目录列表中的文件名和目录名</span><br><span class="line">        //    fs.readdir</span><br><span class="line">        // 2. 如何将得到的文件名和目录名替换到 template.html 中</span><br><span class="line">        //    2.1 在 template.html 中需要替换的位置预留一个特殊的标记（就像以前使用模板引擎的标记一样）</span><br><span class="line">        //    2.2 根据 files 生成需要的 HTML 内容</span><br><span class="line">        // 只要你做了这两件事儿，那这个问题就解决了</span><br><span class="line">        fs.readdir(wwwDir, function(err, files) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                return res.end(&apos;Can not find www dir.&apos;)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 2.1 生成需要替换的内容</span><br><span class="line">            var content = &apos;&apos;</span><br><span class="line">            files.forEach(function(item) &#123;</span><br><span class="line">                // 在 EcmaScript 6 的 ` 字符串中，可以使用 $&#123;&#125; 来引用变量</span><br><span class="line">                content += `</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td data-value=&quot;apple/&quot;&gt;&lt;a class=&quot;icon dir&quot; href=&quot;/D:/Movie/www/apple/&quot;&gt;$&#123;item&#125;/&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;detailsColumn&quot; data-value=&quot;0&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td class=&quot;detailsColumn&quot; data-value=&quot;1509589967&quot;&gt;2017/11/2 上午10:32:47&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        `</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            // 2.3 替换</span><br><span class="line">            data = data.toString()</span><br><span class="line">            data = data.replace(&apos;^_^&apos;, content)</span><br><span class="line"></span><br><span class="line">            // 3. 发送解析替换过后的响应数据</span><br><span class="line">            res.end(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;running...&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">fs.readdir(&apos;D:/Movie/www&apos;, function(err, files) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">        return console.log(&apos;目录不存在&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(files)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="在-node-中使用模板引擎"><a href="#在-node-中使用模板引擎" class="headerlink" title="在 node 中使用模板引擎"></a>在 node 中使用模板引擎</h1><h3 id="模板引擎不关心内容！"><a href="#模板引擎不关心内容！" class="headerlink" title="模板引擎不关心内容！"></a>模板引擎不关心内容！</h3><ul><li>在浏览器中使用模板引擎：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;06-在浏览器中使用art-template&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    注意：在浏览器中需要引用 lib/template-web.js 文件</span><br><span class="line"></span><br><span class="line">    强调：模板引擎不关心你的字符串内容，只关心自己能认识的模板标记语法，例如 &#123;&#123;&#125;&#125;</span><br><span class="line">    &#123;&#123;&#125;&#125; 语法被称之为 mustache 语法，八字胡啊。</span><br><span class="line">   --&gt;</span><br><span class="line">    &lt;script src=&quot;node_modules/art-template/lib/template-web.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/template&quot; id=&quot;tpl&quot;&gt;</span><br><span class="line">        &lt;!DOCTYPE html&gt;</span><br><span class="line">        &lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;head&gt;</span><br><span class="line">            &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">            &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">        &lt;body&gt;</span><br><span class="line">            &lt;p&gt;大家好，我叫：&#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;我今年 &#123;&#123; age &#125;&#125; 岁了&lt;/p&gt;</span><br><span class="line">            &lt;h1&gt;我来自 &#123;&#123; province &#125;&#125;&lt;/h1&gt;</span><br><span class="line">            &lt;p&gt;我喜欢：&#123;&#123;each hobbies&#125;&#125; &#123;&#123; $value &#125;&#125; &#123;&#123;/each&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/html&gt;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        var ret = template(&apos;tpl&apos;, &#123;</span><br><span class="line">            name: &apos;Jack&apos;,</span><br><span class="line">            age: 18,</span><br><span class="line">            province: &apos;广东省&apos;,</span><br><span class="line">            hobbies: [</span><br><span class="line">                &apos;写代码&apos;,</span><br><span class="line">                &apos;唱歌&apos;,</span><br><span class="line">                &apos;打游戏&apos;</span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        console.log(ret)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><ul><li>在 node 中使用模板引擎:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">// art-template</span><br><span class="line">// art-template 不仅可以在浏览器使用，也可以在 node 中使用</span><br><span class="line"></span><br><span class="line">// 安装：</span><br><span class="line">//    npm install art-template</span><br><span class="line">//    该命令在哪执行就会把包下载到哪里。默认会下载到 node_modules 目录中</span><br><span class="line">//    node_modules 不要改，也不支持改。</span><br><span class="line"></span><br><span class="line">// 在 Node 中使用 art-template 模板引擎</span><br><span class="line">// 模板引起最早就是诞生于服务器领域，后来才发展到了前端。</span><br><span class="line">// </span><br><span class="line">// 1. 安装 npm install art-template</span><br><span class="line">// 2. 在需要使用的文件模块中加载 art-template</span><br><span class="line">//    只需要使用 require 方法加载就可以了：require(&apos;art-template&apos;)</span><br><span class="line">//    参数中的 art-template 就是你下载的包的名字</span><br><span class="line">//    也就是说你 isntall 的名字是什么，则你 require 中的就是什么</span><br><span class="line">// 3. 查文档，使用模板引擎的 API</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var template = require(&apos;art-template&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">// 这里不是浏览器</span><br><span class="line">// template(&apos;script 标签 id&apos;, &#123;对象&#125;)</span><br><span class="line"></span><br><span class="line">// var tplStr = `</span><br><span class="line">// &lt;!DOCTYPE html&gt;</span><br><span class="line">// &lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">// &lt;head&gt;</span><br><span class="line">//   &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">//   &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">// &lt;/head&gt;</span><br><span class="line">// &lt;body&gt;</span><br><span class="line">//   &lt;p&gt;大家好，我叫：&#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">//   &lt;p&gt;我今年 &#123;&#123; age &#125;&#125; 岁了&lt;/p&gt;</span><br><span class="line">//   &lt;h1&gt;我来自 &#123;&#123; province &#125;&#125;&lt;/h1&gt;</span><br><span class="line">//   &lt;p&gt;我喜欢：&#123;&#123;each hobbies&#125;&#125; &#123;&#123; $value &#125;&#125; &#123;&#123;/each&#125;&#125;&lt;/p&gt;</span><br><span class="line">// &lt;/body&gt;</span><br><span class="line">// &lt;/html&gt;</span><br><span class="line">// `</span><br><span class="line"></span><br><span class="line">fs.readFile(&apos;./tpl.html&apos;, function (err, data) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    return console.log(&apos;读取文件失败了&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">  // 默认读取到的 data 是二进制数据</span><br><span class="line">  // 而模板引擎的 render 方法需要接收的是字符串</span><br><span class="line">  // 所以我们在这里需要把 data 二进制数据转为 字符串 才可以给模板引擎使用</span><br><span class="line">  var ret = template.render(data.toString(), &#123;</span><br><span class="line">    name: &apos;Jack&apos;,</span><br><span class="line">    age: 18,</span><br><span class="line">    province: &apos;广东省&apos;,</span><br><span class="line">    hobbies: [</span><br><span class="line">      &apos;写代码&apos;,</span><br><span class="line">      &apos;唱歌&apos;,</span><br><span class="line">      &apos;打游戏&apos;</span><br><span class="line">    ],</span><br><span class="line">    title: &apos;个人信息&apos;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  console.log(ret)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="在Apache案例中加入模板引擎"><a href="#在Apache案例中加入模板引擎" class="headerlink" title="在Apache案例中加入模板引擎"></a>在Apache案例中加入模板引擎</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">var template = require(&apos;art-template&apos;)</span><br><span class="line"></span><br><span class="line">var server = http.createServer()</span><br><span class="line"></span><br><span class="line">var wwwDir = &apos;D:/Movie/www&apos;</span><br><span class="line"></span><br><span class="line">server.on(&apos;request&apos;, function (req, res) &#123;</span><br><span class="line">  var url = req.url</span><br><span class="line">  fs.readFile(&apos;./template-apache.html&apos;, function (err, data) &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">      return res.end(&apos;404 Not Found.&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">    // 1. 如何得到 wwwDir 目录列表中的文件名和目录名</span><br><span class="line">    //    fs.readdir</span><br><span class="line">    // 2. 如何将得到的文件名和目录名替换到 template.html 中</span><br><span class="line">    //    2.1 在 template.html 中需要替换的位置预留一个特殊的标记（就像以前使用模板引擎的标记一样）</span><br><span class="line">    //    2.2 根据 files 生成需要的 HTML 内容</span><br><span class="line">    // 只要你做了这两件事儿，那这个问题就解决了</span><br><span class="line">    fs.readdir(wwwDir, function (err, files) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        return res.end(&apos;Can not find www dir.&apos;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 这里只需要使用模板引擎解析替换 data 中的模板字符串就可以了</span><br><span class="line">      // 数据就是 files</span><br><span class="line">      // 然后去你的 template.html 文件中编写你的模板语法就可以了</span><br><span class="line">      var htmlStr = template.render(data.toString(), &#123;</span><br><span class="line">        title: &apos;哈哈&apos;,</span><br><span class="line">        files: files</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      // 3. 发送解析替换过后的响应数据</span><br><span class="line">      res.end(htmlStr)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000, function () &#123;</span><br><span class="line">  console.log(&apos;running...&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="服务端渲染与客户端渲染的区别"><a href="#服务端渲染与客户端渲染的区别" class="headerlink" title="服务端渲染与客户端渲染的区别"></a>服务端渲染与客户端渲染的区别</h2><p>服务端：</p><p><img src="https://xuqian.xiaomujin.club/blog/20190808/wO4UWLdfh1tk.png" alt="服务端"></p><p>客户端：</p><p><img src="https://xuqian.xiaomujin.club/blog/20190808/lpz4kjapg8oN.png" alt="客户端"></p><h1 id="url模块的使用"><a href="#url模块的使用" class="headerlink" title="url模块的使用"></a>url模块的使用</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var url = require(&apos;url&apos;)</span><br><span class="line"></span><br><span class="line">var obj = url.parse(&apos;/pinglun?name=sdfs&amp;message=dsfghdghdghd&apos;, true)</span><br><span class="line">console.log(obj)</span><br><span class="line">console.log(obj.query)</span><br></pre></td></tr></table></figure><h1 id="简单的留言功能小案例"><a href="#简单的留言功能小案例" class="headerlink" title="简单的留言功能小案例"></a>简单的留言功能小案例</h1><p>服务端：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">// app application 应用程序</span><br><span class="line">// 把当前模块所有的依赖项都声明在文件模块最上面</span><br><span class="line">// 为了让目录结构保持统一清晰，所以我们约定，把所有的 HTML 文件都放到 views（视图） 目录中</span><br><span class="line">// 我们为了方便的统一处理这些静态资源，所以我们约定把所有的静态资源都存放在 public 目录中</span><br><span class="line">// 哪些资源能被用户访问，哪些资源不能被用户访问，我现在可以通过代码来进行非常灵活的控制</span><br><span class="line">// / index.html</span><br><span class="line">// /public 整个 public 目录中的资源都允许被访问</span><br><span class="line">// 前后端融会贯通了，为所欲为</span><br><span class="line"></span><br><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">var url = require(&apos;url&apos;)</span><br><span class="line">var template = require(&apos;art-template&apos;)</span><br><span class="line">var comments = [&#123;</span><br><span class="line">        name: &apos;木槿&apos;,</span><br><span class="line">        message: &apos;今天天气不错！&apos;,</span><br><span class="line">        dateTime: &apos;2019-08-14&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &apos;木槿2&apos;,</span><br><span class="line">        message: &apos;今天天气不错！&apos;,</span><br><span class="line">        dateTime: &apos;2019-08-14&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &apos;木槿3&apos;,</span><br><span class="line">        message: &apos;今天天气不错！&apos;,</span><br><span class="line">        dateTime: &apos;2019-08-14&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &apos;木槿4&apos;,</span><br><span class="line">        message: &apos;今天天气不错！&apos;,</span><br><span class="line">        dateTime: &apos;2019-08-14&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: &apos;木槿5&apos;,</span><br><span class="line">        message: &apos;今天天气不错！&apos;,</span><br><span class="line">        dateTime: &apos;2019-08-14&apos;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">http</span><br><span class="line">    .createServer(function(req, res) &#123;</span><br><span class="line">        // 使用 url.parse 方法将路径解析为一个方便操作的对象，第二个参数为 true 表示直接将查询字符串转为一个对象（通过 query 属性来访问）</span><br><span class="line">        var parseObj = url.parse(req.url, true)</span><br><span class="line"></span><br><span class="line">        // 单独获取不包含查询字符串的路径部分（该路径不包含 ? 之后的内容）</span><br><span class="line">        var pathname = parseObj.pathname</span><br><span class="line"></span><br><span class="line">        if (pathname === &apos;/&apos;) &#123;</span><br><span class="line">            fs.readFile(&apos;./views/index.html&apos;, function(err, data) &#123;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    return res.end(&apos;404 Not Founf.&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                var htmlStr = template.render(data.toString(), &#123;</span><br><span class="line">                    comments: comments</span><br><span class="line">                &#125;)</span><br><span class="line">                res.end(htmlStr)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; else if (pathname === &apos;/post&apos;) &#123;</span><br><span class="line">            fs.readFile(&apos;./views/post.html&apos;, function(err, data) &#123;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    return res.end(&apos;404 Not Found ~&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                res.end(data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; else if (pathname.indexOf(&apos;/public/&apos;) === 0) &#123;</span><br><span class="line">            //  /public/css/main.css</span><br><span class="line">            //  /public/js/main.js</span><br><span class="line">            //  /publis/lib/jquery.js</span><br><span class="line">            // 统一处理</span><br><span class="line">            //    如果请求路径是以 /public/开头的，则我认为你获取 public 中的某个资源</span><br><span class="line">            //    所以我们就直接可以把请求路径当作文件路径来直接进行读取</span><br><span class="line">            fs.readFile(&apos;.&apos; + pathname, function(err, data) &#123;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    return res.end(&apos;404 Not Founf.&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                res.end(data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; else if (pathname === &apos;/pinglun&apos;) &#123;</span><br><span class="line">            // 注意：这个时候无论 /pinglun?xxx 之后是什么，都不用担心了，因为我的 pathname 是不包含 ? 之后的那个路径</span><br><span class="line">            // 一次请求对应一次响应，响应结束这次请求也就结束了</span><br><span class="line">            // console.log(&apos;收到表单请求了~&apos;, parseObj.query)</span><br><span class="line"></span><br><span class="line">            // res.end(JSON.stringify(parseObj.query))</span><br><span class="line"></span><br><span class="line">            // 我们已经使用 url 模块的 parse 方法把请求路径中的查询字符串给解析成一个对象了</span><br><span class="line">            // 所以接下来要做的就是：</span><br><span class="line">            //    1. 获取表单提交的数据 parseObj.query</span><br><span class="line">            //    2. 将当前时间日期添加到数据对象中，然后存储到数组中</span><br><span class="line">            //    3. 让用户重定向跳转到首页 /</span><br><span class="line">            //       当用户重新请求 / 的时候，我数组中的数据已经发生变化了，所以用户看到的页面也就变了</span><br><span class="line">            var comment = parseObj.query</span><br><span class="line">            comment.dateTime = &apos;2019-08-14&apos;</span><br><span class="line">            comments.unshift(comment)</span><br><span class="line">                // 服务端这个时候已经把数据存储好了，接下来就是让用户重新请求 / 首页，就可以看到最新的留言内容了</span><br><span class="line"></span><br><span class="line">            // 如何通过服务器让客户端重定向？</span><br><span class="line">            //    1. 状态码设置为 302 临时重定向</span><br><span class="line">            //        statusCode</span><br><span class="line">            //    2. 在响应头中通过 Location 告诉客户端往哪儿重定向</span><br><span class="line">            //        setHeader</span><br><span class="line">            // 如果客户端发现收到服务器的响应的状态码是 302 就会自动去响应头中找 Location ，然后对该地址发起新的请求</span><br><span class="line">            // 所以你就能看到客户端自动跳转了</span><br><span class="line">            res.statusCode = 302</span><br><span class="line">            res.setHeader(&apos;Location&apos;, &apos;/&apos;)</span><br><span class="line">            res.end()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            fs.readFile(&apos;./views/404.html&apos;, function(err, data) &#123;</span><br><span class="line">                if (err) &#123;</span><br><span class="line">                    return res.end(&apos;404 Not Found ~&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">                res.end(data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .listen(3000, function() &#123;</span><br><span class="line">        console.log(&apos;running...&apos;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p><p>客户端：</p><p>评论列表页面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;留言本&lt;/title&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    浏览器收到 HTML 响应内容之后，就要开始从上到下依次解析，</span><br><span class="line">    当在解析的过程中，如果发现：</span><br><span class="line">      link</span><br><span class="line">      script</span><br><span class="line">      img</span><br><span class="line">      iframe</span><br><span class="line">      video</span><br><span class="line">      audio</span><br><span class="line">    等带有 src 或者 href（link） 属性标签（具有外链的资源）的时候，浏览器会自动对这些资源发起新的请求。</span><br><span class="line">   --&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">      注意：在服务端中，文件中的路径就不要去写相对路径了。</span><br><span class="line">      因为这个时候所有的资源都是通过 url 标识来获取的</span><br><span class="line">      我的服务器开放了 /public/ 目录</span><br><span class="line">      所以这里的请求路径都写成：/public/xxx</span><br><span class="line">      / 在这里就是 url 根路径的意思。</span><br><span class="line">      浏览器在真正发请求的时候会最终把 http://127.0.0.1:3000 拼上</span><br><span class="line"></span><br><span class="line">      不要再想文件路径了，把所有的路径都想象成 url 地址</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/public/lib/bootstrap/dist/css/bootstrap.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!-- &lt;img src=&quot;/public/img/ab3.jpg&quot; alt=&quot;&quot;&gt; --&gt;</span><br><span class="line">    &lt;div class=&quot;header container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">            &lt;h1&gt;Example page header &lt;small&gt;Subtext for header&lt;/small&gt;&lt;/h1&gt;</span><br><span class="line">            &lt;a class=&quot;btn btn-success&quot; href=&quot;/post&quot;&gt;发表留言&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;comments container&quot;&gt;</span><br><span class="line">        &lt;ul class=&quot;list-group&quot;&gt;</span><br><span class="line">            &#123;&#123;each comments&#125;&#125;</span><br><span class="line">            &lt;li class=&quot;list-group-item&quot;&gt;&#123;&#123; $value.name &#125;&#125;说：&#123;&#123; $value.message &#125;&#125; &lt;span class=&quot;pull-right&quot;&gt;&#123;&#123; $value.dateTime &#125;&#125;&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">            &#123;&#123;/each&#125;&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>发表评论页面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;发表评论&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/public/lib/bootstrap/dist/css/bootstrap.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;header container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;page-header&quot;&gt;</span><br><span class="line">            &lt;h1&gt;&lt;a href=&quot;/&quot;&gt;首页&lt;/a&gt; &lt;small&gt;发表评论&lt;/small&gt;&lt;/h1&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;comments container&quot;&gt;</span><br><span class="line">        &lt;!-- </span><br><span class="line">      以前表单是如何提交的？</span><br><span class="line">      表单中需要提交的表单控件元素必须具有 name 属性</span><br><span class="line">      表单提交分为：</span><br><span class="line">        1. 默认的提交行为</span><br><span class="line">        2. 表单异步提交</span><br><span class="line"></span><br><span class="line">        action 就是表单提交的地址，说白了就是请求的 url 地址</span><br><span class="line">        method 请求方法</span><br><span class="line">            get</span><br><span class="line">            post</span><br><span class="line">     --&gt;</span><br><span class="line">        &lt;form action=&quot;/pinglun&quot; method=&quot;get&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;label for=&quot;input_name&quot;&gt;你的大名&lt;/label&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; class=&quot;form-control&quot; required minlength=&quot;2&quot; maxlength=&quot;10&quot; id=&quot;input_name&quot; name=&quot;name&quot; placeholder=&quot;请写入你的姓名&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;form-group&quot;&gt;</span><br><span class="line">                &lt;label for=&quot;textarea_message&quot;&gt;留言内容&lt;/label&gt;</span><br><span class="line">                &lt;textarea class=&quot;form-control&quot; name=&quot;message&quot; id=&quot;textarea_message&quot; cols=&quot;30&quot; rows=&quot;10&quot; required minlength=&quot;5&quot; maxlength=&quot;20&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;发表&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>404 页面：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;抱歉!  您访问的页面失联啦...&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这是学习node.js第二天的笔记。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>用CSS实现弹跳动画</title>
    <link href="https://www.xiaomujin.club/2019/08/03/CSS%E5%BC%B9%E8%B7%B3%E5%8A%A8%E7%94%BB/"/>
    <id>https://www.xiaomujin.club/2019/08/03/CSS弹跳动画/</id>
    <published>2019-08-03T10:30:00.000Z</published>
    <updated>2019-08-03T11:00:45.340Z</updated>
    
    <content type="html"><![CDATA[<p>这是只用了一个div来做的小动画，纯粹利用CSS3的animation来完成，就像是一个正方形在地上弹跳，碰到地面的时候尖角还会压缩变圆，阴影的部分也会随着正方形升高而缩小，至于到底该怎么完成呢？让我们继续看下去。<br><a id="more"></a></p><h1 id="利用伪元素"><a href="#利用伪元素" class="headerlink" title="利用伪元素"></a>利用伪元素</h1><p>由于只使用了一个div，要同时达到正方形旋转与阴影缩放的效果，这里必须使用两个伪元素（before与after）来完成，严格来说，虽然只有一个div，但是却是把这个div当作外框，让伪元素before作为旋转的正方形，让伪元素after作为阴影。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  position:relative;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.box:before&#123;</span><br><span class="line">  content:&apos;&apos;;</span><br><span class="line">  position:absolute;</span><br><span class="line">  z-index:2;</span><br><span class="line">  top:60px;</span><br><span class="line">  left:50px;</span><br><span class="line">  width:50px;</span><br><span class="line">  height:50px;</span><br><span class="line">  background:#c00;</span><br><span class="line">  border-radius:2px;</span><br><span class="line">  transform: rotate(45deg);</span><br><span class="line">&#125;</span><br><span class="line">.box:after&#123;</span><br><span class="line">  content:&apos;&apos;;</span><br><span class="line">  position:absolute;</span><br><span class="line">  z-index:1;</span><br><span class="line">  top:128px;</span><br><span class="line">  left:52px;</span><br><span class="line">  width:44px;</span><br><span class="line">  height:3px;</span><br><span class="line">  background:#eaeaea;</span><br><span class="line">  border-radius:100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://xuqian.xiaomujin.club/blog/20190803/DDpeyhWbRNKB.png" alt="大概画出"></p><h1 id="CSS动画"><a href="#CSS动画" class="headerlink" title="CSS动画"></a>CSS动画</h1><p>画出正方形与阴影之后，再来就是要做动画了，为了避免太过复杂，这里我们先不要旋转，先单纯让正方形上下跳动，然后阴影会放大缩小，下面的示例的动画，又新增了20%与80%的keyframe，目的是为了让接触的时候角落才会变圆，不然就会变成刚开始移动时尖角就变圆，就会很怪异了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">.box:before&#123;</span><br><span class="line">  content:&apos;&apos;;</span><br><span class="line">  position:absolute;</span><br><span class="line">  z-index:2;</span><br><span class="line">  top:60px;</span><br><span class="line">  left:50px;</span><br><span class="line">  width:50px;</span><br><span class="line">  height:50px;</span><br><span class="line">  background:#c00;</span><br><span class="line">  border-radius:2px;</span><br><span class="line">  transform: rotate(45deg);</span><br><span class="line">  -webkit-animation:box .8s infinite ; </span><br><span class="line">&#125;</span><br><span class="line">@-webkit-keyframes box&#123;</span><br><span class="line">  0%&#123;</span><br><span class="line">    top:50px;</span><br><span class="line">  &#125;</span><br><span class="line">  20%&#123;</span><br><span class="line">    border-radius:2px;  /*从20%的地方才开始变形*/</span><br><span class="line">  &#125;</span><br><span class="line">  50%&#123;</span><br><span class="line">    top:80px; </span><br><span class="line">    border-bottom-right-radius:25px;</span><br><span class="line">  &#125;</span><br><span class="line">  80%&#123;</span><br><span class="line">    border-radius:2px;  /*到80%的地方恢复原状*/</span><br><span class="line">  &#125;</span><br><span class="line">  100%&#123;</span><br><span class="line">    top:50px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.box:after&#123;</span><br><span class="line">  content:&apos;&apos;;</span><br><span class="line">  position:absolute;</span><br><span class="line">  z-index:1;</span><br><span class="line">  top:128px;</span><br><span class="line">  left:52px;</span><br><span class="line">  width:44px;</span><br><span class="line">  height:3px;</span><br><span class="line">  background:#eaeaea;</span><br><span class="line">  border-radius:100%;</span><br><span class="line">  -webkit-animation:shadow .8s infinite ; </span><br><span class="line">&#125;</span><br><span class="line">@-webkit-keyframes shadow&#123;</span><br><span class="line">  0%,100%&#123;</span><br><span class="line">    left:54px;</span><br><span class="line">    width:40px;</span><br><span class="line">    background:#eaeaea;</span><br><span class="line">  &#125;</span><br><span class="line">  50%&#123;</span><br><span class="line">    top:126px;</span><br><span class="line">    left:50px;   /*让阴影保持在原位*/</span><br><span class="line">    width:50px;</span><br><span class="line">    height:7px;</span><br><span class="line">    background:#eee;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://xuqian.xiaomujin.club/640.gif" alt="css动画"></p><h1 id="加入旋转效果"><a href="#加入旋转效果" class="headerlink" title="加入旋转效果"></a>加入旋转效果</h1><p>了解原理之后，我们只要再加上旋转的属性，就可以达到弹跳起来的时候有旋转的效果，不过这里又有用到一个小技巧，就是落下的时候是90度转到45度，弹上去的时候从45旋转到0度，然后在这一瞬间从0度变成90度（100%到0%），如此一来我们就会产生错觉，感觉好像一直在旋转了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@-webkit-keyframes box&#123;</span><br><span class="line">  0%&#123;</span><br><span class="line">    top:50px;</span><br><span class="line">    transform: rotate(-90deg); /**/</span><br><span class="line">  &#125;</span><br><span class="line">  20%&#123;</span><br><span class="line">    border-radius:2px;</span><br><span class="line">  &#125;</span><br><span class="line">  50%&#123;</span><br><span class="line">    top:80px; </span><br><span class="line">    transform: rotate(45deg);</span><br><span class="line">    border-bottom-right-radius:25px;</span><br><span class="line">  &#125;</span><br><span class="line">  80%&#123;</span><br><span class="line">    border-radius:2px;</span><br><span class="line">  &#125;</span><br><span class="line">  100%&#123;</span><br><span class="line">    top:50px;</span><br><span class="line">    transform: rotate(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="https://xuqian.xiaomujin.club/640%20%281%29.gif" alt="加入旋转效果"></p><p>完整项目代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;css3弹跳动画&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .box &#123;</span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line">        /* 简单画出大概 */</span><br><span class="line">        /* .box:before &#123;</span><br><span class="line">            content: &apos;&apos;;</span><br><span class="line">            position: absolute;</span><br><span class="line">            z-index: 2;</span><br><span class="line">            top: 60px;</span><br><span class="line">            left: 50px;</span><br><span class="line">            width: 50px;</span><br><span class="line">            height: 50px;</span><br><span class="line">            background: #c00;</span><br><span class="line">            border-radius: 2px;</span><br><span class="line">            transform: rotate(45deg);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .box:after &#123;</span><br><span class="line">            content: &apos;&apos;;</span><br><span class="line">            position: absolute;</span><br><span class="line">            z-index: 1;</span><br><span class="line">            top: 128px;</span><br><span class="line">            left: 52px;</span><br><span class="line">            width: 44px;</span><br><span class="line">            height: 3px;</span><br><span class="line">            background: #eaeaea;</span><br><span class="line">            border-radius: 100%;</span><br><span class="line">        &#125; */</span><br><span class="line">        /* 跳动 */</span><br><span class="line">        </span><br><span class="line">        .box:before &#123;</span><br><span class="line">            content: &apos;&apos;;</span><br><span class="line">            position: absolute;</span><br><span class="line">            z-index: 2;</span><br><span class="line">            top: 60px;</span><br><span class="line">            left: 50px;</span><br><span class="line">            width: 50px;</span><br><span class="line">            height: 50px;</span><br><span class="line">            background: #c00;</span><br><span class="line">            border-radius: 2px;</span><br><span class="line">            transform: rotate(45deg);</span><br><span class="line">            -webkit-animation: box .8s infinite;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        @-webkit-keyframes box &#123;</span><br><span class="line">            0% &#123;</span><br><span class="line">                top: 50px;</span><br><span class="line">            &#125;</span><br><span class="line">            20% &#123;</span><br><span class="line">                border-radius: 2px;</span><br><span class="line">                /*从20%的地方才开始变形*/</span><br><span class="line">            &#125;</span><br><span class="line">            50% &#123;</span><br><span class="line">                top: 80px;</span><br><span class="line">                border-bottom-right-radius: 25px;</span><br><span class="line">            &#125;</span><br><span class="line">            80% &#123;</span><br><span class="line">                border-radius: 2px;</span><br><span class="line">                /*到80%的地方恢复原状*/</span><br><span class="line">            &#125;</span><br><span class="line">            100% &#123;</span><br><span class="line">                top: 50px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        .box:after &#123;</span><br><span class="line">            content: &apos;&apos;;</span><br><span class="line">            position: absolute;</span><br><span class="line">            z-index: 1;</span><br><span class="line">            top: 128px;</span><br><span class="line">            left: 52px;</span><br><span class="line">            width: 44px;</span><br><span class="line">            height: 3px;</span><br><span class="line">            background: #eaeaea;</span><br><span class="line">            border-radius: 100%;</span><br><span class="line">            -webkit-animation: shadow .8s infinite;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        @-webkit-keyframes shadow &#123;</span><br><span class="line">            0%,</span><br><span class="line">            100% &#123;</span><br><span class="line">                left: 54px;</span><br><span class="line">                width: 40px;</span><br><span class="line">                background: #eaeaea;</span><br><span class="line">            &#125;</span><br><span class="line">            50% &#123;</span><br><span class="line">                top: 126px;</span><br><span class="line">                left: 50px;</span><br><span class="line">                /*让阴影保持在原位*/</span><br><span class="line">                width: 50px;</span><br><span class="line">                height: 7px;</span><br><span class="line">                background: #eee;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        /* 加入旋转 */</span><br><span class="line">        </span><br><span class="line">        @-webkit-keyframes box &#123;</span><br><span class="line">            0% &#123;</span><br><span class="line">                top: 50px;</span><br><span class="line">                transform: rotate(-90deg);</span><br><span class="line">                /**/</span><br><span class="line">            &#125;</span><br><span class="line">            20% &#123;</span><br><span class="line">                border-radius: 2px;</span><br><span class="line">            &#125;</span><br><span class="line">            50% &#123;</span><br><span class="line">                top: 80px;</span><br><span class="line">                transform: rotate(45deg);</span><br><span class="line">                border-bottom-right-radius: 25px;</span><br><span class="line">            &#125;</span><br><span class="line">            80% &#123;</span><br><span class="line">                border-radius: 2px;</span><br><span class="line">            &#125;</span><br><span class="line">            100% &#123;</span><br><span class="line">                top: 50px;</span><br><span class="line">                transform: rotate(0deg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这是只用了一个div来做的小动画，纯粹利用CSS3的animation来完成，就像是一个正方形在地上弹跳，碰到地面的时候尖角还会压缩变圆，阴影的部分也会随着正方形升高而缩小，至于到底该怎么完成呢？让我们继续看下去。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="css" scheme="https://www.xiaomujin.club/categories/css/"/>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/css/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/css/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="css" scheme="https://www.xiaomujin.club/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>12个令人惊叹的 CSS 项目</title>
    <link href="https://www.xiaomujin.club/2019/08/02/12%E4%B8%AA%E4%BB%A4%E4%BA%BA%E6%83%8A%E5%8F%B9%E7%9A%84%20CSS%20%E9%A1%B9%E7%9B%AE/"/>
    <id>https://www.xiaomujin.club/2019/08/02/12个令人惊叹的 CSS 项目/</id>
    <published>2019-08-02T07:30:00.000Z</published>
    <updated>2019-08-14T05:46:45.251Z</updated>
    
    <content type="html"><![CDATA[<p>或许，你认为 CSS 只能用来控制网页的结构与样式，但它的功能和应用却超乎你的想象。从逼真的图像到特效动画，优秀的开发者利用它已创造了无数种可能。<br>在本文中，我们精选了纯 CSS 实现的滤镜以及各种效果，与大家分享。它们都是开源的网页设计相关项目。除了体验之外，有兴趣的话，你还可以尝试来实现它们。<br><a id="more"></a></p><h1 id="1-Solar-System"><a href="#1-Solar-System" class="headerlink" title="1.Solar System"></a>1.Solar System</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/DkNk4Os7toIm.png" alt="Solar System"><br>如果你对太空场景情有独钟，那么一定会被这个 CSS 实现的太阳系动画所震撼。作为空间学与物理学爱好者，作者参照了太阳系轨道运行的真实时间进行设计，意味着每个行星都有相对地球年的时间，准确的围绕太阳公转。</p><blockquote><p>项目地址：<a href="https://codepen.io/kowlor/pen/ZYYQoy" target="_blank" rel="noopener">https://codepen.io/kowlor/pen/ZYYQoy</a></p></blockquote><h1 id="2-Gradient-Background-Animation"><a href="#2-Gradient-Background-Animation" class="headerlink" title="2.Gradient Background Animation"></a>2.Gradient Background Animation</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/ONHXQAwh1YpW.png" alt="Gradient Background Animation"><br>对于网站性能来说，动画是众人皆知的问题引发者。如果优化不佳，它们会直接影响页面的打开速度。而这个 CSS 实现的漂亮的渐变动画，却相当的轻量，不仅易于编辑，而且支持自定义颜色。</p><blockquote><p>项目地址：<a href="https://codepen.io/P1N2O/pen/pyBNzX" target="_blank" rel="noopener">https://codepen.io/P1N2O/pen/pyBNzX</a></p></blockquote><h1 id="3-Stack-Game"><a href="#3-Stack-Game" class="headerlink" title="3.Stack Game"></a>3.Stack Game</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/UwtGdIgFRoe7.png" alt="Stack Game"><br>实现一款简单的游戏，并不一定需要 JS 的帮助，纯 CSS 也能够创造一款界面漂亮的 Stack 游戏。当然，游戏看似容易，背后的设计并非那么简单。</p><blockquote><p>项目地址：<a href="https://codepen.io/finnhvman/pen/xJRMJp" target="_blank" rel="noopener">https://codepen.io/finnhvman/pen/xJRMJp</a></p></blockquote><h1 id="4-3D-Progress-Bars"><a href="#4-3D-Progress-Bars" class="headerlink" title="4.3D Progress Bars"></a>4.3D Progress Bars</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/XEReYsnxLyb9.png" alt="3D Progress Bars"><br>这是一款漂亮、轻量、易于定制的进度条开源项目。进度条采用 3D 制作，同时拥有清澈的外观，你甚至可以将它们变成迷你 3D 图表！</p><blockquote><p>项目地址：<a href="https://codepen.io/rgg/pen/QbRyOq" target="_blank" rel="noopener">https://codepen.io/rgg/pen/QbRyOq</a></p></blockquote><h1 id="5-Glitched-Text"><a href="#5-Glitched-Text" class="headerlink" title="5.Glitched Text"></a>5.Glitched Text</h1><p><img src="https://xuqian.xiaomujin.club/v2-9958229013ad6b5eeb156fe380f758cc_b.gif" alt="Glitched Text"><br>故障风格的文本总会让人有眼前一亮的感觉，而这个项目就是纯 CSS 实现的故障效果。如果你想为网站增添酷炫的故障效果，那么不妨多了解下。</p><blockquote><p>项目地址：<a href="https://codepen.io/lbebber/pen/ypgql" target="_blank" rel="noopener">https://codepen.io/lbebber/pen/ypgql</a></p></blockquote><h1 id="6-Francine"><a href="#6-Francine" class="headerlink" title="6.Francine"></a>6.Francine</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/4Kgb3LSw3HdP.png" alt="Francine"><br>CSS 的能量超乎你想象，你甚至还可以利用它制作出艺术品效果。Francine 就是一个纯 CSS 制作、展示的 18 世纪风格的绘画作品。或许，你会惊讶 CSS 实现的效果竟能如此逼真。</p><blockquote><p>项目地址：<a href="https://github.com/cyanharlow/purecss-francine" target="_blank" rel="noopener">https://github.com/cyanharlow/purecss-francine</a></p></blockquote><h1 id="7-Mobile-Phone"><a href="#7-Mobile-Phone" class="headerlink" title="7.Mobile Phone"></a>7.Mobile Phone</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/Vs5mIpUDPBoS.png" alt="Mobile Phone"><br>这个项目与《Francine》有异曲同工之处，它仅使用 CSS 和 HTML 便实现了手机界面效果，而且效果可以同网站照片相媲美。如果你有兴趣，可详细的了解其实现的过程。</p><blockquote><p>项目地址：<a href="https://codepen.io/Wujek_Greg/pen/LmrweG" target="_blank" rel="noopener">https://codepen.io/Wujek_Greg/pen/LmrweG</a></p></blockquote><h1 id="8-Map-Creator"><a href="#8-Map-Creator" class="headerlink" title="8.Map Creator"></a>8.Map Creator</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/oCCLWNK4TQOJ.png" alt="Map Creator"><br>利用 JS 创造一个简单的 3D 地图？不用那么复杂，纯 CSS 就可以搞定。怎么样，看上去还不错吧！</p><blockquote><p>项目地址：<a href="https://codepen.io/onediv/pen/NrNebj" target="_blank" rel="noopener">https://codepen.io/onediv/pen/NrNebj</a></p></blockquote><h1 id="9-Instagram-css"><a href="#9-Instagram-css" class="headerlink" title="9.Instagram.css"></a>9.Instagram.css</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/WJhXSFRBeL2m.png" alt="Instagram.css"><br>想为你的网站添加一些 Instagram 风格的图片滤镜效果？那么，纯 CSS 实现的 InstagInstagram.cssram 风格的滤镜库 —— Instagram.css 一定是你的菜。它的灵感来源于 CSSgram.</p><blockquote><p>项目地址：<a href="https://picturepan2.github.io/instagram.css/" target="_blank" rel="noopener">https://picturepan2.github.io/instagram.css/</a></p></blockquote><h1 id="10-Animated-Gradient-Ghost-Button"><a href="#10-Animated-Gradient-Ghost-Button" class="headerlink" title="10.Animated Gradient Ghost Button"></a>10.Animated Gradient Ghost Button</h1><p><img src="https://xuqian.xiaomujin.club/button.gif" alt="Animated Gradient Ghost Button"><br>这是一个纯 CSS 实现的渐变幽灵按钮。漂亮的动画和渐变效果，是不是很酷呢？相信，它可以很好的融入到任何网站之中。</p><blockquote><p>项目地址：<a href="https://codepen.io/ARS/pen/vEwEPP" target="_blank" rel="noopener">https://codepen.io/ARS/pen/vEwEPP</a></p></blockquote><h1 id="11-Devices-css"><a href="#11-Devices-css" class="headerlink" title="11.Devices.css"></a>11.Devices.css</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/TGlUE5yinfA4.png" alt="Devices.css"><br>如果你想在网站增添 iPhone X、iPhone 8 等移动设备用于展示的话，那么一定不要错过 Devices.css. 它是一个使用了纯 CSS 实现主流移动设备的库，并以现代设备为模版。</p><blockquote><p>项目地址：<a href="https://picturepan2.github.io/devices.css/" target="_blank" rel="noopener">https://picturepan2.github.io/devices.css/</a></p></blockquote><h1 id="12-Dynamic-Image-Colorizing"><a href="#12-Dynamic-Image-Colorizing" class="headerlink" title="12.Dynamic Image Colorizing"></a>12.Dynamic Image Colorizing</h1><p><img src="https://xuqian.xiaomujin.club/blog/20190802/Ih5ouLhC2RQY.png" alt="Dynamic Image Colorizing"><br>这是一个很酷的纯 CSS 实现的项目。你只需要通过电脑自带的选色器，就能轻松地更换图像的颜色，来试试吧！</p><blockquote><p>项目地址：<a href="https://codepen.io/noahblon/pen/ZbjmbK" target="_blank" rel="noopener">https://codepen.io/noahblon/pen/ZbjmbK</a></p></blockquote><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>利用 JS，我们能实现各种让人惊叹的页面/动画效果，但 JS 并不是最轻量的解决方案。如果合理使用 CSS，你依然可以实现一些炫酷的效果，并且它对性能的影响会小得多。当然，无论你使用哪种方式（JS or CSS），你都可以创造出创意且有趣的作品。</p><p><strong>注：</strong><br>本文版权归原作者所有，仅用于学习与交流；如需转载，烦请按下方注明出处信息，谢谢！<br>英文原文：<a href="https://1stwebdesigner.com/12-incredible-pure-css-experiments/" target="_blank" rel="noopener">12 Incredible Pure CSS Experiments</a> 里面还有很多有趣的项目<br>作者：Brenda Stokes Barron<br>搬运：莫子谦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;或许，你认为 CSS 只能用来控制网页的结构与样式，但它的功能和应用却超乎你的想象。从逼真的图像到特效动画，优秀的开发者利用它已创造了无数种可能。&lt;br&gt;在本文中，我们精选了纯 CSS 实现的滤镜以及各种效果，与大家分享。它们都是开源的网页设计相关项目。除了体验之外，有兴趣的话，你还可以尝试来实现它们。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="css" scheme="https://www.xiaomujin.club/categories/css/"/>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/css/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/css/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="壮观" scheme="https://www.xiaomujin.club/categories/css/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%A3%AE%E8%A7%82/"/>
    
    
      <category term="css" scheme="https://www.xiaomujin.club/tags/css/"/>
    
      <category term="特效" scheme="https://www.xiaomujin.club/tags/%E7%89%B9%E6%95%88/"/>
    
      <category term="值得欣赏" scheme="https://www.xiaomujin.club/tags/%E5%80%BC%E5%BE%97%E6%AC%A3%E8%B5%8F/"/>
    
  </entry>
  
  <entry>
    <title>七天搞定node.js---第一天</title>
    <link href="https://www.xiaomujin.club/2019/08/01/%E5%AD%A6%E4%B9%A0node.js%E7%9A%84%E7%AC%AC%E4%B8%80%E5%A4%A9/"/>
    <id>https://www.xiaomujin.club/2019/08/01/学习node.js的第一天/</id>
    <published>2019-08-01T12:00:00.000Z</published>
    <updated>2019-08-04T08:34:19.871Z</updated>
    
    <content type="html"><![CDATA[<p>最近在学习node.js，记录一下自己的学习过程和一些笔记。<br><a id="more"></a></p><h1 id="node-js介绍"><a href="#node-js介绍" class="headerlink" title="node.js介绍"></a>node.js介绍</h1><h2 id="为什么要学习node-js"><a href="#为什么要学习node-js" class="headerlink" title="为什么要学习node.js"></a>为什么要学习node.js</h2><ul><li>企业需求<ul><li>具有服务端开发经验更好</li><li>font-end</li><li>back-end</li><li>全栈开发工程师<ul><li>全干</li></ul></li><li>基本的网络开发能力<ul><li>服务端</li><li>前端</li><li>运维部署</li></ul></li><li>多人社区</li></ul></li><li>node.js是什么<ul><li>JavaScript 运行时</li><li>既不是语言，也不是框架，它是一个平台</li></ul></li><li>node.js 中的 JavaScript<ul><li>没有BOM、DOM</li><li>EcmaScript基本的JavaScript</li><li>在 node 中为 JavaScript 提供了一些服务器级别的 API<ul><li>文件操作的能力</li><li>http 服务的能力</li></ul></li></ul></li><li>模块系统<ul><li>在 node 中没有全局作用域的概念</li><li>在 node 中只能通过 require 方法来加载执行多个 JavaScript 脚本文件</li><li>require 加载只能是执行其中的代码,文件与文件之间由于是模块作用域，所以不会有污染的问题。<ul><li>模块完全是封闭的</li><li>外部无法访问内部</li><li>内部也无法访问外部</li></ul></li><li>模块作用域固然带来了一些好处，可以加载执行多个文件，可以完全避免变量名冲突的问题。</li><li>但是某些情况下，模块与模块是需要进行通信的</li><li>在每一个模块中，都提供了一个对象：<code>exports</code></li><li>该对象默认是一个空对象</li><li>你要做的就是把需要被外部访问使用的成员手动的挂载到<code>exports</code>接口对象中</li><li>然后谁来<code>require</code>这个模块，谁就可以得到模块内部的<code>exports</code>接口对象</li></ul></li><li>核心模块<ul><li>核心模块是由 node 提供的一个个的具名的模块，它们都有自己特殊的名称表示，例如<ul><li>fs 文件操作模块</li><li>http 网络服务构建模块</li><li>os 操作系统信息模块</li><li>path 路径处理模块</li><li>……</li></ul></li><li>所有核心模块在使用的时候都必须手动的先使用<code>require</code>方法来加载，然后才可以使用，例如：<ul><li><code>var fs = require(&#39;fs&#39;)</code></li></ul></li></ul></li><li>http <ul><li>require</li><li>端口号<ul><li>ip 地址定位计算机</li><li>端口号定位具体的应用程序</li></ul></li><li>Content-Type</li><li>通过网络发送文件<ul><li>发送的并不是文件，本质上来讲发送的是文件内容</li><li>当浏览器收到服务器响应内容之后，就会根据你的 Content-Type 进行对应的解析处理 </li></ul></li></ul></li></ul><h1 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h1><h2 id="还是-node-环境的安装"><a href="#还是-node-环境的安装" class="headerlink" title="还是 node 环境的安装"></a>还是 node 环境的安装</h2><ul><li>查看当前 node 环境的版本号</li><li>下载 <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a></li><li>安装<ul><li>傻瓜式的一路<code>next</code>就好了</li><li>对于已经安装过的，重新安装就会升级</li></ul></li><li>确认 node 环境是否安装成功<ul><li>打开命令行，输入<code>node --version</code></li><li>或者<code>node -v</code>查看版本号</li></ul></li><li>环境变量</li></ul><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><h3 id="解析执行-JavaScript"><a href="#解析执行-JavaScript" class="headerlink" title="解析执行 JavaScript"></a>解析执行 JavaScript</h3><p>1.创建编写 JavaScript 脚本文件<br>2.打开终端，定位到脚本文件所属目录<br>3.输入<code>node 文件名</code>执行对应文件<br>注意：文件不要使用node.js来命名，也就是说除了 node 这个名字其他随便取(不要太过分~)，而且最好也不要使用中文。</p><h3 id="文件的读写"><a href="#文件的读写" class="headerlink" title="文件的读写"></a>文件的读写</h3><p>文件读取：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var file_system = require(&apos;fs&apos;)</span><br><span class="line">    // 读取文件有2参数</span><br><span class="line">    // 第一个参数是文件地址</span><br><span class="line">    // 第二个参数是一个回调函数：</span><br><span class="line">    // 成功：</span><br><span class="line">    //     data是数据</span><br><span class="line">    //     error是null</span><br><span class="line">    // 失败：</span><br><span class="line">    //     data是undefind</span><br><span class="line">    //     error是错误对象</span><br><span class="line"></span><br><span class="line">file_system.readFile(&apos;./doc.txt&apos;, function(error, data) &#123;</span><br><span class="line">    //&lt;Buffer e5 ad a6 e4 b9 a0 6e 6f 64 65 2e 6a 73 e7 9a 84 e7 ac ac e4 b8 80 e5 a4 a9 e3 80 82&gt;   储存的是二进制数据</span><br><span class="line">    // 二进制转换为16进制了，所以看到的不是  0  1</span><br><span class="line">    // 用tostring方法转换为我们可以阅读的字体</span><br><span class="line">    // console.log(error)</span><br><span class="line">    // console.log(data)</span><br><span class="line">    // console.log(data.toString())</span><br><span class="line">    //这里就可以通过判断 error 来确认是否有错误发生</span><br><span class="line">    if(error)&#123;</span><br><span class="line">    console.log(&apos;文件读取失败~&apos;)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    console.log(data.toString())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>文件写入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var fs = request(&apos;fs&apos;)</span><br><span class="line">//$.ajax(&#123;</span><br><span class="line">// ...</span><br><span class="line">// success:function (data)&#123;</span><br><span class="line"></span><br><span class="line">//&#125;</span><br><span class="line">//&#125;)</span><br><span class="line"></span><br><span class="line">//第一个参数：文件路径</span><br><span class="line">//第二个参数：文件内容</span><br><span class="line">//第三个参数：回调函数</span><br><span class="line">//error</span><br><span class="line">//</span><br><span class="line">//成功：</span><br><span class="line">//文件写入成功</span><br><span class="line">//error 是 null</span><br><span class="line">//失败：</span><br><span class="line">//文件写入失败</span><br><span class="line">//error 就是错误对象</span><br><span class="line">fs.writeFile(&apos;./data/你好.md/(text)&apos;,&apos;大家好，给大家介绍一下，我是Node.js&apos;,function(error)&#123;</span><br><span class="line">// console.log(&apos;文件写入成功&apos;)</span><br><span class="line">// console.log(error)</span><br><span class="line"> if(error)&#123;</span><br><span class="line"> console.log(&apos;写入失败&apos;)</span><br><span class="line"> &#125;else&#123;</span><br><span class="line"> console.log(&apos;写入成功&apos;)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><p>一个很傻的服务器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 你可以使用 node 非常轻松的构建一个 web 服务器</span><br><span class="line">// 在 node 中专门提供了一个核心模块：http</span><br><span class="line">// http 这个模块的职责就是帮助你创建缩写服务器的</span><br><span class="line"></span><br><span class="line">//1、加载 http 核心模块</span><br><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line"></span><br><span class="line">//2、使用 http.createServer() 方法创建一个 web 服务器</span><br><span class="line">// 返回一个 Server 实例</span><br><span class="line">var server = http.createServer()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//3、服务器要干什么？</span><br><span class="line">//提供服务：对数据的服务</span><br><span class="line">//发请求</span><br><span class="line">//接收请求</span><br><span class="line">//处理请求</span><br><span class="line">//给个反馈（发送响应）</span><br><span class="line">//注册 request 请求事件</span><br><span class="line">//当客户端发送请求过来，就会自动触发服务器的 request 请求事件，然后执行第二个参数：回调处理函数</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">server.on(&apos;request&apos;,function()&#123;</span><br><span class="line">console.log(&apos;收到客户端的请求了&apos;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//4、绑定端口号，启动服务器</span><br><span class="line">server.listen(3000,function()&#123;</span><br><span class="line">console.log(&apos;服务器启动成功了,可以通过 http://127.0.0.1:3000/ 来进行访问 &apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><img src="https://xuqian.xiaomujin.club/blog/20190801/jYnah8vXBFez.png" alt="http"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line"></span><br><span class="line">//1、创建Server</span><br><span class="line">var server = http.createServer()</span><br><span class="line">    //2、createServer (http-res-url.js)请求处理函数</span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">        // console.log(&apos;收到请求了，请求路径是：&apos; + req.url)</span><br><span class="line">        // res.write(&apos;hello&apos;)</span><br><span class="line">        // res.write(&apos;world&apos;)</span><br><span class="line">        // res.end()</span><br><span class="line"></span><br><span class="line">        //上面的方式比较麻烦，推荐使用更简洁的方式，直接end的同时发送响应数据。</span><br><span class="line">        // res.end(&apos;hello nodejs&apos;)</span><br><span class="line"></span><br><span class="line">        //根据不同的请求路径发送不同的响应结果</span><br><span class="line">        // 1、获取请求路径</span><br><span class="line">        //     req.url 获取的是端口号之后的那一部分路径</span><br><span class="line">        //     也就是说所有的 url 都是以 / 开头的</span><br><span class="line">        // 2、判断路径处理响应</span><br><span class="line"></span><br><span class="line">        var url = req.url</span><br><span class="line">            // if (url === &apos;/&apos;) &#123;</span><br><span class="line">            //     res.end(&apos;index page&apos;)</span><br><span class="line">            // &#125; else if (url === &apos;/login&apos;) &#123;</span><br><span class="line">            //     res.end(&apos;login page&apos;)</span><br><span class="line">            // &#125; else &#123;</span><br><span class="line">            //     res.end(&apos;404 Not Found&apos;)</span><br><span class="line">            // &#125;</span><br><span class="line"></span><br><span class="line">        //学会了这些就能写简单版的接口了，例如：</span><br><span class="line">        if (url === &apos;/products&apos;) &#123;</span><br><span class="line">            var products = [&#123;</span><br><span class="line">                    name: &apos;iphone X&apos;,</span><br><span class="line">                    price: 8888</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    name: &apos;华为&apos;,</span><br><span class="line">                    price: 6000</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    name: &apos;小米&apos;,</span><br><span class="line">                    price: 3000</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    name: &apos;魅族&apos;,</span><br><span class="line">                    price: 2500</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    name: &apos;1+&apos;,</span><br><span class="line">                    price: 3500</span><br><span class="line">                &#125;, ]</span><br><span class="line">                //响应内容只能是二进制数据或者字符串</span><br><span class="line">                //数字、对象、数组、布尔值通通无效</span><br><span class="line"></span><br><span class="line">            //数组转字符串 JSON.stringify()</span><br><span class="line">            res.end(JSON.stringify(products))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    //3、绑定端口号，启动服务</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;服务器启动成功，可以正常访问了~~&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><img src="https://xuqian.xiaomujin.club/blog/20190801/99rFcHABREt6.png" alt="http"><br><img src="https://xuqian.xiaomujin.club/blog/20190801/cK1nAVKdJe8o.png" alt="简单写个API接口"></p><p>解决编码问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line"></span><br><span class="line">var server = http.createServer()</span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">    //在服务端默认发送的数据，其实是 utf8 编码的内容</span><br><span class="line">    //但是浏览器不知道你是 utf8 编码内容</span><br><span class="line">    //浏览器在不知道服务器响应内容的编码的情况下会按照当前操作系统的默认编码去解析</span><br><span class="line">    //中文操作系统默认编码是 gdk</span><br><span class="line">    //解决方法就是正确的告诉浏览器我给你发送的内容是什么编码的</span><br><span class="line">    res.setHeader(&apos;Content-Type&apos;, &apos;text/plain; charset=utf-8&apos;)</span><br><span class="line">    res.end(&apos;你好，世界&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;Server is running...&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><img src="https://xuqian.xiaomujin.club/blog/20190802/6QFY8k4OvtwG.png" alt="解决编码问题"></p><h4 id="Content-Type类型"><a href="#Content-Type类型" class="headerlink" title="Content-Type类型"></a>Content-Type类型</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line"></span><br><span class="line">var server = http.createServer()</span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">    //在服务端默认发送的数据，其实是 utf8 编码的内容</span><br><span class="line">    //但是浏览器不知道你是 utf8 编码内容</span><br><span class="line">    //浏览器在不知道服务器响应内容的编码的情况下会按照当前操作系统的默认编码去解析</span><br><span class="line">    //中文操作系统默认编码是 gdk</span><br><span class="line">    //解决方法就是正确的告诉浏览器我给你发送的内容是什么编码的</span><br><span class="line">    //在 http 协议中，&apos;Content-type&apos;,就是用来告诉对方我给你发送的数据内容是什么类型</span><br><span class="line"></span><br><span class="line">    // res.setHeader(&apos;Content-Type&apos;, &apos;text/plain; charset=utf-8&apos;)</span><br><span class="line">    // res.end(&apos;你好，世界&apos;)</span><br><span class="line"></span><br><span class="line">    var url = req.url</span><br><span class="line">    if (url === &apos;/plain&apos;) &#123;</span><br><span class="line">        //text/plain就是普通文本</span><br><span class="line">        res.setHeader(&apos;Content-Type&apos;, &apos;text/plain; charset=utf-8&apos;)</span><br><span class="line">        res.end(&apos;你好，世界&apos;)</span><br><span class="line">    &#125; else if (url === &apos;/html&apos;) &#123;</span><br><span class="line">        //如果你发送的是html格式的字符串，也要告诉浏览器发送的是html格式的</span><br><span class="line">        res.setHeader(&apos;Content-Type&apos;, &apos;text/html; charset=utf-8&apos;)</span><br><span class="line">        res.end(&apos;&lt;h1&gt;你好,html&lt;h1&gt;&apos;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;Server is running...&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="node中的JavaScript"><a href="#node中的JavaScript" class="headerlink" title="node中的JavaScript"></a>node中的JavaScript</h1><h2 id="核心模块"><a href="#核心模块" class="headerlink" title="核心模块"></a>核心模块</h2><p>Node 为 JavaScript 提供了很多服务器级别的API，这些API绝大多数都被包装到了一个具体的核心模块中了。<br>例如文件操作<code>fs</code>核心模块，http服务构建的<code>http</code>模块，<code>path</code>路径操作模块、<code>os</code>操作系统信息模块……<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    //获取机器信息</span><br><span class="line">var os = require(&apos;os&apos;)</span><br><span class="line">    //操作路径</span><br><span class="line">var path = require(&apos;path&apos;)</span><br><span class="line">    //获取当前机器的 cpu 信息</span><br><span class="line">console.log(os.cpus())</span><br><span class="line">    //memory 内存</span><br><span class="line">console.log(os.totalmem())</span><br><span class="line">    //extname extension name</span><br><span class="line">console.log(path.extname(&apos;c:/a/b/c/d/hello.txt&apos;))</span><br></pre></td></tr></table></figure></p><p>更多模块用法参考<a href="https://nodejs.org/dist/latest-v12.x/docs/api/fs.html" target="_blank" rel="noopener">官网</a></p><h1 id="Web服务器开发"><a href="#Web服务器开发" class="headerlink" title="Web服务器开发"></a>Web服务器开发</h1><h2 id="ip地址和端口号"><a href="#ip地址和端口号" class="headerlink" title="ip地址和端口号"></a>ip地址和端口号</h2><ul><li>ip地址用来定位计算机</li><li>端口号用来定位具体的应用程序</li><li>一切需要联网通信的软件都会占用一个端口号</li><li>端口号范围从0~65536之间</li><li>在计算机中有一些默认端口号，最好不要去使用<ul><li>例如 http 服务的80</li></ul></li><li>我们在开发过程中使用一些简单好记的端口号就行了，例如3000、5000等</li><li>可以同时开启多个服务，但一定要确保不同服务占用的端口号要不一样</li></ul><h2 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h2><p>可以在这里查询对应的Content-Type：<a href="http://tool.oschina.net/" target="_blank" rel="noopener">http://tool.oschina.net/</a><br><img src="https://xuqian.xiaomujin.club/blog/20190802/n1nnXIOBszzM.png" alt="Content-Type"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//1、结合 fs 发送文件中的数据</span><br><span class="line">//2、Content-Type</span><br><span class="line">// http://tool.oschina.net/commons</span><br><span class="line">// 不同的资源对应的 Content-Type 是不一样的</span><br><span class="line">// 图片不需要指定编码</span><br><span class="line">// 一般只为字符数据才指定编码</span><br><span class="line">var http = require(&apos;http&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">var server = http.createServer()</span><br><span class="line">server.on(&apos;request&apos;, function(req, res) &#123;</span><br><span class="line">    var url = req.url</span><br><span class="line">    if (url === &apos;/&apos;) &#123;</span><br><span class="line">        fs.readFile(&apos;../resource/index.html&apos;, function(err, data) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                res.setHeader(&apos;Content-Type&apos;, &apos;text/plain; charset=utf8&apos;)</span><br><span class="line">                res.end(&apos;文件读取失败，请稍后重试~&apos;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                //data默认是二进制数据，可以通过 .toString转为我们认识的字符串</span><br><span class="line">                //res.end()刚好支持两种数据类型，一种是二进制，一种是字符串</span><br><span class="line">                res.setHeader(&apos;Content-Type&apos;, &apos;text/html; charset=utf8&apos;)</span><br><span class="line">                res.end(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125; else if (url === &apos;/picture&apos;) &#123;</span><br><span class="line">        //url：统一资源定位符</span><br><span class="line">        //一个 url 最终其实是要对应到一个资源的</span><br><span class="line">        fs.readFile(&apos;../resource/preview.jpg&apos;, function(err, data) &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">                res.setHeader(&apos;Content-Type&apos;, &apos;text/plain; charset=utf8&apos;)</span><br><span class="line">                res.end(&apos;文件读取失败，请稍后重试~&apos;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                //图片就不需要指定编码了，因为我们常说的编码一般是：指字符编码</span><br><span class="line">                res.setHeader(&apos;Content-Type&apos;, &apos;image/jpeg&apos;)</span><br><span class="line">                res.end(data)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(3000, function() &#123;</span><br><span class="line">    console.log(&apos;Server is running...&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="请求对象-Request"><a href="#请求对象-Request" class="headerlink" title="请求对象 Request"></a>请求对象 Request</h2><h2 id="响应对象-Request"><a href="#响应对象-Request" class="headerlink" title="响应对象 Request"></a>响应对象 Request</h2><h2 id="在-node-中使用模板引擎"><a href="#在-node-中使用模板引擎" class="headerlink" title="在 node 中使用模板引擎"></a>在 node 中使用模板引擎</h2><h2 id="统一处理静态资源"><a href="#统一处理静态资源" class="headerlink" title="统一处理静态资源"></a>统一处理静态资源</h2><h2 id="服务端渲染"><a href="#服务端渲染" class="headerlink" title="服务端渲染"></a>服务端渲染</h2><p>源代码可以去我的 <a href="https://github.com/shiqihennuan/Node.js-learn" target="_blank" rel="noopener">github</a> 克隆</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近在学习node.js，记录一下自己的学习过程和一些笔记。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="进阶" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="全栈" scheme="https://www.xiaomujin.club/categories/%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/%E5%85%A8%E6%A0%88/"/>
    
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>7个JavaScript小技巧，让前端的代码更高效！</title>
    <link href="https://www.xiaomujin.club/2019/07/31/%E8%AE%A9%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E6%9B%B4%E9%AB%98%E6%95%88/"/>
    <id>https://www.xiaomujin.club/2019/07/31/让前端代码更高效/</id>
    <published>2019-07-31T12:10:00.000Z</published>
    <updated>2019-07-31T12:38:26.987Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript是前端开发人员必学的一门语言。本文共列举了7个小技巧来让你的代码更加简洁、更加高效！<br><a id="more"></a></p><h1 id="1、async-await"><a href="#1、async-await" class="headerlink" title="1、async / await"></a>1、async / await</h1><p>如果你还陷入到回调地狱中，那么你应该回到2014年去开发你的代码。除非绝对必要（像第三方库需要或者性能原因），否则不要使用回调。Promise是非常好的解决回调地狱，但是当你的代码变得越来越大时，它也会变得不太好用。我现在的解决方案就是async / await，它极大提高了代码可读性以及简洁性。</p><p>在所有使用Promise的地方你都可以替换成await，在你需要返回Promise对象，简单await它并返回，为了使它不报错，你需要在定义函数的开头添加async。事实上，async / await就是Promise的语法糖。下面就是一个简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">async function getData() &#123;</span><br><span class="line">    const result = await axios.get(&apos;https://dube.io/service/ping&apos;)</span><br><span class="line">    const data = result.data</span><br><span class="line"> </span><br><span class="line">    console.log(&apos;data&apos;, data)</span><br><span class="line"> </span><br><span class="line">    return data</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">getData()</span><br></pre></td></tr></table></figure></p><p>await 操作符用于等待一个Promise 对象。它只能在异步函数 async function 中使用。async / await是属于ES2017的内容，所以可能需要babel编译你的代码。不过现在的主流浏览器都已经支持了。</p><h1 id="2、异步控制流"><a href="#2、异步控制流" class="headerlink" title="2、异步控制流"></a>2、异步控制流</h1><p>经常地，我们会遇到这样的需求，请求获取多个数据集并对每个数据集进行各自处理或者需要等所有异步回调完成后返回一个值。遇到这些情况，我是这么处理的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for…of</span><br></pre></td></tr></table></figure></p><p>假设我们的页面有多个Pokemon（口袋妖怪），需要获取到它们的详细的信息。我们不想等所有调用结束，特别是不知道它有多少次调用，我们仅想在它有调用返回时就更新我们的数据集。可以用for…of来遍历数组，在代码块里执行async，这样的话，只有每次await执行成功，代码才会继续往下执行。</p><p>这里要着重说明，这样做可能会导致性能瓶颈（当请求很多的时候），但像这样做才能到达预期的效果。请看下面的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line"></span><br><span class="line">let myData = [&#123;id: 0&#125;, &#123;id: 1&#125;, &#123;id: 2&#125;, &#123;id: 3&#125;]</span><br><span class="line"> </span><br><span class="line">async function fetchData(dataSet) &#123;</span><br><span class="line">    for(entry of dataSet) &#123;</span><br><span class="line">        const result = await axios.get(`https://ironhack-pokeapi.herokuapp.com/pokemon/$&#123;entry.id&#125;`)</span><br><span class="line">        const newData = result.data</span><br><span class="line">        updateData(newData)</span><br><span class="line"> </span><br><span class="line">        console.log(myData)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function updateData(newData) &#123;</span><br><span class="line">    myData = myData.map(el =&gt; &#123;</span><br><span class="line">        if(el.id === newData.id) return newData</span><br><span class="line">        return el</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fetchData(myData)</span><br></pre></td></tr></table></figure></p><p>这个代码是能正常运行，你可以轻松地复制它到 code sandbox运行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Promise.all</span><br></pre></td></tr></table></figure></p><p>如果你想同时获取所有口袋妖怪的详情呢？你需要等待所有的请求的完成返回，这时简单使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Promise.all：</span><br><span class="line"> </span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line"> </span><br><span class="line">let myData = [&#123;id: 0&#125;, &#123;id: 1&#125;, &#123;id: 2&#125;, &#123;id: 3&#125;]</span><br><span class="line"> </span><br><span class="line">async function fetchData(dataSet) &#123;</span><br><span class="line">    const pokemonPromises = dataSet.map(entry =&gt; &#123;</span><br><span class="line">        return axios.get(`https://ironhack-pokeapi.herokuapp.com/pokemon/$&#123;entry.id&#125;`)</span><br><span class="line">    &#125;)</span><br><span class="line"> </span><br><span class="line">    const results = await Promise.all(pokemonPromises)</span><br><span class="line"> </span><br><span class="line">    results.forEach(result =&gt; &#123;</span><br><span class="line">        updateData(result.data)</span><br><span class="line">    &#125;)</span><br><span class="line"> </span><br><span class="line">    console.log(myData)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function updateData(newData) &#123;</span><br><span class="line">    myData = myData.map(el =&gt; &#123;</span><br><span class="line">        if(el.id === newData.id) return newData</span><br><span class="line">        return el</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fetchData(myData)</span><br></pre></td></tr></table></figure></p><p>for…of 和 Promise.all都是ES6以后提出来的，请确保你的环境能运行。</p><h1 id="3、解构（Destructuring-）-amp-默认值"><a href="#3、解构（Destructuring-）-amp-默认值" class="headerlink" title="3、解构（Destructuring ） &amp; 默认值"></a>3、解构（Destructuring ） &amp; 默认值</h1><p>我们接着上面的那个例子，提取一部分代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const result = axios.get(`https://ironhack-pokeapi.herokuapp.com/pokemon/$&#123;entry.id&#125;`)</span><br><span class="line">const data = result.data</span><br></pre></td></tr></table></figure></p><p>有一种简单的方法，解构从数组，或对象中获取一些属性（值）。像这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123; data &#125; = await axios.get(...)</span><br></pre></td></tr></table></figure></p><p>注意当解构的时候，通常要赋给它一个默认值。这样确保你不会得到undefined以及你不用自己手动地检查变量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const &#123; id = 5 &#125; = &#123;&#125;</span><br><span class="line">console.log(id) // 5</span><br></pre></td></tr></table></figure></p><p>这个技巧也被运用到了函数参数中。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function calculate(&#123;operands = [1, 2], type = &apos;addition&apos;&#125; = &#123;&#125;) &#123;</span><br><span class="line">    return operands.reduce((acc, val) =&gt; &#123;</span><br><span class="line">        switch(type) &#123;</span><br><span class="line">            case &apos;addition&apos;:</span><br><span class="line">                return acc + val</span><br><span class="line">            case &apos;subtraction&apos;:</span><br><span class="line">                return acc - val</span><br><span class="line">            case &apos;multiplication&apos;:</span><br><span class="line">                return acc * val</span><br><span class="line">            case &apos;division&apos;:</span><br><span class="line">                return acc / val</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, [&apos;addition&apos;, &apos;subtraction&apos;].includes(type) ? 0 : 1)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">console.log(calculate()) // 3</span><br><span class="line">console.log(calculate(&#123;type: &apos;division&apos;&#125;)) // 0.5</span><br><span class="line">console.log(calculate(&#123;operands: [2, 3, 4], type: &apos;multiplication&apos;&#125;)) // 24</span><br></pre></td></tr></table></figure></p><p>这个例子起初看起来可能有点混乱，但是慢慢观察。当我们没有给函数传递参数的时候，就会使用默认值。一旦我们开始传递参数，仅会使用那些没有传递的参数的默认值。这样，减少了你对异常状态的处理。</p><h1 id="4、真值-amp-假值"><a href="#4、真值-amp-假值" class="headerlink" title="4、真值 &amp; 假值"></a>4、真值 &amp; 假值</h1><p>当使用默认值，就可以不用对现有值进行一些额外的检查。但是了解你的变量是真值还是假值是非常棒的。它能提高你的代码扩展性，更具有说服力的以及简洁。我常看到下面一些写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if(myBool === true) &#123;</span><br><span class="line">  console.log(...)</span><br><span class="line">&#125;</span><br><span class="line">// OR</span><br><span class="line">if(myString.length &gt; 0) &#123;</span><br><span class="line">  console.log(...)</span><br><span class="line">&#125;</span><br><span class="line">// OR</span><br><span class="line">if(isNaN(myNumber)) &#123;</span><br><span class="line">  console.log(...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>为了用这些简洁的判断，你要充分理解js中真值，假值具体有哪些？这里概述一下：</p><p>假值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.字符串，但长度为0</span><br><span class="line">2.数字0</span><br><span class="line">3.false</span><br><span class="line">4.undefined</span><br><span class="line">5.null</span><br><span class="line">6.NaN</span><br></pre></td></tr></table></figure></p><p>真值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.空数组</span><br><span class="line">2.空对象</span><br><span class="line">3.其他有值的数据.</span><br><span class="line">注意：在判断真/假值，还应该注意到你使用的是等于&apos;==&apos;，还是全等&apos;===&apos;,这经常会导致bug。对我而言，经常是数字0。</span><br></pre></td></tr></table></figure></p><h1 id="5、逻辑运算与三元运算符"><a href="#5、逻辑运算与三元运算符" class="headerlink" title="5、逻辑运算与三元运算符"></a>5、逻辑运算与三元运算符</h1><p>逻辑运算</p><p>逻辑运算是基于多个表达式真假的判断，注意到js是惰性求值的策略。逻辑运算一般返回一个布尔值。&amp;&amp; 和 || 运算符会返回一个指定操作数的值。来看这里：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">console.log(true &amp;&amp; true) // true</span><br><span class="line">console.log(false &amp;&amp; true) // false</span><br><span class="line">console.log(true &amp;&amp; false) // false</span><br><span class="line">console.log(false &amp;&amp; false) // false</span><br><span class="line">console.log(true || true) // true</span><br><span class="line">console.log(true || false) // true</span><br><span class="line">console.log(false || true) // true</span><br><span class="line">console.log(false || false) // false</span><br></pre></td></tr></table></figure></p><p>进行的逻辑运算，是按照下面的规则进行的：</p><p>&amp;&amp;:第一个值为假值，则直接返回；如果为真值，则直接返回第二的值</p><p>||:第一个值为真，则直接返回；如果为假，则直接返回第二的值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">console.log(0 &amp;&amp; &#123;a: 1&#125;) // 0</span><br><span class="line">console.log(false &amp;&amp; &apos;a&apos;) // false</span><br><span class="line">console.log(&apos;2&apos; &amp;&amp; 5) // 5</span><br><span class="line">console.log([] || false) // []</span><br><span class="line">console.log(NaN || null) // null</span><br><span class="line">console.log(true || &apos;a&apos;) // true</span><br></pre></td></tr></table></figure></p><p>三元运算符</p><p>三元运算符和逻辑运算是相似的，但是它有3个部分：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">condition ? expr1 : expr2</span><br></pre></td></tr></table></figure></p><p>condition为进行条件判断的部分，将会得到真值或者假值</p><p>expr1为条件判断为真时返回的值</p><p>expr2为条件判断为假时返回的值</p><p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const</span><br><span class="line">console.log(lang === &apos;German&apos; ? &apos;Hallo&apos; : &apos;Hello&apos;) // Hallo</span><br><span class="line">console.log(lang ? &apos;Ja&apos; : &apos;Yes&apos;) // Ja</span><br><span class="line">console.log(lang === &apos;French&apos; ? &apos;Bon soir&apos; : &apos;Good evening&apos;) // Good evening</span><br></pre></td></tr></table></figure></p><h1 id="6、Optional-Chaining"><a href="#6、Optional-Chaining" class="headerlink" title="6、Optional Chaining"></a>6、Optional Chaining</h1><p>过去在 Object 属性链的调用中，很容易因为某个属性不存在而导致之后出现Cannot read property xxx of undefined的错误。为了确认需要向这样处理：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let data</span><br><span class="line">if(myObj &amp;&amp; myObj.firstProp &amp;&amp; myObj.firstProp.secondProp &amp;&amp; myObj.firstProp.secondProp.actualData) data = myObj.firstProp.secondProp.actualData</span><br></pre></td></tr></table></figure></p><p>这样事冗余的，有一个新的提案的方法就是Optional Chaining，如下的形式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const data = myObj?.firstProp?.secondProp?.actualData</span><br></pre></td></tr></table></figure></p><p>我认为它是检查嵌套属性最佳方法，代码是如此的简洁。</p><p>这个特性可以说是非常实用了，不过它现在处于 stage-1 阶段。你可以在.babelrc文件中引入 @babel/plugin-proposal-optional-chaining插件来使用它。</p><h1 id="7、Class-properties-amp-binding"><a href="#7、Class-properties-amp-binding" class="headerlink" title="7、Class properties &amp; binding"></a>7、Class properties &amp; binding</h1><p>在JavaScript中函数绑定也是经常的工作任务。现在，大家应该都是用箭头函数自动绑定this到这个类上的（这里可能有歧义，首先箭头函数里面是没有this 和arguments的，这里的this把它当成一个参数就行）。</p><p>如果不用箭头函数，我们就需要在构造函数绑定this，当类的方法很多的时候，这就显得很冗余。因此，建议和提倡在类里面用箭头函数。如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Counter extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">        this.state = &#123; count: 0 &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    render() &#123;</span><br><span class="line">        return(</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h1&gt;&#123;this.state.count&#125;&lt;/h1&gt;  </span><br><span class="line">                &lt;button onClick=&#123;this._increaseCount&#125;&gt;Increase Count&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    _increaseCount = () =&gt; &#123;</span><br><span class="line">        this.setState(&#123; count: this.state.count + 1 &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>使用箭头函数声明类中方法，它现在处于 stage-3 阶段。你可以在.babelrc文件中引入@babel/plugin-proposal-class-properties插件来使用它。</p><font color="#909090">*声明：本文于网络整理，版权归原作者所有，如来源信息有误或侵犯权益，请联系我删除或授权事宜</font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JavaScript是前端开发人员必学的一门语言。本文共列举了7个小技巧来让你的代码更加简洁、更加高效！&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="前端进阶" scheme="https://www.xiaomujin.club/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"/>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="效率" scheme="https://www.xiaomujin.club/tags/%E6%95%88%E7%8E%87/"/>
    
      <category term="javascript" scheme="https://www.xiaomujin.club/tags/javascript/"/>
    
      <category term="前端" scheme="https://www.xiaomujin.club/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>本地模拟后端数据的第三种方法</title>
    <link href="https://www.xiaomujin.club/2019/07/30/%E8%AF%B7%E6%B1%82%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
    <id>https://www.xiaomujin.club/2019/07/30/请求本地数据的第三种方法/</id>
    <published>2019-07-30T11:10:00.000Z</published>
    <updated>2019-08-02T09:59:00.234Z</updated>
    
    <content type="html"><![CDATA[<p>这里介绍了第三种本地模拟后端接口的方法，使用第三方框架（mockjs）,拦截ajax请求返回数据。<br><a href="https://mockjs.com/" target="_blank" rel="noopener">官网</a><br><a id="more"></a></p><h1 id="1、引入mockjs-可以是在线地址，或者是下载到本地引入，一般在body结束标签前引入。"><a href="#1、引入mockjs-可以是在线地址，或者是下载到本地引入，一般在body结束标签前引入。" class="headerlink" title="1、引入mockjs,可以是在线地址，或者是下载到本地引入，一般在body结束标签前引入。"></a>1、引入mockjs,可以是在线地址，或者是下载到本地引入，一般在body结束标签前引入。</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;</span><br><span class="line">    &lt;title&gt;第三方框架，mockjs拦截ajax请求返回数据&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--内容--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--body结束标签前引用--&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://mockjs.com/dist/mock.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="2、根据数据模板生成模拟数据。（一般场景配置两个参数够用了Mock-mock-rurl-template-）"><a href="#2、根据数据模板生成模拟数据。（一般场景配置两个参数够用了Mock-mock-rurl-template-）" class="headerlink" title="2、根据数据模板生成模拟数据。（一般场景配置两个参数够用了Mock.mock( rurl, template )）"></a>2、根据数据模板生成模拟数据。（一般场景配置两个参数够用了Mock.mock( rurl, template )）</h1><ul><li>Mock.mock( rurl?, rtype?, template|function( options ) )。</li><li>rurl（可选）。表示需要拦截的 URL，可以是 URL 字符串或 URL 正则。例如 //domain/list.json/、’/domian/list.json’。</li><li>rtype（可选）。表示需要拦截的 Ajax 请求类型。例如 GET、POST、PUT、DELETE 等。</li><li>template （可选）。表示数据模板，可以是对象或字符串。例如 { ‘data|1-10’:[{}] }、‘@EMAIL’。</li><li>function(options)（可选）。表示用于生成响应数据的函数。</li><li>options 指向本次请求的 Ajax 选项集，含有 url、type 和 body 三个属性。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- （必选）加载 Mock --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://mockjs.com/dist/mock.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    $(function () &#123;</span><br><span class="line"></span><br><span class="line">     /*</span><br><span class="line">    * Mock.mock( rurl, template )</span><br><span class="line">    * rurl:表示需要拦截的 URL，可以是 URL 字符串或 URL 正则。</span><br><span class="line">    * template：表示数据模板，可以是对象或字符串</span><br><span class="line">    * */</span><br><span class="line"></span><br><span class="line">//         mock拦截ajax请求并返回数据</span><br><span class="line">        Mock.mock(/\.json/, &#123;</span><br><span class="line">            &apos;code&apos;:&apos;000&apos;,</span><br><span class="line">            &apos;message&apos;:&apos;message信息&apos;,</span><br><span class="line">            &apos;list|1-10&apos;: [&#123;</span><br><span class="line">                &apos;id|+1&apos;: 1,</span><br><span class="line">                &apos;email&apos;: &apos;@EMAIL&apos;,</span><br><span class="line">                &apos;name&apos;: &apos;@name&apos;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:&apos;list.json&apos;,</span><br><span class="line">            contentType: &apos;application/json&apos;,</span><br><span class="line">            type: &apos;POST&apos;,</span><br><span class="line">            timeout: 5000,</span><br><span class="line">            dataType:&apos;JSON&apos;,</span><br><span class="line">            data: JSON.stringify(&#123;schoolId: 123&#125;),</span><br><span class="line">            success: function (res) &#123;</span><br><span class="line">                if(res.code == 000)&#123;</span><br><span class="line">                    console.log(res);</span><br><span class="line">                    $(&apos;&lt;pre&gt;&apos;).text(JSON.stringify(res, null, 4)).appendTo(&apos;body&apos;);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    alert(res.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            Error: function (xhr, type, errorThrown) &#123;</span><br><span class="line">                console.log(JSON.stringify(xhr));</span><br><span class="line">                console.log(type);</span><br><span class="line">                console.log(errorThrown);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>把html文件在浏览器里打开，出现以下格式的json数据；</li><li>注意：每次打开页面或刷新一次页面数据会随机改变；</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &quot;code&quot;: &quot;000&quot;,</span><br><span class="line">   &quot;message&quot;: &quot;message信息&quot;,</span><br><span class="line">   &quot;list&quot;: [</span><br><span class="line">       &#123;</span><br><span class="line">           &quot;id&quot;: 1,</span><br><span class="line">           &quot;email&quot;: &quot;u.skubdwsbs@nfuzlwgd.et&quot;,</span><br><span class="line">           &quot;name&quot;: &quot;Michael Clark&quot;</span><br><span class="line">       &#125;,</span><br><span class="line">       &#123;</span><br><span class="line">           &quot;id&quot;: 2,</span><br><span class="line">           &quot;email&quot;: &quot;u.sokjrkoja@lnmxlkx.kp&quot;,</span><br><span class="line">           &quot;name&quot;: &quot;Brian Davis&quot;</span><br><span class="line">       &#125;,</span><br><span class="line">       &#123;</span><br><span class="line">           &quot;id&quot;: 3,</span><br><span class="line">           &quot;email&quot;: &quot;t.chpjw@jnidn.se&quot;,</span><br><span class="line">           &quot;name&quot;: &quot;Margaret Allen&quot;</span><br><span class="line">       &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3、可选）配置拦截ajax请求时的行为；"><a href="#3、可选）配置拦截ajax请求时的行为；" class="headerlink" title="3、可选）配置拦截ajax请求时的行为；"></a>3、可选）配置拦截ajax请求时的行为；</h1><ul><li>Mock.setup( settings )；</li><li>settings必选，支持的配置项有：timeout；</li><li>指定被拦截的 Ajax 请求的响应时间，单位是毫秒。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- （必选）加载 Mock --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://mockjs.com/dist/mock.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    $(function () &#123;</span><br><span class="line">//         mock拦截ajax请求并返回数据</span><br><span class="line">        Mock.mock(/\.json/, &#123;</span><br><span class="line">            &apos;code&apos;:&apos;000&apos;,</span><br><span class="line">            &apos;message&apos;:&apos;message信息&apos;,</span><br><span class="line">            &apos;list|1-10&apos;: [&#123;</span><br><span class="line">                &apos;id|+1&apos;: 1,</span><br><span class="line">                &apos;email&apos;: &apos;@EMAIL&apos;,</span><br><span class="line">                &apos;name&apos;: &apos;@name&apos;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;)</span><br><span class="line">       /*</span><br><span class="line">        * Mock.setup( settings )</span><br><span class="line">        * 配置拦截 Ajax 请求时的行为。支持的配置项有：timeout。</span><br><span class="line">        * settings必选。配置项集合。timeout可选。指定被拦截的 Ajax 请求的响应时间，单位是毫秒。值可以是正整数，例如 400，表示 400 毫秒 后才会返回响应内容；也可以是横杠 &apos;-&apos; 风格的字符串，例如 &apos;200-600&apos;，表示响应时间介于 200 和 600 毫秒之间。默认值是&apos;10-100&apos;。*/</span><br><span class="line">        Mock.setup(&#123;</span><br><span class="line">            timeout: 4000</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:&apos;list.json&apos;,</span><br><span class="line">            contentType: &apos;application/json&apos;,</span><br><span class="line">            type: &apos;POST&apos;,</span><br><span class="line">            timeout: 5000,</span><br><span class="line">            dataType:&apos;JSON&apos;,</span><br><span class="line">            data: JSON.stringify(&#123;schoolId: 123&#125;),</span><br><span class="line">            success: function (res) &#123;</span><br><span class="line">                if(res.code == 000)&#123;</span><br><span class="line">                    console.log(res);</span><br><span class="line">                    $(&apos;&lt;pre&gt;&apos;).text(JSON.stringify(res, null, 4)).appendTo(&apos;body&apos;);</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    alert(res.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            Error: function (xhr, type, errorThrown) &#123;</span><br><span class="line">                console.log(JSON.stringify(xhr));</span><br><span class="line">                console.log(type);</span><br><span class="line">                console.log(errorThrown);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>配置<font color="red"><code>Mock.setup({timeout: 4000})</code></font>之后网页打开4000毫秒之后才会返回数据;</p><h1 id="Mock-Random-是一个工具类，用于生成各种随机数据。（其实上面例子中已经有使用）"><a href="#Mock-Random-是一个工具类，用于生成各种随机数据。（其实上面例子中已经有使用）" class="headerlink" title="Mock.Random 是一个工具类，用于生成各种随机数据。（其实上面例子中已经有使用）"></a>Mock.Random 是一个工具类，用于生成各种随机数据。（其实上面例子中已经有使用）</h1><ul><li>Mock.Random 提供的完整方法（占位符）如下：</li><li>基本：boolean, natural, integer, float, character, string, range,</li><li>时间：date, time, datetime, now；</li><li>图片：image, dataImage；</li><li>颜色：color，hex，rgb，rgba，hsl；</li><li>文本：paragraph, sentence, word, title, cparagraph, csentence, cword, ctitle；</li><li>名字：first, last, name, cfirst, clast, cname；</li><li>web：url, domain, email, ip, tld；</li><li>地址：region，province，city，county，zip；</li><li>Helper：capitalize, upper, lower, pick, shuffle；</li><li>Miscellaneous：guid, id, increment;</li></ul><p>使用方法：在模板数据中定义参数,值为@加上对应的占位符用引号引起来，比如<font color="red"><code>&#39;nowTime&#39;:&#39;@now&#39;</code></font>,请求返回的数据就是当前发送请求时的时间 “2017-09-02 11:42:06”；下面我使用了三个占位符，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Mock.mock(/\.json/, &#123;</span><br><span class="line">    &apos;code&apos;:&apos;000&apos;,</span><br><span class="line">    &apos;message&apos;:&apos;message信息&apos;,</span><br><span class="line">    &apos;list|1-10&apos;: [&#123;</span><br><span class="line">        &apos;id|+1&apos;: 1,</span><br><span class="line">        &apos;email&apos;: &apos;@EMAIL&apos;, //邮箱</span><br><span class="line">        &apos;name&apos;: &apos;@name&apos;， //名字</span><br><span class="line">        &apos;time&apos;:&apos;@now&apos;    //当前时间</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>页面显示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;code&quot;: &quot;000&quot;,</span><br><span class="line">    &quot;message&quot;: &quot;message信息&quot;,</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 1,</span><br><span class="line">            &quot;email&quot;: &quot;z.urorqdo@prrfhjnly.mil&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;Joseph Taylor&quot;,</span><br><span class="line">            &quot;time&quot;: &quot;2017-09-02 11:42:06&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 2,</span><br><span class="line">            &quot;email&quot;: &quot;m.oshsxmd@ewcolhl.na&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;Mary Harris&quot;,</span><br><span class="line">            &quot;time&quot;: &quot;2017-09-02 11:42:06&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 3,</span><br><span class="line">            &quot;email&quot;: &quot;l.zcbunjphx@hvdgteo.ir&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;Susan Thomas&quot;,</span><br><span class="line">            &quot;time&quot;: &quot;2017-09-02 11:42:06&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这里简单介绍一下mockjs怎么使用的，想了解更详细的使用，请参考官方文档和官方示例，写的很详细，这里就不多说了还有<font color="red"><code>Mock.valid( template, data )</code></font>效验真实数据的方法，个人觉得用的不多，想了解的自行查看文档。</p><p>前2种方法快速链接：<br>方法一：<a href="https://www.xiaomujin.club/2019/07/30/%E4%BD%BF%E7%94%A8node%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE/#more">基于node.js</a><br>方法二：<a href="https://www.xiaomujin.club/2019/07/30/%E6%9C%AC%E5%9C%B0%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E6%B3%95/#more">请求本地json文件</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里介绍了第三种本地模拟后端接口的方法，使用第三方框架（mockjs）,拦截ajax请求返回数据。&lt;br&gt;&lt;a href=&quot;https://mockjs.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;官网&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="模拟后端接口" scheme="https://www.xiaomujin.club/categories/%E6%A8%A1%E6%8B%9F%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3/"/>
    
    
      <category term="前端" scheme="https://www.xiaomujin.club/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="mockjs" scheme="https://www.xiaomujin.club/tags/mockjs/"/>
    
      <category term="本地模拟后端数据" scheme="https://www.xiaomujin.club/tags/%E6%9C%AC%E5%9C%B0%E6%A8%A1%E6%8B%9F%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客NexT主题美化之新增看板娘(能说话、能换装)</title>
    <link href="https://www.xiaomujin.club/2019/07/30/Hexo%E5%8D%9A%E5%AE%A2NexT%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B9%8B%E6%96%B0%E5%A2%9E%E7%9C%8B%E6%9D%BF%E5%A8%98(%E8%83%BD%E8%AF%B4%E8%AF%9D%E3%80%81%E8%83%BD%E6%8D%A2%E8%A3%85)/"/>
    <id>https://www.xiaomujin.club/2019/07/30/Hexo博客NexT主题美化之新增看板娘(能说话、能换装)/</id>
    <published>2019-07-30T09:30:00.000Z</published>
    <updated>2019-08-02T09:55:20.523Z</updated>
    
    <content type="html"><![CDATA[<p><font size="5">今天在逛别博客的时候，发现了高级版的看板娘，很是心动，马上给自己的博客也来了一个。</font><br>更多效果展示，请访问我的<a href="https://www.xiaomujin.club/">个人博客</a><br><a id="more"></a></p><h1 id="1、最终效果图"><a href="#1、最终效果图" class="headerlink" title="1、最终效果图"></a>1、最终效果图</h1><p><img src="https://xuqian.xiaomujin.club/16380860-cc98e334604276d6.gif" alt="效果图"></p><h1 id="2、教程："><a href="#2、教程：" class="headerlink" title="2、教程："></a>2、教程：</h1><h2 id="2-1、小白水平："><a href="#2-1、小白水平：" class="headerlink" title="2.1、小白水平："></a><strong>2.1、小白水平：</strong></h2><p>hexo的官方是支持看板娘的，已经封装好了插件，但只是模型，不能说话、不能换装、功能较少。</p><h3 id="2-1-1、安装模块，如下："><a href="#2-1-1、安装模块，如下：" class="headerlink" title="2.1.1、安装模块，如下："></a>2.1.1、安装模块，如下：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>在 站点配置文件 或 主题配置文件 中新增如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># Live2D</span><br><span class="line">## https://github.com/EYHN/hexo-helper-live2d</span><br><span class="line">live2d:</span><br><span class="line">  enable: true</span><br><span class="line">  # enable: false</span><br><span class="line">  scriptFrom: local # 默认</span><br><span class="line">  pluginRootPath: live2dw/ # 插件在站点上的根目录(相对路径)</span><br><span class="line">  pluginJsPath: lib/ # 脚本文件相对与插件根目录路径</span><br><span class="line">  pluginModelPath: assets/ # 模型文件相对与插件根目录路径</span><br><span class="line">  # scriptFrom: jsdelivr # jsdelivr CDN</span><br><span class="line">  # scriptFrom: unpkg # unpkg CDN</span><br><span class="line">  # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url</span><br><span class="line">  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span><br><span class="line">  debug: false # 调试, 是否在控制台输出日志</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-wanko # npm-module package name</span><br><span class="line">    # use: wanko # 博客根目录/live2d_models/ 下的目录名</span><br><span class="line">    # use: ./wives/wanko # 相对于博客根目录的路径</span><br><span class="line">    # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url</span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: true # 手机中是否展示</span><br></pre></td></tr></table></figure></p><p>选择自己喜欢的模型可以参考我下面的一篇博客—–<a href="https://www.xiaomujin.club/2019/07/17/hexo%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/#more">Hexo博客美化</a></p><h3 id="2-1-2、小白水平，效果如下："><a href="#2-1-2、小白水平，效果如下：" class="headerlink" title="2.1.2、小白水平，效果如下："></a>2.1.2、小白水平，效果如下：</h3><p><img src="https://xuqian.xiaomujin.club/16380860-ac384f6f3f9376f9.gif" alt="小白水平效果图"><br>这里主要介绍的是大神水平，想弄这样比较低级一点的可以参考我的另外一篇博客——<a href="https://www.xiaomujin.club/2019/07/17/hexo%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/#more">Hexo博客美化</a></p><h2 id="2-2、大神水平："><a href="#2-2、大神水平：" class="headerlink" title="2.2、大神水平："></a>2.2、大神水平：</h2><p>大神作品，功能齐全。能说话、能换装、能玩游戏、能拍照、还能自定义。</p><h3 id="2-2-1、下载张书樵大神的项目，解压到本地博客目录的themes-next-source下，修改autoload-js文件，如下："><a href="#2-2-1、下载张书樵大神的项目，解压到本地博客目录的themes-next-source下，修改autoload-js文件，如下：" class="headerlink" title="2.2.1、下载张书樵大神的项目，解压到本地博客目录的themes/next/source下，修改autoload.js文件，如下："></a>2.2.1、下载<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank" rel="noopener">张书樵大神</a>的项目，解压到本地博客目录的<font color="red"><code>themes/next/source</code></font>下，修改<font color="red"><code>autoload.js</code></font>文件，如下：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const live2d_path = &quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;;</span><br></pre></td></tr></table></figure><p><font color="red">改为</font><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const live2d_path = &quot;/live2d-widget/&quot;;</span><br></pre></td></tr></table></figure></p><h2 id="2-3、在-themes-next-layout-layout-swing中-新增如下内容："><a href="#2-3、在-themes-next-layout-layout-swing中-新增如下内容：" class="headerlink" title="2.3、在/themes/next/layout/_layout.swing中,新增如下内容："></a>2.3、在<font color="red"><code>/themes/next/layout/_layout.swing</code></font>中,新增如下内容：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;/live2d-widget/autoload.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="2-4、在-主题配置文件-中-新增如下内容："><a href="#2-4、在-主题配置文件-中-新增如下内容：" class="headerlink" title="2.4、在 主题配置文件 中,新增如下内容："></a>2.4、在 <font color="red"><code>主题配置文件</code></font> 中,新增如下内容：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><h2 id="2-5、想修改看板娘大小、位置、格式、文本内容等，可查看并修改-waifu-tips-js-、-waifu-tips-json-和-waifu-css。"><a href="#2-5、想修改看板娘大小、位置、格式、文本内容等，可查看并修改-waifu-tips-js-、-waifu-tips-json-和-waifu-css。" class="headerlink" title="2.5、想修改看板娘大小、位置、格式、文本内容等，可查看并修改 waifu-tips.js 、 waifu-tips.json 和 waifu.css。"></a>2.5、想修改看板娘大小、位置、格式、文本内容等，可查看并修改 <font color="red"><code>waifu-tips.js</code></font> 、 <font color="red"><code>waifu-tips.json</code></font> 和 <font color="red"><code>waifu.css</code></font>。</h2><h2 id="2-6、大神水平，效果如下："><a href="#2-6、大神水平，效果如下：" class="headerlink" title="2.6、大神水平，效果如下："></a>2.6、大神水平，效果如下：</h2><p><img src="https://xuqian.xiaomujin.club/16380860-cc98e334604276d6.gif" alt="大神水平效果图"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;font size=&quot;5&quot;&gt;今天在逛别博客的时候，发现了高级版的看板娘，很是心动，马上给自己的博客也来了一个。&lt;/font&gt;&lt;br&gt;更多效果展示，请访问我的&lt;a href=&quot;https://www.xiaomujin.club/&quot;&gt;个人博客&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="美化hexo博客" scheme="https://www.xiaomujin.club/categories/%E7%BE%8E%E5%8C%96hexo%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="博客美化" scheme="https://www.xiaomujin.club/tags/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/"/>
    
      <category term="萌妹子" scheme="https://www.xiaomujin.club/tags/%E8%90%8C%E5%A6%B9%E5%AD%90/"/>
    
      <category term="肥宅必备" scheme="https://www.xiaomujin.club/tags/%E8%82%A5%E5%AE%85%E5%BF%85%E5%A4%87/"/>
    
  </entry>
  
  <entry>
    <title>第二种方法，请求本地 json 文件，返回数据。</title>
    <link href="https://www.xiaomujin.club/2019/07/30/%E6%9C%AC%E5%9C%B0%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
    <id>https://www.xiaomujin.club/2019/07/30/本地请求数据的第二种方法/</id>
    <published>2019-07-30T09:00:00.000Z</published>
    <updated>2019-08-02T09:57:41.072Z</updated>
    
    <content type="html"><![CDATA[<p>之前介绍过用node.js写一个本地的接口来进行调试，现在再来介绍一下第二种方法，似乎比之前那种要简单许多。<br><a id="more"></a></p><h1 id="1、注意json格式；"><a href="#1、注意json格式；" class="headerlink" title="1、注意json格式；"></a>1、注意json格式；</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// list.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;code&quot;:&quot;000&quot;,</span><br><span class="line">  &quot;message&quot;:&quot;message信息&quot;,</span><br><span class="line">  &quot;lists&quot;:[</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;name&quot;:&quot;小明&quot;,</span><br><span class="line">        &quot;sex&quot;:&quot;男&quot;,</span><br><span class="line">        &quot;age&quot;: &quot;3&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;name&quot;:&quot;小红&quot;,</span><br><span class="line">        &quot;sex&quot;:&quot;女&quot;,</span><br><span class="line">        &quot;age&quot;:&quot;3&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2、请求路径是相对路径，相对于当前发送请求的文件。"><a href="#2、请求路径是相对路径，相对于当前发送请求的文件。" class="headerlink" title="2、请求路径是相对路径，相对于当前发送请求的文件。"></a>2、请求路径是相对路径，相对于当前发送请求的文件。</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 项目路径</span><br><span class="line">.</span><br><span class="line">├──index.html</span><br><span class="line">└──list.json</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot; /&gt;</span><br><span class="line">    &lt;title&gt;请求本地json文件数据&lt;/title&gt;</span><br><span class="line">    &lt;!--&lt;script src=&quot;../js/jquery-1.7.2.min.js&quot;&gt;&lt;/script&gt;--&gt;</span><br><span class="line">    &lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    $(function () &#123;</span><br><span class="line">        // 请求路径是当前文件的相对路径</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:&apos;list.json&apos;,</span><br><span class="line">            contentType: &apos;application/json&apos;,</span><br><span class="line">            type: &apos;POST&apos;,</span><br><span class="line">            timeout: 5000,</span><br><span class="line">            dataType:&apos;JSON&apos;,</span><br><span class="line">            data: JSON.stringify(&#123;schoolId: 123&#125;),</span><br><span class="line">            success: function (res) &#123;</span><br><span class="line">                if(res.code == &apos;000&apos;)&#123;</span><br><span class="line">                    console.log(res);</span><br><span class="line">                    $(&apos;body&apos;).html(JSON.stringify(res));</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    alert(res.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            Error: function (xhr, type, errorThrown) &#123;</span><br><span class="line">                console.log(JSON.stringify(xhr));</span><br><span class="line">                console.log(type);</span><br><span class="line">                console.log(errorThrown);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>第1种方法快速链接：<br>方法一：<a href="https://www.xiaomujin.club/2019/07/30/%E4%BD%BF%E7%94%A8node%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE/#more">基于node.js</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;之前介绍过用node.js写一个本地的接口来进行调试，现在再来介绍一下第二种方法，似乎比之前那种要简单许多。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="模拟后端接口" scheme="https://www.xiaomujin.club/categories/%E6%A8%A1%E6%8B%9F%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3/"/>
    
    
      <category term="前端" scheme="https://www.xiaomujin.club/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="本地模拟后端数据接口" scheme="https://www.xiaomujin.club/tags/%E6%9C%AC%E5%9C%B0%E6%A8%A1%E6%8B%9F%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3/"/>
    
      <category term="json格式" scheme="https://www.xiaomujin.club/tags/json%E6%A0%BC%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>使用node.js搭建简单服务器接收请求返回数据,在本地实现模拟后端数据接口。</title>
    <link href="https://www.xiaomujin.club/2019/07/30/%E4%BD%BF%E7%94%A8node%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE/"/>
    <id>https://www.xiaomujin.club/2019/07/30/使用node搭建简单服务器接收请求返回数据/</id>
    <published>2019-07-30T03:00:00.000Z</published>
    <updated>2019-08-02T10:00:18.846Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引言："><a href="#引言：" class="headerlink" title="引言："></a>引言：</h2><p>&emsp;&emsp;不知道你在项目开发过程中，有没有遇到过有过以下场景： 一般是前端先制作静态页面，同时服务器端创建数据库，搭服务器端架构，写接口； 当接口写完之后，前端或者后端才能嵌套页面。 但是，如果前端页面制作好了，后端接口还没有写好呢？或者如何让前端、后端各自做各自的事情，互相不影响？ 能做到下面这样是不是很好呢？ ——在进行完需求分析和详细设计后，前端、后端一同商量、制作出一份接口文档 （其中接口名、参数、返回值名称、返回值类型都定义好） 前端页面制作好之后，直接模拟出该接口的json文件，先去请求该文件，把页面绑定、业务逻辑都处理好。 等前端全部绑定好，同时后端接口写好后，我们只需要前端修改接口地址，其他不用做任何修改。 这样，是不是前端不用等后端接口全部写完才能开始剩下的工作呢？<br><a id="more"></a></p><h1 id="1、起手式，不用说肯定是安装node"><a href="#1、起手式，不用说肯定是安装node" class="headerlink" title="1、起手式，不用说肯定是安装node"></a>1、起手式，不用说肯定是安装node</h1><ul><li>没有什么难度，去<a href="https://nodejs.org/en/" target="_blank" rel="noopener">官网</a>下载，简单粗暴一直下一步，完成安装。可以参考下<a href="https://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noopener">菜鸟教程</a>中关于node.js安装配置；</li><li>安装node 会自动安装npm包管理工具；</li><li>检查是否有安装node和 npm包管理工具，打开cmd命令行工具，输入node -v 和npm -v，会输出对应的版本号，如下图所示：<br><img src="https://xuqian.xiaomujin.club/blog/20190730/wWpVbR01OgY5.png" alt="查看"></li><li>全局安装 npm ,最好同时安装cnpm 淘宝npm镜像，如果npm 安装依赖包的时候报错，有时候是网络不好，可以使用淘宝镜像cnpm来安装；<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm</span><br><span class="line">npm install -g cnpm</span><br></pre></td></tr></table></figure></li></ul><h1 id="2、安装express应用程序生成器"><a href="#2、安装express应用程序生成器" class="headerlink" title="2、安装express应用程序生成器"></a>2、安装express应用程序生成器</h1><p><a href="https://expressjs.com/zh-cn/" target="_blank" rel="noopener">官网</a></p><ul><li><p>全局安装<font color="red"><code>express-generator</code></font>;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g express-generator</span><br></pre></td></tr></table></figure></li><li><p>有安装Git Bash Here等第三方命令行工具，我们打开文件管理，进入到想要生成项目的位置后，右键打开Git Bash Here 就可以在当前位置启动命令行工具了；</p></li><li>如果没有安装git等第三方cmd命令行工具，我们打开文件管理，进入到想要生成项目的位置后，直接在地址栏输入cmd，会在当前目录打开cdm命令行工具；</li><li>在我们想要的位置打开命令行工具之后，就可以开始以下步骤：</li></ul><ul><li>创建一个名为myapp的express应用程序<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">express --view=pug myapp</span><br></pre></td></tr></table></figure></li></ul><p>成功后会自动在目标位置创建一个名为myapp的项目并生成很多文件，命令行显示效果如下图：<br><img src="https://xuqian.xiaomujin.club/blog/20190730/eVEwVbdEbuYg.png" alt="查看结构"><br>在命令行最下面有提示，<font color="red"><code>install dependencies: cd myapp &amp;&amp; npm install</code></font> 然后 <font color="red"><code>run the app: npm start</code></font>,我们按照提示来；</p><ul><li><p>进入myapp项目；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd myapp</span><br></pre></td></tr></table></figure></li><li><p>安装package.json文件中的依赖；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></li><li><p>网络不好可以用cnpm</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install</span><br></pre></td></tr></table></figure></li><li><p>运行项目</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://xuqian.xiaomujin.club/blog/20190730/axc3KJVEdLmn.png" alt="运行结果"><br>在浏览器输入localhost:3000，会打开一个页面显示Welcome to Express，说明已经成功启动服务了。</p><h1 id="3、相关配置"><a href="#3、相关配置" class="headerlink" title="3、相关配置"></a>3、相关配置</h1><ul><li>打开myapp项目，可以看到目录下面的结构是这样的；</li></ul><p><img src="https://xuqian.xiaomujin.club/blog/20190730/zLEqOYF0wVLa.png" alt="结构"></p><ul><li><p>这个时候，浏览器打开localhost:3000/users,可以看到页面显示respond with a resource</p></li><li><p>打开routes 文件夹下的users看到以下代码：</p></li></ul><p><img src="https://xuqian.xiaomujin.club/blog/20190730/2n9xQj68a1mH.png" alt="users"></p><ul><li>可以看到页面显示的内容就是users.js文件中返回的内容，我们定义自己想要返回的内容。</li></ul><p><img src="https://xuqian.xiaomujin.club/blog/20190730/kfCiDYL1NWTG.png" alt="users.js数据内容"></p><ul><li>改了之后再请求没有改变，查看命令行信息，304发现我们的请求给我们缓存了； </li></ul><p><img src="https://xuqian.xiaomujin.club/blog/20190730/dhjOUGJQ0Muw.png" alt="缓存信息"></p><ul><li>我们重新启动一下试试，刷新页面返回：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;code&quot;: &quot;000&quot;,</span><br><span class="line">    &quot;message&quot;: &quot;message消息&quot;,</span><br><span class="line">    &quot;lists&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;naem&quot;: &quot;小明&quot;,</span><br><span class="line">            &quot;age&quot;: &quot;12&quot;,</span><br><span class="line">            &quot;sex&quot;: &quot;男&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;naem&quot;: &quot;小红&quot;,</span><br><span class="line">            &quot;age&quot;: &quot;12&quot;,</span><br><span class="line">            &quot;sex&quot;: &quot;女&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>这样虽然可以请求，但是有缓存问题，而且接口多的话每次都得配置一个路径，太复杂，所以要封装一下，重复使用，每次请求重新请求不加载缓存。</li></ul><p>在项目下新建一个config文件夹并新建一个api.js,配置一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">// config/api.js</span><br><span class="line"></span><br><span class="line">var fs = require(&apos;fs&apos;);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 检查请求的路径是否存在</span><br><span class="line"> * @param apiName 请求路径</span><br><span class="line"> * @param method  请求方式</span><br><span class="line"> * @param params   请求参数</span><br><span class="line"> * @param res 返回请求</span><br><span class="line"> */</span><br><span class="line">function getDataFromPath (apiName,method,params,res)&#123;</span><br><span class="line">    if(apiName)&#123;</span><br><span class="line">        fs.access(</span><br><span class="line">            // 提取请求路径中的js文件</span><br><span class="line">            apiName.substring(1)+&apos;.js&apos;,</span><br><span class="line">            // 回调函数，检查请求的路径是否有效失败返回一个错误参数</span><br><span class="line">            function(err)&#123;</span><br><span class="line">                if(!err)&#123;</span><br><span class="line">                    // 每次请求都清除模块缓存重新请求</span><br><span class="line">                    delete require.cache[require.resolve(&apos;..&apos;+apiName)];</span><br><span class="line">                    try&#123;</span><br><span class="line">                        addApiResult(res,require(&apos;..&apos;+apiName).getData(method,params));</span><br><span class="line">                    &#125;catch(e)&#123;</span><br><span class="line">                        console.error(e.stack);</span><br><span class="line">                        res.status(500).send(apiName+&apos; has an error,please check the code.&apos;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    addApiResult(res);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        addApiResult(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">/**</span><br><span class="line"> *  响应头</span><br><span class="line"> * @param res</span><br><span class="line"> */</span><br><span class="line">function addApiHead(res)&#123;</span><br><span class="line">    res.setHeader(&apos;Content-Type&apos;, &apos;application/json;charset=utf-8&apos;);</span><br><span class="line">    // 跨域</span><br><span class="line">    res.header(&apos;Access-Control-Allow-Origin&apos;, &apos;*&apos;);</span><br><span class="line">    res.header(&apos;Access-Control-Allow-Headers&apos;, &apos;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&apos;);</span><br><span class="line">    res.header(&apos;Access-Control-Allow-Methods&apos;, &apos;PUT, POST, GET, DELETE, OPTIONS&apos;);</span><br><span class="line">    // 控制http缓存</span><br><span class="line">    res.header(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);</span><br><span class="line">    res.header(&quot;Pragma&quot;, &quot;no-cache&quot;);</span><br><span class="line">    res.header(&quot;Expires&quot;, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 返回参数，如无返回参数返回404</span><br><span class="line"> * @param res</span><br><span class="line"> * @param result</span><br><span class="line"> */</span><br><span class="line">function addApiResult(res,result)&#123;</span><br><span class="line">    if(result)&#123;</span><br><span class="line">        res.send(result);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        res.status(404).send();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*请求方式*/</span><br><span class="line">// get</span><br><span class="line">exports.get = function(req, res)&#123;</span><br><span class="line">    addApiHead(res);</span><br><span class="line">    getDataFromPath(req.path,&apos;GET&apos;,req.query,res);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// post</span><br><span class="line">exports.post = function(req, res)&#123;</span><br><span class="line">    addApiHead(res);</span><br><span class="line">    getDataFromPath(req.path,&apos;POST&apos;,req.body,res);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><ul><li>打开根目录下app.js，在上面引入刚刚新建的文件api.js;</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//引入API</span><br><span class="line">var api = require(&apos;./config/api&apos;);</span><br></pre></td></tr></table></figure><ul><li>替换请求配置</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/*配置请求*/</span><br><span class="line">app.get(&apos;/&apos;, function(req, res)&#123;</span><br><span class="line">    res.send(&apos;hello world&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&apos;/api/*&apos;, api.get);</span><br><span class="line">app.post(&apos;/api/*&apos;, api.post);</span><br></pre></td></tr></table></figure><ul><li>app.js最终代码</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// app.js</span><br><span class="line"></span><br><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var path = require(&apos;path&apos;);</span><br><span class="line">var favicon = require(&apos;serve-favicon&apos;);</span><br><span class="line">var logger = require(&apos;morgan&apos;);</span><br><span class="line">var cookieParser = require(&apos;cookie-parser&apos;);</span><br><span class="line">var bodyParser = require(&apos;body-parser&apos;);</span><br><span class="line"></span><br><span class="line">var app = express();</span><br><span class="line">/*引入api*/</span><br><span class="line">var api = require(&apos;./config/api&apos;);</span><br><span class="line"></span><br><span class="line">// view engine setup</span><br><span class="line">app.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));</span><br><span class="line">app.set(&apos;view engine&apos;, &apos;pug&apos;);</span><br><span class="line"></span><br><span class="line">// uncomment after placing your favicon in /public</span><br><span class="line">//app.use(favicon(path.join(__dirname, &apos;public&apos;, &apos;favicon.ico&apos;)));</span><br><span class="line">app.use(logger(&apos;dev&apos;));</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; extended: false &#125;));</span><br><span class="line">app.use(cookieParser());</span><br><span class="line">app.use(express.static(path.join(__dirname, &apos;public&apos;)));</span><br><span class="line"></span><br><span class="line">//配置请求</span><br><span class="line">app.get(&apos;/&apos;, function(req, res)&#123;</span><br><span class="line">    res.send(&apos;hello world&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&apos;/api/*&apos;, api.get);</span><br><span class="line">app.post(&apos;/api/*&apos;, api.post);</span><br><span class="line">app.options(&apos;/api/*&apos;, function(req, res, next)&#123;</span><br><span class="line">    res.header(&apos;Access-Control-Allow-Origin&apos;, &apos;*&apos;);</span><br><span class="line">    res.header(&apos;Access-Control-Allow-Headers&apos;, &apos;Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild&apos;);</span><br><span class="line">    res.header(&apos;Access-Control-Allow-Methods&apos;, &apos;PUT, POST, GET, DELETE, OPTIONS&apos;);</span><br><span class="line">    res.sendStatus(200);/*让options请求快速返回*/</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = app;</span><br></pre></td></tr></table></figure><ul><li>根目录新建api文件夹，新建demo.js;</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// api/demo.js</span><br><span class="line"></span><br><span class="line">var dataDemo=&#123;</span><br><span class="line">    &apos;code&apos;:&apos;000&apos;,</span><br><span class="line">    &apos;message&apos;:&apos;message消息&apos;,</span><br><span class="line">    &apos;lists&apos;:[</span><br><span class="line">        &#123;</span><br><span class="line">            &apos;naem&apos;:&apos;小明&apos;,</span><br><span class="line">            &apos;age&apos;: &apos;12&apos;,</span><br><span class="line">            &apos;sex&apos;:&apos;男&apos;</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            &apos;naem&apos;:&apos;小红&apos;,</span><br><span class="line">            &apos;age&apos;: &apos;12&apos;,</span><br><span class="line">            &apos;sex&apos;:&apos;女&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">exports.getData = function(method,data)&#123;</span><br><span class="line">    var backData=&#123;</span><br><span class="line">        &quot;code&quot;:&apos;000&apos;,</span><br><span class="line">        &quot;msg&quot;:&quot;&quot;,</span><br><span class="line">        &quot;data&quot;:dataDemo</span><br><span class="line">    &#125;</span><br><span class="line">    if(method==&apos;DELETE&apos;)&#123;</span><br><span class="line">        backData=&#123;</span><br><span class="line">            &quot;code&quot;:&apos;999&apos;,</span><br><span class="line">            &quot;msg&quot;:&quot;不支持DELETE方法&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return JSON.stringify(backData);</span><br><span class="line">&#125;kData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>重新运行npm start，浏览器打开localhost:3000，此时应该显示的是hello world；</p></li><li><p>打开localhost:3000/api/demo,页面显示</p></li></ul><p><img src="https://xuqian.xiaomujin.club/blog/20190730/TsuhEHbyS1ej.png" alt="页面显示"><br>以上都成功了，那就说明配置成功了，复制demo.js文件命名为demo2.js,改动一下数据，浏览器访问localhost:3000/api/demo2应该也是可以的；</p><h1 id="4、使用"><a href="#4、使用" class="headerlink" title="4、使用"></a>4、使用</h1><p>假如线上接口是 <a href="https://xiaomujin.club/mydata/index/data/list,我们在api文件夹按照路径新建文件夹和文件即可" target="_blank" rel="noopener">https://xiaomujin.club/mydata/index/data/list,我们在api文件夹按照路径新建文件夹和文件即可</a>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">├── api</span><br><span class="line">│   └── mydata</span><br><span class="line">│       └── index</span><br><span class="line">│           └── data</span><br><span class="line">│               └── list.js</span><br></pre></td></tr></table></figure></p><p>开发的时候指向本地服务器器接口，联调测试上线的时候只需要把指向本地服务器地址替换成线上地址一下就可以了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    $(function () &#123;</span><br><span class="line">        // var baseUrl = &apos;https://xiaomujin.club&apos;;   //线上地址</span><br><span class="line">        var baseUrl = &apos;http://localhost:3000/api&apos;;  //本地服务器地址</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: baseUrl+&apos;/mydata/index/data/list&apos;,</span><br><span class="line">            contentType: &apos;application/json&apos;,</span><br><span class="line">            type: &apos;POST&apos;,</span><br><span class="line">            timeout: 5000,</span><br><span class="line">            dataType:&apos;JSON&apos;,</span><br><span class="line">            data: JSON.stringify(&#123;schoolId: 123&#125;),</span><br><span class="line">            success: function (res) &#123;</span><br><span class="line">                if(res.code == &apos;000&apos;)&#123;</span><br><span class="line">                    console.log(res);</span><br><span class="line">                    $(&apos;body&apos;).html(JSON.stringify(res));</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    alert(res.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            Error: function (xhr, type, errorThrown) &#123;</span><br><span class="line">                console.log(JSON.stringify(xhr));</span><br><span class="line">                console.log(type);</span><br><span class="line">                console.log(errorThrown);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;引言：&quot;&gt;&lt;a href=&quot;#引言：&quot; class=&quot;headerlink&quot; title=&quot;引言：&quot;&gt;&lt;/a&gt;引言：&lt;/h2&gt;&lt;p&gt;&amp;emsp;&amp;emsp;不知道你在项目开发过程中，有没有遇到过有过以下场景： 一般是前端先制作静态页面，同时服务器端创建数据库，搭服务器端架构，写接口； 当接口写完之后，前端或者后端才能嵌套页面。 但是，如果前端页面制作好了，后端接口还没有写好呢？或者如何让前端、后端各自做各自的事情，互相不影响？ 能做到下面这样是不是很好呢？ ——在进行完需求分析和详细设计后，前端、后端一同商量、制作出一份接口文档 （其中接口名、参数、返回值名称、返回值类型都定义好） 前端页面制作好之后，直接模拟出该接口的json文件，先去请求该文件，把页面绑定、业务逻辑都处理好。 等前端全部绑定好，同时后端接口写好后，我们只需要前端修改接口地址，其他不用做任何修改。 这样，是不是前端不用等后端接口全部写完才能开始剩下的工作呢？&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/categories/node-js/"/>
    
    
      <category term="前端" scheme="https://www.xiaomujin.club/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="node.js" scheme="https://www.xiaomujin.club/tags/node-js/"/>
    
      <category term="本地模拟后端数据接口" scheme="https://www.xiaomujin.club/tags/%E6%9C%AC%E5%9C%B0%E6%A8%A1%E6%8B%9F%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>Markdown基本语法使用</title>
    <link href="https://www.xiaomujin.club/2019/07/26/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <id>https://www.xiaomujin.club/2019/07/26/Markdown基本语法/</id>
    <published>2019-07-26T01:00:00.000Z</published>
    <updated>2019-08-02T09:57:33.778Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>写过博客或者github上面的文档的，应该知道Markdown语法的重要性，我自己就在把弄这个博客，写文章就是用的这个Markdown语法，本来也是完全不会的，用着用着就熟练了，很容易。<br><a id="more"></a></p><h1 id="1、常用快捷键"><a href="#1、常用快捷键" class="headerlink" title="1、常用快捷键"></a><font color="red">1、常用快捷键</font></h1><table><thead><tr><th style="text-align:center">功能</th><th style="text-align:center">快捷键</th></tr></thead><tbody><tr><td style="text-align:center">加粗</td><td style="text-align:center">Ctrl + B</td></tr><tr><td style="text-align:center">斜体</td><td style="text-align:center">Ctrl + I</td></tr><tr><td style="text-align:center">引用</td><td style="text-align:center">Ctrl + Q</td></tr><tr><td style="text-align:center">插入链接</td><td style="text-align:center">Ctrl + L</td></tr><tr><td style="text-align:center">插入代码</td><td style="text-align:center">Ctrl + K</td></tr><tr><td style="text-align:center">插入图片</td><td style="text-align:center">Ctrl + G</td></tr><tr><td style="text-align:center">提升标题</td><td style="text-align:center">Ctrl + H</td></tr><tr><td style="text-align:center">有序列表</td><td style="text-align:center">Ctrl + O</td></tr><tr><td style="text-align:center">无序列表</td><td style="text-align:center">Ctrl + U</td></tr><tr><td style="text-align:center">横线</td><td style="text-align:center">Ctrl + R</td></tr><tr><td style="text-align:center">撤销</td><td style="text-align:center">Ctrl + Z</td></tr><tr><td style="text-align:center">重做</td><td style="text-align:center">Ctrl + Y</td></tr></tbody></table><h1 id="2、基本语法"><a href="#2、基本语法" class="headerlink" title="2、基本语法"></a><font color="red">2、基本语法</font></h1><h2 id="2-1-字体设置斜体、粗体、删除线"><a href="#2-1-字体设置斜体、粗体、删除线" class="headerlink" title="2.1 字体设置斜体、粗体、删除线"></a>2.1 字体设置斜体、粗体、删除线</h2><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">**这是加粗的文字**</span><br><span class="line">*这是倾斜的文字*</span><br><span class="line">_这是倾斜文字_</span><br><span class="line">***这是斜体加粗的文字***</span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure></p><p>效果如下：</p><p><strong>这是加粗的文字</strong><br><em>这是倾斜的文字</em><br><em>这是倾斜文字</em><br><strong><em>这是斜体加粗的文字</em></strong><br><del>这是加删除线的文字</del></p><h2 id="2-2-分级标题"><a href="#2-2-分级标题" class="headerlink" title="2.2 分级标题"></a>2.2 分级标题</h2><p>在想要设置为标题的文字前面加#来表示<br>一个#是一级标题，二个#是二级标题，以此类推。支持六级标题。</p><p>示例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 这是一级标题</span><br><span class="line">## 这是二级标题</span><br><span class="line">### 这是三级标题</span><br><span class="line">#### 这是四级标题</span><br><span class="line">##### 这是五级标题</span><br><span class="line">###### 这是六级标题</span><br></pre></td></tr></table></figure></p><p>效果如下：</p><h1 id="这是一级标题"><a href="#这是一级标题" class="headerlink" title="这是一级标题"></a>这是一级标题</h1><h2 id="这是二级标题"><a href="#这是二级标题" class="headerlink" title="这是二级标题"></a>这是二级标题</h2><h3 id="这是三级标题"><a href="#这是三级标题" class="headerlink" title="这是三级标题"></a>这是三级标题</h3><h4 id="这是四级标题"><a href="#这是四级标题" class="headerlink" title="这是四级标题"></a>这是四级标题</h4><h5 id="这是五级标题"><a href="#这是五级标题" class="headerlink" title="这是五级标题"></a>这是五级标题</h5><h6 id="这是六级标题"><a href="#这是六级标题" class="headerlink" title="这是六级标题"></a>这是六级标题</h6><h2 id="2-3-链接"><a href="#2-3-链接" class="headerlink" title="2.3 链接"></a>2.3 链接</h2><p>(1)插入图片&emsp;&emsp;注：图片描述不是必须的~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">！[图片描述](图片本地url/网上url)</span><br></pre></td></tr></table></figure></p><p>(2)超连接<br>给文字添加点击链接用下面第一种，直接输入链接也是可以点击的。</p><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[点击进入我的blog] (www.xiaomujin.club)</span><br><span class="line">www.xiaomujin.club</span><br></pre></td></tr></table></figure></p><p>效果：</p><p><a href="www.xiaomujin.club">点击进入我的blog</a><br><a href="http://www.xiaomujin.club">www.xiaomujin.club</a></p><h2 id="2-4-分割线"><a href="#2-4-分割线" class="headerlink" title="2.4 分割线"></a>2.4 分割线</h2><p>你可以在一行中用三个以上的星号(*)、减号(-)、底线(_)来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号或是底线中间插入空格。</p><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*****</span><br><span class="line">-----</span><br><span class="line">_____</span><br></pre></td></tr></table></figure></p><p>实现效果：</p><p>(*)的底线</p><hr><h2 id="的底线-3个以上的-号也相当于一个二级标题，3个以上的-号相当于一级标题"><a href="#的底线-3个以上的-号也相当于一个二级标题，3个以上的-号相当于一级标题" class="headerlink" title="(-)的底线(3个以上的-号也相当于一个二级标题，3个以上的=号相当于一级标题)"></a>(-)的底线(3个以上的-号也相当于一个二级标题，3个以上的=号相当于一级标题)</h2><p>(_)的底线</p><hr><h2 id="2-5-代码块"><a href="#2-5-代码块" class="headerlink" title="2.5 代码块"></a>2.5 代码块</h2><p>对于程序员来说这个功能是必不可少的，插入程序代码的方式有两种，一种是利用缩进(tab), 另一种是利用反引号（一般在ESC键下方，和~同一个键）包裹代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">多行代码块：（```这里一个多行代码块```）</span><br><span class="line">行内需要引用代码块：（`这是一个行内代码块`）</span><br></pre></td></tr></table></figure></p><p>在代码区块里面， &amp; 、 &lt; 和 &gt; 会自动转成 HTML 实体，这样的方式让你非常容易使用 Markdown 插入范例用的 HTML 原始码，只需要复制贴上，剩下的 Markdown 都会帮你处理。</p><p>示例如下：<br><img src="https://xuqian.xiaomujin.club/blog/20190726/7iqy8o8XY0s1.png" alt="代码块"></p><h2 id="2-6-引用"><a href="#2-6-引用" class="headerlink" title="2.6 引用"></a>2.6 引用</h2><p>在被引用的文本前加上&gt;符号，以及一个空格就可以了，如果只输入了一个&gt;符号会产生一个空白的引用。<br>引用也可以嵌套，如加两个&gt;&gt;三个&gt;&gt;&gt;<br>n个…<br>貌似可以一直加下去，但没神马卵用</p><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; ##### 引用1</span><br><span class="line">&gt; &gt; 引用2</span><br><span class="line">&gt; &gt; &gt; 引用3</span><br></pre></td></tr></table></figure></p><p>效果如下：</p><blockquote><h5 id="有5级标题的引用1"><a href="#有5级标题的引用1" class="headerlink" title="有5级标题的引用1"></a>有5级标题的引用1</h5><blockquote><p>引用2</p><blockquote><p>引用3</p></blockquote></blockquote></blockquote><h5 id="引用的区块内也可以使用其他的-Markdown-语法，包括标题、列表、代码区块等。"><a href="#引用的区块内也可以使用其他的-Markdown-语法，包括标题、列表、代码区块等。" class="headerlink" title="引用的区块内也可以使用其他的 Markdown 语法，包括标题、列表、代码区块等。"></a>引用的区块内也可以使用其他的 Markdown 语法，包括标题、列表、代码区块等。</h5><h2 id="2-7-列表"><a href="#2-7-列表" class="headerlink" title="2.7 列表"></a>2.7 列表</h2><p>(1）无序列表<br>语法：<br>无序列表用 - + * 任何一种都可以</p><p>示例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 列表内容</span><br><span class="line">+ 列表内容</span><br><span class="line">* 列表内容</span><br><span class="line"></span><br><span class="line">注意：- + * 跟内容之间都要有一个空格</span><br></pre></td></tr></table></figure><p>效果如下：</p><ul><li>列表内容</li></ul><ul><li>列表内容</li></ul><ul><li>列表内容</li></ul><p>(2)有序列表<br>语法：<br>数字加点</p><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 列表内容</span><br><span class="line">2. 列表内容</span><br><span class="line">3. 列表内容</span><br><span class="line"></span><br><span class="line">注意：序号跟内容之间要有空格</span><br></pre></td></tr></table></figure></p><p>效果：</p><ol><li>列表内容</li><li>列表内容</li><li>列表内容</li></ol><p>(3)列表嵌套<br>上一级和下一级之间敲三个空格即可</p><ul><li><p>一级无序列表内容</p><ul><li>二级无序列表内容</li><li>二级无序列表内容</li><li>二级无序列表内容</li></ul></li></ul><ul><li><p>一级无序列表内容</p><ol><li>二级有序列表内容</li><li>二级有序列表内容</li><li>二级有序列表内容</li></ol></li></ul><ol><li><p>一级有序列表内容</p><ul><li>二级无序列表内容</li><li>二级无序列表内容</li><li>二级无序列表内容</li></ul></li><li><p>一级有序列表内容</p><ol><li>二级有序列表内容</li><li>二级有序列表内容</li><li>二级有序列表内容</li></ol></li></ol><h5 id="列表不光可以单独使用，也可以使用其他的-Markdown-语法，包括标题、引用、代码区块等。"><a href="#列表不光可以单独使用，也可以使用其他的-Markdown-语法，包括标题、引用、代码区块等。" class="headerlink" title="列表不光可以单独使用，也可以使用其他的 Markdown 语法，包括标题、引用、代码区块等。"></a>列表不光可以单独使用，也可以使用其他的 Markdown 语法，包括标题、引用、代码区块等。</h5><p>注意事项:<br>&emsp;&emsp;在使用列表时，只要是数字后面加上英文的点，就会无意间产生列表，比如2017.12.30 这时候想表达的是日期，有些软件把它被误认为是列表。解决方式：在每个点前面加上\就可以了。如下图所示</p><p><img src="https://xuqian.xiaomujin.club/blog/20190726/7jFPztdixXUx.png" alt="转意符"></p><h2 id="2-8-表格"><a href="#2-8-表格" class="headerlink" title="2.8 表格"></a>2.8 表格</h2><p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">表头|表头|表头</span><br><span class="line">---|:--:|---:</span><br><span class="line">内容|内容|内容</span><br><span class="line">内容|内容|内容</span><br><span class="line"></span><br><span class="line">第二行分割表头和内容。</span><br><span class="line">- 有一个就行，为了对齐，多加了几个</span><br><span class="line">文字默认居左</span><br><span class="line">-两边加：表示文字居中</span><br><span class="line">-右边加：表示文字居右</span><br><span class="line">注：原生的语法两边都要用 | 包起来。此处省略</span><br></pre></td></tr></table></figure></p><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">姓名|技能|排行</span><br><span class="line">:--:|:--:|:--:</span><br><span class="line">刘备|哭|大哥</span><br><span class="line">关羽|打|二哥</span><br><span class="line">张飞|骂|三弟</span><br></pre></td></tr></table></figure></p><p>效果：</p><table><thead><tr><th style="text-align:center">姓名</th><th style="text-align:center">技能</th><th style="text-align:center">排行</th></tr></thead><tbody><tr><td style="text-align:center">刘备</td><td style="text-align:center">哭</td><td style="text-align:center">大哥</td></tr><tr><td style="text-align:center">关羽</td><td style="text-align:center">打</td><td style="text-align:center">二哥</td></tr><tr><td style="text-align:center">张飞</td><td style="text-align:center">骂</td><td style="text-align:center">三弟</td></tr></tbody></table><h1 id="3、常用技巧"><a href="#3、常用技巧" class="headerlink" title="3、常用技巧"></a><font color="red">3、常用技巧</font></h1><h2 id="3-1-换行"><a href="#3-1-换行" class="headerlink" title="3.1 换行"></a>3.1 换行</h2><p>方法1: 连续两个以上空格+回车;<br>方法2：使用html语言换行标签。</p><h2 id="3-2-缩进字符"><a href="#3-2-缩进字符" class="headerlink" title="3.2 缩进字符"></a>3.2 缩进字符</h2><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">木槿前端不求人 //未缩进对比</span><br><span class="line">&amp;nbsp;木槿前端不求人              //缩进1/4个中文</span><br><span class="line">&amp;ensp;木槿前端不求人 //缩进半个中文，1个字符</span><br><span class="line">&amp;emsp;木槿前端不求人 //缩进一个中文，2个字符</span><br></pre></td></tr></table></figure></p><p>效果如下：</p><p>木槿前端不求人<br>&nbsp;木槿前端不求人<br>&ensp;木槿前端不求人<br>&emsp;木槿前端不求人</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;写过博客或者github上面的文档的，应该知道Markdown语法的重要性，我自己就在把弄这个博客，写文章就是用的这个Markdown语法，本来也是完全不会的，用着用着就熟练了，很容易。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Markdown" scheme="https://www.xiaomujin.club/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>你不知道的JavaScript三大“黑话”</title>
    <link href="https://www.xiaomujin.club/2019/07/24/%E4%BD%A0%E6%89%80%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84javascript&#39;%E9%BB%91%E8%AF%9D&#39;/"/>
    <id>https://www.xiaomujin.club/2019/07/24/你所不知道的javascript&#39;黑话&#39;/</id>
    <published>2019-07-24T01:30:00.000Z</published>
    <updated>2019-08-02T09:58:30.006Z</updated>
    
    <content type="html"><![CDATA[<p>因为球是圆的，所以不论发生什么都有可能，对这点我是深信不疑的，但最近我总是在怀疑，JavaScript也是圆的！下面我们一起来看看JavaScript有啥黑话：<br><a id="more"></a></p><h1 id="1-“算术”"><a href="#1-“算术”" class="headerlink" title="1.“算术”"></a>1.“算术”</h1><p>算术中的位运算已被作者列为禁术，因此希望你在工程中使用位运算时，请确保你有充足的理由使用，并在需要时写好Hack注释。</p><h3 id="！与-！！"><a href="#！与-！！" class="headerlink" title="！与 ！！"></a><font color="red">！与 ！！</font></h3><p>&emsp;&emsp;!&nbsp;为逻辑非操作符，可以应用于ECMAScript中的任何值，无论这个值是什么类型，它会被强制转化为一个布尔值变量，再对其值取反。<br>&emsp;&emsp;! !&nbsp;只是单纯的将操作数执行两次逻辑，他能将任意类型的值转化为相应的布尔值，它包含的步骤为：</p><p>&emsp;&emsp;1.将一个值转化为布尔值；</p><p>&emsp;&emsp;2.将其取反；</p><p>&emsp;&emsp;3.再次取反。</p><p>假设你需要通过一个布尔型变量表示是否有ID值，以下写法推荐你使用最后一种方式来进行转化：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const enable1 = !!id;</span><br><span class="line">const enable2 = id ? true : false;</span><br><span class="line">const enable3 = Boolean(id);</span><br></pre></td></tr></table></figure></p><h3 id="与"><a href="#与" class="headerlink" title="~与 ~~"></a><font color="red">~与 ~~</font></h3><p>~ 表示按位取反，~5的运算步骤为：</p><p>&emsp;&emsp;1.转为一个字节的二进制表示：00000101；</p><p>&emsp;&emsp;2.按位取反：11111010；</p><p>&emsp;&emsp;3.取其反码：10000101；</p><p>&emsp;&emsp;4.取其补码：10000110；</p><p>&emsp;&emsp;5.转化为十进制：- 6。</p><p>~~它代表双非按位取反运算符，如果你想使用比Math.floor()更快的方法，那就是它了。需要注意，对于正数，它向下取整；对于负数，向上取整；非数字取值为0，它具体的表现形式为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~~null;      // =&gt; 0</span><br><span class="line">~~undefined; // =&gt; 0</span><br><span class="line">~~Infinity;  // =&gt; 0</span><br><span class="line">~~NaN;       // =&gt; 0</span><br><span class="line">~~0;         // =&gt; 0</span><br><span class="line">~~&#123;&#125;;        // =&gt; 0</span><br><span class="line">~~[];        // =&gt; 0</span><br><span class="line">~~(1/0);     // =&gt; 0</span><br><span class="line">~~false;     // =&gt; 0</span><br><span class="line">~~true;      // =&gt; 1</span><br><span class="line">~~1.9;       // =&gt; 1</span><br><span class="line">~~-1.9;      // =&gt; -1</span><br></pre></td></tr></table></figure></p><h3 id><a href="#" class="headerlink" title="+"></a><font color="red">+</font></h3><p>在变量值前使用+的本意是将变量转换为数字，在一个函数接受数字类型的参数时特别有用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+&apos;1&apos; // 1</span><br><span class="line">+&apos;-1&apos;    // -1</span><br><span class="line">+[]  // 0</span><br><span class="line">+&#123;&#125;  // NaN</span><br></pre></td></tr></table></figure></p><p>根据观察，+a与a * 1结果类似。除此之外，使用+也可以作为立即执行函数：+function(){}()，等效于(function( ){ })( )。</p><p>字符串与数字相加时会将数值默认转为字符串，因此有了一下将数字转为字符串的快捷方法：’’ + 1。</p><h3 id="amp-与-amp-amp"><a href="#amp-与-amp-amp" class="headerlink" title="&amp;与 &amp;&amp;"></a><font color="red">&amp;与 &amp;&amp;</font></h3><p>在JavaScript中，&amp;只能进行位运算。</p><p>&amp;，它表示按位与，此运算符需要两个数字并返回一个数字。如果它们不是数字，则会转换为数字。如果执行7 &amp; 3， 则会经过以下步骤：</p><p>&emsp;&emsp;1.先转换为2进制： 111 &amp; 11；</p><p>&emsp;&emsp;2.比较结果为： 011；</p><p>&emsp;&emsp;3.将二进制转换回十进制，因此： 7 &amp; 3 = 3。</p><p>它也可以用于奇偶数判断：const isOdd = num =&gt; !!(num &amp; 1)。</p><p>&amp;&amp;，表示逻辑与，通常用于if条件判断，可跟你想象的不太一样，&amp;&amp;并不是单纯的返回true或者false，而是依据：</p><p>&emsp;&emsp;1.若第一个表达式为false，则返回第一个表达式；</p><p>&emsp;&emsp;2.若第一个表达式为true，返回第二个表达式。在这里举几个例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 &amp;&amp; false          0 (both are false-y, but 0 is the first)</span><br><span class="line">true &amp;&amp; false       false (second one is false-y)</span><br><span class="line">true &amp;&amp; true        true (both are true-y)</span><br><span class="line">true &amp;&amp; 20          20 (both are true-y)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;&amp;&amp;可以连接多个操作符，如：a &amp;&amp; b &amp;&amp; c &amp;&amp; d，返回值的规则与上面一样。除此以外，它还经常被作为短路逻辑使用：若前面表达式不是Truthy，则不会继续执行之后的表达式。如在取一个对象的属性，我们需要先判断是否为空才能进行取值，否则会抛出Uncaught TypeError，这种情况下一般我们也会通过逻辑或，给与表达式一个默认值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const value = obj &amp;&amp; obj.value || false</span><br></pre></td></tr></table></figure></p><p>当JavaScript压缩工具遇到 if 判断时，也会使用&amp;&amp;短路逻辑从而节省内存空间：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// before</span><br><span class="line">if (test) &#123; alert(&apos;hello&apos;) &#125;</span><br><span class="line">// after</span><br><span class="line">test &amp;&amp; alert(&apos;hello&apos;)</span><br></pre></td></tr></table></figure></p><h3 id="与-1"><a href="#与-1" class="headerlink" title="| 与 ||"></a><font color="red">| 与 ||</font></h3><p>它们与&amp;和&amp;&amp;使用方法很相似，不同的是它们表示的是逻辑或，因此使用 | 会进行按位或运算，而 || 会返回第一个Truthy值。</p><p>使用 || 进行默认值赋值在JavaScript中十分常见，这样可以省略很多不必要的if语句，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// before</span><br><span class="line">let res;</span><br><span class="line">if (a) &#123;</span><br><span class="line">  res = a;</span><br><span class="line">&#125; else if (b) &#123;</span><br><span class="line">  res = b;</span><br><span class="line">&#125; else if (c) &#123;</span><br><span class="line">  res = c;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  res = 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// after</span><br><span class="line">const res = a || b || c || 1;</span><br></pre></td></tr></table></figure></p><h3 id="与-2"><a href="#与-2" class="headerlink" title="= = 与 = = ="></a><font color="red">= = 与 = = =</font></h3><p>= =为相等运算符，操作符会先将左右两边的操作数强制转型，转换为相同的操作数，再进行相等性比较。</p><p>= = =为全等运算符，它除了在比较时不会将操作数强制转型，其余相等判断与= =一致。</p><p>&emsp;&emsp;简单而言，= =用于判断值是否相等，= = =判断值与类型是否都相等，因此使用全等运算符判断操作数会更准确，新手也在学习JavaScript接收到的前几条Tips就是避免使用相等运算符，真的是这样吗？没错，这样能确保在你不彻底熟悉语言的情况下，尽可能的去避免犯错，但是我们也应该清楚在哪些情况下应该使用相等运算符，规则往往只针对于新手，而对聪明的你来说，最重要的是要清楚自己在做什么。</p><p>相等操作符对于不同类型的值，进行的比较如下图所示：<br><img src="https://xuqian.xiaomujin.club/blog/20190724/Rug3veqFxcBh.png" alt="运算符"></p><p>针对于undefined与null：undefined与null互等，与其余任意对象都不相等，因此在某些lib里，你可能会看到如下写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (VAR == undefined) &#123;&#125;</span><br><span class="line">if (VAR == null) &#123;&#125;</span><br></pre></td></tr></table></figure></p><p>它等效于：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (VAR === undefined || VAR === null) &#123;&#125;</span><br></pre></td></tr></table></figure></p><p>对于 ‘ ‘, false, 0而言，他们都属于Falsy类型，通过Boolean对象都会转换为假值，而通过==判断三者的关系，他们总是相等的，因为在比较值时它们会因为类型不同而都被转换为false值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log((false == 0) &amp;&amp; (0 == &apos;&apos;) &amp;&amp; (&apos;&apos; == false)) // true</span><br></pre></td></tr></table></figure></p><p>或者有时候我们希望利用强转特性比较字符串与数字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(11 == &apos;11&apos;) // true</span><br><span class="line">console.log(11 === &apos;11&apos;) // false</span><br></pre></td></tr></table></figure></p><h3 id="-1"><a href="#-1" class="headerlink" title="^"></a><font color="red">^</font></h3><p>按位异或运算符，对比每一个比特位，当比特位不相同时则返回1，否则返回0。很少人在Web开发中使用此运算符吧，除了传说中的一种场景：交换值。</p><p>若要交换a与b的值，如果可以的话推荐你使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[a, b] = [b, a];</span><br></pre></td></tr></table></figure></p><p>或者新建一个c，用于存储临时变量，如果你遇到有人这样书写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 异或运算，相同位取0，不同位取1，a ^ b ^ b = a， a ^ a ^ b = b</span><br><span class="line">a = a ^ b</span><br><span class="line">b = a ^ b</span><br><span class="line">a = a ^ b</span><br></pre></td></tr></table></figure></p><p>这样通过异或运算进行交换两个数字型变量，请原谅他并忽视它，他只可能是一个醉心于魔法的初心者，并祝愿他早日发现，简洁易读的函数才是最佳实践。</p><h3 id="-2"><a href="#-2" class="headerlink" title=".."></a><font color="red">..</font></h3><p>&emsp;&emsp;在JavaScipt整数和浮点数都属于Number类型，所有数字都以64位浮点数的形式储存，因此在解析语句时允许数组后面跟着一个小数点（1. === 1），可这样其实会引发一个问题，解释器无法解析1.toString()这样的语句，会抛出：Uncaught SyntaxError，此时表达式中的 . 并没有视为属性访问器，而是与1结合为浮点数1. ，所以程序会报错，1. toString()等同于1toString()。</p><p>&emsp;&emsp;为了更便于理解，可以记住这个规则：在解释器眼中，Number型表达式的出现的第一个.为浮点数的小数分隔符号，第二个.为属性访问器。比如1.0.toString()与1. .toString()这样的语法都能正常执行。需要注意的是变量与表达式的区别，若将Number型表达式赋值给变量，通过变量是可以直接调用原型方法的，因为此时的 . 没有歧义。</p><p>&emsp;&emsp;这样的松散类型结构确实很使人产生误解，在程序中我们都应该规避这样的歧义性语句，通过括号消除数值表达式的歧义(1).toString()，而不是为了耍酷使用1. .toString( )。</p><h3 id="void"><a href="#void" class="headerlink" title="void"></a><font color="red">void</font></h3><p>&emsp;&emsp;根据MDN中的定义：void对给定的表达式进行求值，然后返回undefined，我们可以有很多种方式去理解这句话。</p><p>&emsp;&emsp;首先它可以作为undefined的替代品，由于undefined不是保留字，它其实是一个全局变量值，因此我们可以对其进行改变，程序可能会出现不稳定的状态，在ES5中已经是一个只读属性了，但是在局部作用域中，还是有被重载的可能（你可能也有被害妄想症）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(function() &#123;</span><br><span class="line">  const undefined = &apos;hello&apos;;</span><br><span class="line">  console.log(undefined); // hello</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;其次，我们可以在函数前面加上void关键字，表示函数没有返回值，但是不必在每一个函数都加上，这不符合JavaScript的代码风格，利用此特性我们可以用于执行IIFE（立即执行函数），让我们来看以下示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const arrs = []</span><br><span class="line">(function() &#123;</span><br><span class="line">  console.log(&apos;hello&apos;)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;若你不习惯于写分号，那就极有可能遇到过这种报错：Uncaught TypeError: [] is not a function，这是由于编辑器在进行minify的时候无法进行正确的分词，这时通过void就可以解决此类问题，解决了分词的问题，也使立即执行函数调用更加优雅：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const arrs = []</span><br><span class="line">void function() &#123;</span><br><span class="line">  console.log(&apos;hello&apos;)</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure></p><p>在有时我们不希望a标签进行跳转，以下是一些常用方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用 preventDefault --&gt;</span><br><span class="line">&lt;a id=&quot;a&quot; href=&quot;&quot;&gt;hello&lt;/a&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  a.addEventListener(&apos;click&apos;, e =&gt; e.preventDefault());</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用return false --&gt;</span><br><span class="line">&lt;a href=&quot;&quot; onclick=&quot;return false;&quot;&gt;hello&lt;/a&gt;</span><br></pre></td></tr></table></figure></p><h3 id="数值表示法"><a href="#数值表示法" class="headerlink" title="数值表示法"></a><font color="red">数值表示法</font></h3><font size="5">3e9</font><p>&emsp;&emsp;科学计数法是一种数学术语，将一个数表示为a乘以10的n次方，如光速30万公里每秒，在计算中通常将米做单位，则记为：300000000m/s，而在JavaScript中我们可使用科学计数法 3e9表示。</p><p>在这里举几个科学计数法的示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1e5; // 100000</span><br><span class="line">2e-4; // 0.0002</span><br><span class="line">-3e3; // -3000</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;Number对象有toExponential(fractionDigits)方法以科学计数法返回该数值的字符串表示形式，参数fractionDigits可选，用于用来指定小数点后有几位数字，例如：(179000).toExponential(); // “1.79e+5”。</p><p>以下情况JavaScript会自动将数值转为科学计数法表示：</p><p>&emsp;&emsp;1.小数点前的数字多于21位。</p><p>&emsp;&emsp;2.数值小于1且小数点后的零多于5个，如0.0000001。</p><font size="5">.5px</font><p>&emsp;&emsp;通常某些人习惯省略0.开头的数字，常见于数值计算、css属性中，比如0.5px可直接写为.5px，0.2 / 0.3可写为： .2 / .3</p><font size="5">0x、0o和0b</font><p>&emsp;&emsp;在十进制的世界里呆久了，请不要忘记还有其他进制的存在，在计算机中它们是同地位的。JavaScript提供了以下进制的表示方法：</p><ul><li><p>二进制：只用0和1两个数字，前缀为0b，十进制13可表示为0b1101</p></li><li><p>八进制：只用0到7八个数字，前缀为0o、0，十进制13可表示为0o15、015</p></li><li><p>十六进制：只用0到9的十个数字，和a到f六个字母，前缀为0x，十进制13可表示为0xd</p></li></ul><p>&emsp;&emsp;默认情况下，JavaScript 内部会自动将八进制、十六进制、二进制转为十进制再进行运算。从十进制转其他进制请查阅toString()方法，从其他进制转十进制请查阅parseInt()方法，从其他进制转其他进制请先转为十进制再转为其他方法。</p><h1 id="1-“话术”"><a href="#1-“话术”" class="headerlink" title="1.“话术”"></a>1.“话术”</h1><h3 id="Array-prototype-sort"><a href="#Array-prototype-sort" class="headerlink" title="Array.prototype.sort"></a><font color="red">Array.prototype.sort</font></h3><p>&emsp;&emsp;Array.prototype.sort()默认根据字符串的Unicode编码进行排序，具体算法取决于实现的浏览器，在v8引擎中，若数组长度小于10则使用从插入排序，大于10使用的是快排。</p><p>&emsp;&emsp;而sort支持传入一个compareFunction(a, b)的参数，其中a、b为数组中进行比较的两个非空对象(所有空对象将会排在数组的最后)，具体比较规则为：</p><ul><li><p>返回值小于0，a排在b的左边</p></li><li><p>返回值等于0，a和b的位置不变</p></li><li><p>返回值大于0，a排在b的右边</p></li></ul><p>因此利用sort即可写一个打乱数组的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,2,3,4].sort(() =&gt; .5 - Math.random())</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;但是以上的实现并不是完全随机的，究其原因，还是因为排序算法的不稳定性，导致一些元素没有机会进行比较，具体请参考问题，在抽奖程序中若要实现完全随机，请使用 Fisher–Yates shuffle 算法，以下是简单实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function shuffle(arrs) &#123;</span><br><span class="line">  for (let i = arrs.length - 1; i &gt; 0; i -= 1) &#123;</span><br><span class="line">    const random = Math.floor(Math.random() * (i + 1));</span><br><span class="line">    [arrs[random], arrs[i]] = [arrs[i], arrs[random]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Array-prototype-concat-apply"><a href="#Array-prototype-concat-apply" class="headerlink" title="Array.prototype.concat.apply"></a><font color="red">Array.prototype.concat.apply</font></h3><p>&emsp;&emsp;apply接收数组类型的参数来调用函数，而concat接收字符串或数组的多个参数，因此可使用此技巧将二维数组直接展平：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.concat.apply([], [1, [2,3], [4]])</span><br></pre></td></tr></table></figure></p><p>而通过此方法也可以写一个深层次遍历的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function flattenDeep(arrs) &#123;</span><br><span class="line">  let result = Array.prototype.concat.apply([], arrs);</span><br><span class="line">  while (result.some(item =&gt; item instanceof Array)) &#123;</span><br><span class="line">    result = Array.prototype.concat.apply([], result);</span><br><span class="line">  &#125;</span><br><span class="line">  return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>经过测试，效率与lodash对比如下:</p><p><img src="https://xuqian.xiaomujin.club/blog/20190724/fqqe5HkjJBSn.png" alt="效率对比"></p><p>对上述方法中的Array.prototype.concat.apply([ ], target)亦可以写成：[ ].concat(…target)。</p><h3 id="Array-prototype-push-apply"><a href="#Array-prototype-push-apply" class="headerlink" title="Array.prototype.push.apply"></a><font color="red">Array.prototype.push.apply</font></h3><p>在es5中，若想要对数组进行拼接操作，我们习惯于使用数组中的concat方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let arrs = [1, 2, 3];</span><br><span class="line">arrs = arrs.concat([4,5,6]);</span><br></pre></td></tr></table></figure></p><p>但还有酷的方法，利用apply方法的数组传参特性，可以更简洁的执行拼接操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrs = [1, 2, 3];</span><br><span class="line">arrs.push.apply(arrs, [4, 5, 6]);</span><br></pre></td></tr></table></figure></p><h3 id="Array-prototype-length"><a href="#Array-prototype-length" class="headerlink" title="Array.prototype.length"></a><font color="red">Array.prototype.length</font></h3><p>它通常用于返回数组的长度，但是也是一个包含有复杂行为的属性，首先需要说明的是，它并不是用于统计数组中元素的数量，而是代表数组中最高索引的值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arrs = [];</span><br><span class="line">arrs[5] = 1;</span><br><span class="line">console.log(arrs.length); // 6</span><br></pre></td></tr></table></figure></p><p>另外，length长度随着数组的变化而变化，但是这种变化仅限于：子元素最高索引值的变化，假如使用delete方法删除最高元素，length是不会变化的，因为最高索引值也没变：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrs = [1, 2, 3];</span><br><span class="line">delete arrs[2]; // 长度依然为3</span><br></pre></td></tr></table></figure></p><p>length还有一个重要的特性，那就是允许你修改它的值，若修改值小于数组本身的最大索引，则会对数组进行部分截取：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arrs = [1, 2, 3, 4];</span><br><span class="line">arrs.length = 2; // arrs = [1, 2]</span><br><span class="line">arrs.length = 0; // arrs = []</span><br></pre></td></tr></table></figure></p><p>若赋予的值大于当前最大索引，则会得到一个稀疏数组：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrs = [1, 2];</span><br><span class="line">arrs.length = 5; // arrs = [1, 2,,,,]</span><br></pre></td></tr></table></figure></p><p>若将值赋为0，则执行了清空数组的操作:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrs = [1, 2, 3, 4];</span><br><span class="line">arrs.length = 0; // arrs = []</span><br></pre></td></tr></table></figure></p><p>使用此方法会将数组中的所有索引都删除掉，因此也会影响其他引用此数组的值，这点跟使用arrs = []有很大的区别：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let a = [1,2,3];</span><br><span class="line">let b = [1,2,3];</span><br><span class="line">let a1 = a;</span><br><span class="line">let b1 = b;</span><br><span class="line">a = [];</span><br><span class="line">b.length = 0;</span><br><span class="line">console.log(a, b, a1, b1); // [], [], [1, 2, 3], []</span><br></pre></td></tr></table></figure></p><p>在对length进行修改的时候，还需要注意：</p><ul><li><p>值需要为正整数</p></li><li><p>传递字符串会被尝试转为数字类型</p></li></ul><h3 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call"></a><font color="red">Object.prototype.toString.call</font></h3><p>&emsp;&emsp;每个对象都有一个toString()，用于将对象以字符串方式引用时自动调用，如果此方法未被覆盖，toString则会返回[object type]，因此Object.prototype.toString.call只是为了调用原生对象上未被覆盖的方法，call将作用域指向需要判断的对象，这样一来就可以通过原生的toString方法打印对象的类型字符串： Object.prototype.toString.call([]) =&gt; “[object Array]”，利用这个特性，可以较为精确的实现类型判断。</p><p>&emsp;&emsp;在ES3中，获取到的type为内部属性[[Class]]属性，它可以用来判断一个原生属性属于哪一种内置的值；在ES5中新增了两条规则：若this值为null、undefined分别返回： [object Null]、[object Undefined]；在ES6中不存在[[Class]]了，取而代之的是一种内部属性：[[NativeBrand]]，它是一种标记值，用于区分原生对象的属性，具体的判断规则为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">19.1.3.6Object.prototype.toString ( )</span><br><span class="line">When the toString method is called, the following steps are taken:</span><br><span class="line"></span><br><span class="line">If the this value is undefined, return &quot;[object Undefined]&quot;.</span><br><span class="line">If the this value is null, return &quot;[object Null]&quot;.</span><br><span class="line">Let O be ! ToObject(this value).</span><br><span class="line">Let isArray be ? IsArray(O).</span><br><span class="line">If isArray is true, let builtinTag be &quot;Array&quot;.</span><br><span class="line">Else if O is a String exotic object, let builtinTag be &quot;String&quot;.</span><br><span class="line">Else if O has a [[ParameterMap]] internal slot, let builtinTag be &quot;Arguments&quot;.</span><br><span class="line">Else if O has a [[Call]] internal method, let builtinTag be &quot;Function&quot;.</span><br><span class="line">Else if O has an [[ErrorData]] internal slot, let builtinTag be &quot;Error&quot;.</span><br><span class="line">Else if O has a [[BooleanData]] internal slot, let builtinTag be &quot;Boolean&quot;.</span><br><span class="line">Else if O has a [[NumberData]] internal slot, let builtinTag be &quot;Number&quot;.</span><br><span class="line">Else if O has a [[DateValue]] internal slot, let builtinTag be &quot;Date&quot;.</span><br><span class="line">Else if O has a [[RegExpMatcher]] internal slot, let builtinTag be &quot;RegExp&quot;.</span><br><span class="line">Else, let builtinTag be &quot;Object&quot;.</span><br><span class="line">Let tag be ? Get(O, @@toStringTag).</span><br><span class="line">If Type(tag) is not String, set tag to builtinTag.</span><br><span class="line">Return the string-concatenation of &quot;[object &quot;, tag, and &quot;]&quot;.</span><br><span class="line">This function is the %ObjProto_toString% intrinsic object.</span><br><span class="line"></span><br><span class="line">NOTE</span><br><span class="line">Historically, this function was occasionally used to access the String value of the [[Class]] internal slot that was used in previous editions of this specification as a nominal type tag for various built-in objects. The above definition of toString preserves compatibility for legacy code that uses toString as a test for those specific kinds of built-in objects. It does not provide a reliable type testing mechanism for other kinds of built-in or program defined objects. In addition, programs can use @@toStringTag in ways that will invalidate the reliability of such legacy type tests.</span><br></pre></td></tr></table></figure></p><h3 id="Object-create-null"><a href="#Object-create-null" class="headerlink" title="Object.create(null)"></a><font color="red">Object.create(null)</font></h3><p>&emsp;&emsp;用于创建无“副作用”的对象，也就是说，它创建的是一个空对象，不包含原型链与其他属性。若使用const map = {}创建出来的对象相当于Object.create(Object.prototype)，它继承了对象的原型链。</p><h3 id="JSON-parse-JSON-stringify-Obj"><a href="#JSON-parse-JSON-stringify-Obj" class="headerlink" title="JSON.parse(JSON.stringify(Obj))"></a><font color="red">JSON.parse(JSON.stringify(Obj))</font></h3><p>&emsp;&emsp;很常用的一种深拷贝对象的方式，将对象进行JSON字符串格式化再进行解析，即可获得一个新的对象，要注意它的性能不是特别好，而且无法处理闭环的引用，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;a: 1&#125;;</span><br><span class="line">obj.b = obj;</span><br><span class="line">JSON.parse(JSON.stringify(obj)) // Uncaught TypeError: Converting circular structure to JSON</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;这样通过JSON解析的方式其实性能并不高，若对象可通过浅拷贝复制请一定使用浅拷贝的方式，不管你使用{…obj}还是Object.assign({}, obj)的方式，而如果对性能有要求的情况下，请不要再造轮子了，直接使用npm:clone这个包或是别的吧。</p><h3 id="生成-0-1-…-N-1"><a href="#生成-0-1-…-N-1" class="headerlink" title="生成[0, 1, …, N-1]"></a><font color="red">生成[0, 1, …, N-1]</font></h3><p>&emsp;&emsp;依稀记得在Python中生成列表的语法是多么简洁：[ x for x in range(1, 10) ]，那么在JavaScript如何进行初始化1~10的有序序列呢？</p><p>&emsp;&emsp;行车有规范，直接使用new Array(10)进行初始化并.map是不可取的，因为这样只设置了数组的length字段：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object.getOwnPropertyNames([1, 2, 3]) // [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;length&quot;]</span><br><span class="line">const a = new Array(3) // [undefined, undefined, undefined]</span><br><span class="line">Object.getOwnPropertyNames(a) // [&quot;length&quot;]</span><br></pre></td></tr></table></figure></p><p>这样会导致map、filter等迭代方法无效，当然使用fill填充后即可正常操作数组项，但是在这里会用其他方法解决。</p><p>&emsp;&emsp;在以前，大家喜欢使用这样的Hack技巧去初始化固定长度的数组：Array.apply(null, { length: 3 })，需要特意说明的是，{ length: 3 }其实是一个类数组对象，Array.prototype.apply内部取参数可能是这样实现的:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (let index = 0; i &lt; arguments[1].length; index++) &#123;</span><br><span class="line">  // pass arguments[1][index]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>正因如此，如果你基础没问题的话，就会发现上面的语句其实等效于：Array(undefined, undefined, undefined)，综上，生成0~10的序列语句可写为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array.apply(null, &#123; length: 10 &#125;).map((v, k) =&gt; k)</span><br></pre></td></tr></table></figure></p><p>而对于ES6来讲，完全可以用Array.from来替代以上的语句的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array.from(new Array(10), (k, v) =&gt; v)</span><br></pre></td></tr></table></figure></p><p>Array.from不仅接受字符串、Set、Map、类数组对象作为参数，凡是可迭代对象都可以，比如我们出于娱乐的目的使用生成器实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function* range(start, end) &#123;</span><br><span class="line">  for (let i = start; i &lt; end; i++) &#123;</span><br><span class="line">    yield i</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Array.from(range(1, 10)) // [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">[...range(1, 10)] // [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></pre></td></tr></table></figure></p><h1 id="1-“理论”"><a href="#1-“理论”" class="headerlink" title="1.“理论”"></a>1.“理论”</h1><h3 id="Truthy与Falsy"><a href="#Truthy与Falsy" class="headerlink" title="Truthy与Falsy"></a><font color="red">Truthy与Falsy</font></h3><p>&emsp;&emsp;对每一个类型的值来讲，它每一个对象都有一个布尔型的值，Falsy表示在Boolean对象中表现为false的值，在条件判断与循环中，JavaScript会将任意类型强制转化为Boolean对象。以下这些对象在遇到if语句时都表现为Falsy：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (false)</span><br><span class="line">if (null)</span><br><span class="line">if (undefined)</span><br><span class="line">if (0)</span><br><span class="line">if (NaN)</span><br><span class="line">if (&apos;&apos;)</span><br><span class="line">if (&quot;&quot;)</span><br><span class="line">if (document.all)</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;document.all属于历史遗留原因，所以为false，它违背了JavaScript的规范，可以不管它，而NaN这个变量，千万不要用全等或相等对其进行判断，因为它发起疯来连自己都打：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(NaN === 0) // false</span><br><span class="line">console.log(NaN === NaN) // false</span><br><span class="line">console.log(NaN == NaN) // false</span><br></pre></td></tr></table></figure></p><p>&emsp;&emsp;但是我们可以使用Object.is方法进行判断值是否为NaN，它是ES6新加入的语法，用于比较两个值是否相同，它可以视为比全等判断符更为严格的判断方法，但是不可混为一谈：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object.is(NaN, NaN) // true</span><br><span class="line">Object.is(+0, -0) // false</span><br></pre></td></tr></table></figure></p><p>而除了Falsy值，所有值都是Truthy值，在Boolean上下文中表现为true。</p><p>以上总结了JavaScript中一些自己接触过到的Trick技巧，并简单阐述使用规范，因为本文以总结为主，所以并没有将许多有价值的知识点进行展开，有需求的朋友只能自助了。如果文中有错误或不足的地方还望多多包涵并提给我，谢谢。</p><p><font size="5">参考资料：</font></p><ul><li><p><a href="https://modernweb.com/45-useful-javascript-tips-tricks-and-best-practices/" target="_blank" rel="noopener">https://modernweb.com/45-useful-javascript-tips-tricks-and-best-practices/</a></p></li><li><p><a href="https://dmitripavlutin.com/the-magic-behind-array-length-property/" target="_blank" rel="noopener">https://dmitripavlutin.com/the-magic-behind-array-length-property/</a></p></li><li><p><a href="https://stackoverflow.com/questions/7310109/whats-the-difference-between-and-in-javascript" target="_blank" rel="noopener">https://stackoverflow.com/questions/7310109/whats-the-difference-between-and-in-javascript</a></p></li><li><p><a href="http://javascript.ruanyifeng.com/grammar/number.html" target="_blank" rel="noopener">http://javascript.ruanyifeng.com/grammar/number.html</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;因为球是圆的，所以不论发生什么都有可能，对这点我是深信不疑的，但最近我总是在怀疑，JavaScript也是圆的！下面我们一起来看看JavaScript有啥黑话：&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://www.xiaomujin.club/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="JavaScript" scheme="https://www.xiaomujin.club/tags/JavaScript/"/>
    
  </entry>
  
</feed>
